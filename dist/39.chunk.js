(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{29:function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"j",function(){return c}),n.d(e,"l",function(){return s}),n.d(e,"m",function(){return o}),n.d(e,"k",function(){return u}),n.d(e,"f",function(){return i}),n.d(e,"p",function(){return d}),n.d(e,"o",function(){return l}),n.d(e,"d",function(){return m}),n.d(e,"i",function(){return f}),n.d(e,"n",function(){return p}),n.d(e,"a",function(){return g}),n.d(e,"g",function(){return b}),n.d(e,"c",function(){return h}),n.d(e,"b",function(){return v}),n.d(e,"h",function(){return w});var a=n(1);function r(t){return Object(a.a)("POST","admin/contest",t)}function c(t,e){return Object(a.a)("PUT","admin/contest/".concat(t),e)}function s(t){return Object(a.a)("GET","admin/contest/".concat(t))}function o(t,e,n){return Object(a.a)("GET","admin/contests",{page:t,perpage:e,param:n})}function u(){return Object(a.a)("GET","admin/allcontests")}function i(t){return Object(a.a)("DELETE","admin/contest/".concat(t))}function d(t){return Object(a.a)("PUT","admin/contest/".concat(t,"/status"))}function l(t,e,n,r){return Object(a.a)("GET","admin/contest/".concat(t,"/users"),{page:e,perpage:n,param:r})}function m(t,e){return Object(a.a)("POST","admin/contest/".concat(t,"/users"),e)}function f(t,e){return Object(a.a)("DELETE","admin/contest/".concat(t,"/user/").concat(e))}function p(t){return Object(a.a)("GET","admin/contest/".concat(t,"/teams"))}function g(t,e){return Object(a.a)("POST","admin/contest/".concat(t,"/team/").concat(e))}function b(t,e){return Object(a.a)("DELETE","admin/contest/".concat(t,"/team/").concat(e))}function h(t,e,n){return Object(a.a)("POST","admin/contest/".concat(t,"/team/").concat(e,"/users"),n)}function v(t,e){return Object(a.a)("POST","admin/contest/".concat(t,"/team/").concat(e,"/allusers"))}function w(t,e,n){return Object(a.a)("DELETE","admin/contest/".concat(t,"/team/").concat(e,"/user/").concat(n))}},679:function(t,e,n){"use strict";n.r(e);n(10),n(7),n(38),n(11);var a=n(29);function r(t,e,n,a,r,c,s){try{var o=t[c](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(a,r)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,c){var s=t.apply(e,n);function o(t){r(s,a,c,o,u,"next",t)}function u(t){r(s,a,c,o,u,"throw",t)}o(void 0)})}}var s={data:function(){return{loading:!0,currentPage:1,currentRowId:0,perpage:10,total:0,queryParam:"",tableData:[]}},mounted:function(){this.fetchContestList()},methods:{fetchContestList:function(){var t=c(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).loading=!0,t.prev=2,t.next=5,Object(a.m)(e.currentPage,e.perpage,e.queryParam);case 5:n=t.sent,r=n.data,setTimeout(function(){e.tableData=r.data,e.total=r.total,e.loading=!1},200),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2);case 13:case"end":return t.stop()}},t,this,[[2,10]])}));return function(){return t.apply(this,arguments)}}(),handleSizeChange:function(t){this.perpage=t,this.fetchContestList()},handleToggleContestStatus:function(){var t=c(regeneratorRuntime.mark(function t(e){var n,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,r="确认要".concat(0==e.defunct?"保留":"启用","竞赛&作业").concat(e.name,"吗?"),t.prev=2,t.next=5,n.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 5:return t.prev=5,t.next=8,Object(a.p)(e.id);case 8:c=t.sent,n.$message({type:"success",message:c.data.message}),e.defunct=!e.defunct,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),n.$message({type:"error",message:t.t0.response.data.message});case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(2),n.$message({type:"info",message:"已取消操作"});case 21:case"end":return t.stop()}},t,this,[[2,18],[5,13]])}));return function(e){return t.apply(this,arguments)}}(),handleDeleteContest:function(){var t=c(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.prev=1,t.next=4,n.$confirm("确认要删除竞赛&作业".concat(e.name,"吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 4:return t.prev=4,t.next=7,Object(a.f)(e.id);case 7:r=t.sent,n.$message({type:"success",message:r.data.message}),1==n.tableData.length&&n.currentPage>1&&n.currentPage--,n.fetchContestList(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),n.$message({type:"error",message:t.t0.response.data.message});case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),n.$message({type:"info",message:"已取消删除"});case 21:case"end":return t.stop()}},t,this,[[1,18],[4,13]])}));return function(e){return t.apply(this,arguments)}}()}},o=n(2),u=Object(o.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"admin-content"},[n("div",{staticClass:"content__breadcrumb"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v(t._s(t.$route.meta.title))])],1)],1),n("div",{staticClass:"content__main"},[n("div",{staticClass:"content__searchbar__wrapper"},[n("el-input",{staticStyle:{"max-width":"20em"},attrs:{placeholder:"请输入标签名称",maxlength:"20",clearable:""},model:{value:t.queryParam,callback:function(e){t.queryParam=e},expression:"queryParam"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",plain:""},on:{click:t.fetchContestList}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"ID",prop:"id",width:"180"}}),n("el-table-column",{attrs:{label:"名称","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:"/contest/"+e.row.id,target:"_blank"}},[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{label:"状态",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"text-button",class:[0==e.row.defunct?"text-button--success":"text-button--danger"]},[t._v(t._s(0==e.row.defunct?"启用":"保留"))]),n("span",{staticClass:"text-button",class:[0==e.row.private?"text-button--success":"text-button--danger"]},[t._v(t._s(0==e.row.private?"公开":"私有"))]),n("span",{staticClass:"text-button",class:[0==e.row.team_mode?"text-button--success":"text-button--primary"]},[t._v(t._s(0==e.row.team_mode?"个人":"团队"))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.$router.push({name:"adminEditContest",params:{id:e.row.id}})}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini",disabled:0==e.row.private},on:{click:function(n){t.$router.push({name:0==e.row.team_mode?"adminContestManage":"adminContestTeamManage",params:{id:e.row.id}})}}},[t._v("人员")]),n("el-button",{attrs:{size:"mini",type:0==e.row.defunct?"danger":"success"},on:{click:function(n){return t.handleToggleContestStatus(e.row)}}},[t._v(t._s(0==e.row.defunct?"保留":"启用"))]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDeleteContest(e.row)}}},[t._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.fetchContestList,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])},[],!1,null,"483e677c",null);e.default=u.exports}}]);