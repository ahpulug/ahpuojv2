{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{59:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return r}),a.d(t,\"a\",function(){return i}),a.d(t,\"g\",function(){return o}),a.d(t,\"e\",function(){return s}),a.d(t,\"h\",function(){return c}),a.d(t,\"f\",function(){return u}),a.d(t,\"i\",function(){return l}),a.d(t,\"c\",function(){return m}),a.d(t,\"d\",function(){return d});var n=a(0);function r(e){return Object(n.a)(\"POST\",\"admin/team\",e)}function i(e,t){return Object(n.a)(\"POST\",\"admin/team/\".concat(e,\"/users\"),t)}function o(e){return Object(n.a)(\"GET\",\"admin/team/\".concat(e))}function s(e,t){return Object(n.a)(\"PUT\",\"admin/team/\".concat(e),t)}function c(e,t,a){return Object(n.a)(\"GET\",\"admin/teams\",{page:e,perpage:t,param:a})}function u(){return Object(n.a)(\"GET\",\"admin/allteams\")}function l(e,t,a,r){return Object(n.a)(\"GET\",\"admin/team/\".concat(e,\"/users\"),{page:t,perpage:a,param:r})}function m(e){return Object(n.a)(\"DELETE\",\"admin/team/\".concat(e))}function d(e,t){return Object(n.a)(\"DELETE\",\"admin/team/\".concat(e,\"/user/\").concat(t))}},664:function(e,t,a){\"use strict\";a.r(t);a(7),a(6),a(30),a(8);var n=a(59);function r(e,t,a,n,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(n,r)}function i(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var o=e.apply(t,a);function s(e){r(o,n,i,s,c,\"next\",e)}function c(e){r(o,n,i,s,c,\"throw\",e)}s(void 0)})}}var o={data:function(){return{loading:!0,currentPage:1,currentRowId:0,perpage:10,queryParam:\"\",total:0,dialogFormTitle:\"\",dialogFormVisible:!1,submitMode:\"\",form:{name:\"\"},rules:{name:[{required:!0,message:\"请输入团队名称\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}]},tableData:[]}},mounted:function(){this.fetchTeamList()},methods:{fetchTeamList:function(){var e=i(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).loading=!0,e.prev=2,e.next=5,Object(n.h)(t.currentPage,t.perpage,t.queryParam);case 5:a=e.sent,r=a.data,setTimeout(function(){t.tableData=r.data,t.total=r.total,t.loading=!1},200),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case\"end\":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}(),handleSizeChange:function(e){this.perpage=e,console.log(this.perpage),this.fetchTeamList()},openDialog:function(){this.$refs.form.clearValidate(),this.$refs.input.focus()},closeDialog:function(){this.$refs.form.resetFields(),this.$refs.input.blur(),this.form.name=\"\"},submit:function(){var e=this;e.$refs.form.validate(function(){var t=i(regeneratorRuntime.mark(function t(a){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}if(t.prev=1,\"create\"!=e.submitMode){t.next=8;break}return t.next=5,Object(n.b)(e.form);case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Object(n.e)(e.currentRowId,e.form);case 10:r=t.sent;case 11:e.$message({message:r.data.message,type:\"success\"}),e.fetchTeamList(),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),e.$message({message:t.t0.response.data.message,type:\"error\"});case 18:e.dialogFormVisible=!1,t.next=22;break;case 21:return t.abrupt(\"return\",!1);case 22:case\"end\":return t.stop()}},t,null,[[1,15]])}));return function(e){return t.apply(this,arguments)}}())},cancel:function(){this.dialogFormVisible=!1},handleCreateTeam:function(){this.dialogFormTitle=\"新建团队\",this.submitMode=\"create\",this.dialogFormVisible=!0},handleEditTeam:function(e){this.dialogFormTitle=\"编辑团队\",this.submitMode=\"edit\",this.currentRowId=e.id,this.form.name=e.name,this.dialogFormVisible=!0},handleDeleteTeam:function(){var e=i(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.prev=1,e.next=4,a.$confirm(\"确认要删除团队\".concat(t.name,\"吗?\"),\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});case 4:return e.prev=4,e.next=7,Object(n.c)(t.id);case 7:r=e.sent,a.$message({type:\"success\",message:r.data.message}),a.fetchTeamList(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),a.$message({type:\"error\",message:e.t0.response.data.message});case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),a.$message({type:\"info\",message:\"已取消删除\"});case 20:case\"end\":return e.stop()}},e,this,[[1,17],[4,12]])}));return function(t){return e.apply(this,arguments)}}()}},s=a(2),c=Object(s.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"admin-content\"},[a(\"div\",{staticClass:\"content__breadcrumb\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[e._v(\"首页\")]),a(\"el-breadcrumb-item\",[e._v(e._s(e.$route.meta.title))])],1)],1),a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"content__button__wrapper\"},[a(\"el-button\",{attrs:{type:\"success\"},on:{click:e.handleCreateTeam}},[e._v(\"新建团队\")])],1),a(\"div\",{staticClass:\"content__searchbar__wrapper\"},[a(\"el-input\",{staticStyle:{\"max-width\":\"20em\"},attrs:{placeholder:\"请输入团队名称\",maxlength:\"20\",clearable:\"\"},model:{value:e.queryParam,callback:function(t){e.queryParam=t},expression:\"queryParam\"}}),a(\"el-button\",{attrs:{icon:\"el-icon-search\",type:\"primary\",plain:\"\"},on:{click:e.fetchTeamList}})],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{label:\"ID\",prop:\"id\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"团队名称\",prop:\"name\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"240\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(a){return e.$router.push({name:\"adminTeamManage\",params:{id:t.row.id}})}}},[e._v(\"管理\")]),a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.handleEditTeam(t.row)}}},[e._v(\"编辑\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.handleDeleteTeam(t.row)}}},[e._v(\"删除\")])]}}])})],1),a(\"el-pagination\",{attrs:{\"current-page\":e.currentPage,\"page-sizes\":[10,20,30,40,50],\"page-size\":10,layout:\"total, sizes, prev, pager, next, jumper\",total:e.total},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.fetchTeamList,\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t}}})],1),a(\"el-dialog\",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,width:\"400px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.dialogFormVisible=t},closed:e.closeDialog,opened:e.openDialog}},[a(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[a(\"el-form-item\",{attrs:{label:\"团队名称\",prop:\"name\"}},[a(\"el-input\",{ref:\"input\",attrs:{autocomplete:\"off\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submit(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",t)},expression:\"form.name\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:e.cancel}},[e._v(\"取消\")]),a(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:e.submit}},[e._v(\"确定\")])],1)],1)],1)},[],!1,null,\"b3378b12\",null);t.default=c.exports}}]);","extractedComments":[]}