{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{15:function(e,t,r){\"use strict\";r.d(t,\"i\",function(){return n}),r.d(t,\"m\",function(){return o}),r.d(t,\"j\",function(){return i}),r.d(t,\"h\",function(){return c}),r.d(t,\"g\",function(){return s}),r.d(t,\"k\",function(){return l}),r.d(t,\"l\",function(){return p}),r.d(t,\"n\",function(){return u}),r.d(t,\"o\",function(){return d}),r.d(t,\"c\",function(){return _}),r.d(t,\"b\",function(){return f}),r.d(t,\"e\",function(){return m}),r.d(t,\"f\",function(){return g}),r.d(t,\"d\",function(){return v}),r.d(t,\"a\",function(){return y});var a=r(1);function n(){return Object(a.a)(\"GET\",\"languages\")}function o(e,t){return Object(a.a)(\"GET\",\"ranklist\",{page:e,perpage:t})}function i(e,t){return Object(a.a)(\"GET\",\"news\",{page:e,perpage:t})}function c(e,t,r){return Object(a.a)(\"GET\",\"problem/\".concat(e,\"/issues\"),{page:t,perpage:r})}function s(e,t,r){return Object(a.a)(\"GET\",\"/issue/\".concat(e),{page:t,perpage:r})}function l(e){return Object(a.a)(\"GET\",\"problem/\".concat(e))}function p(e,t,r,n,o){return Object(a.a)(\"GET\",\"problems\",{page:e,perpage:t,param:r,level:n,tag_id:o})}function u(e){return Object(a.a)(\"GET\",\"solution/\".concat(e))}function d(e,t,r,n,o,i,c){return Object(a.a)(\"GET\",\"solutions\",{page:e,perpage:t,param:r,username:n,language:o,result:i,contest_id:c})}function _(e,t,r){return Object(a.a)(\"GET\",\"contests\",{page:e,perpage:t,param:r})}function f(e){return Object(a.a)(\"GET\",\"contest/\".concat(e))}function m(e){return Object(a.a)(\"GET\",\"contest/\".concat(e,\"/ranklist\"))}function g(e){return Object(a.a)(\"GET\",\"contest/\".concat(e,\"/teamranklist\"))}function v(e,t){return Object(a.a)(\"GET\",\"contest/\".concat(e,\"/problem/\").concat(t))}function y(){return Object(a.a)(\"GET\",\"alltags\")}},287:function(e,t,r){var a=r(630);\"string\"==typeof a&&(a=[[e.i,a,\"\"]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(14)(a,n);a.locals&&(e.exports=a.locals)},629:function(e,t,r){\"use strict\";var a=r(287);r.n(a).a},630:function(e,t,r){(e.exports=r(13)(!1)).push([e.i,\".red[data-v-75e0098c]{color:red}.green[data-v-75e0098c]{color:green}.blue[data-v-75e0098c]{color:blue}.black[data-v-75e0098c]{color:#000}.white[data-v-75e0098c]{color:#fff}.yellow[data-v-75e0098c]{color:#ff0}.gold[data-v-75e0098c]{color:gold}.purple[data-v-75e0098c]{color:purple}.cyan[data-v-75e0098c]{color:cyan}.orange[data-v-75e0098c]{color:orange}.orangered[data-v-75e0098c]{color:#ff4500}.pink[data-v-75e0098c]{color:pink}.violet[data-v-75e0098c]{color:violet}.yellowgreen[data-v-75e0098c]{color:#9acd32}.tomato[data-v-75e0098c]{color:tomato}.tan[data-v-75e0098c]{color:tan}.snow[data-v-75e0098c]{color:snow}.gray[data-v-75e0098c]{color:gray}.silver[data-v-75e0098c]{color:silver}.skyblue[data-v-75e0098c]{color:skyblue}.navy[data-v-75e0098c]{color:navy}.brown[data-v-75e0098c]{color:brown}.beige[data-v-75e0098c]{color:beige}.magenta[data-v-75e0098c]{color:#f0f}.c0[data-v-75e0098c]{color:#000}.c1[data-v-75e0098c]{color:#111}.c2[data-v-75e0098c]{color:#222}.c3[data-v-75e0098c]{color:#333}.c4[data-v-75e0098c]{color:#444}.c5[data-v-75e0098c]{color:#555}.c6[data-v-75e0098c]{color:#666}.c7[data-v-75e0098c]{color:#777}.c8[data-v-75e0098c]{color:#888}.c9[data-v-75e0098c]{color:#999}.c10[data-v-75e0098c]{color:#aaa}.c11[data-v-75e0098c]{color:#bbb}.c12[data-v-75e0098c]{color:#ccc}.c13[data-v-75e0098c]{color:#ddd}.c14[data-v-75e0098c]{color:#eee}.c15[data-v-75e0098c]{color:#fff}.porange[data-v-75e0098c]{color:#fc9}.pgold[data-v-75e0098c]{color:#ffc}.pazure[data-v-75e0098c]{color:#cff}.pdgreen[data-v-75e0098c]{color:#9cc}.ppurple[data-v-75e0098c]{color:#ccf}.pblue[data-v-75e0098c]{color:#09c}.plblue[data-v-75e0098c]{color:#9cf}.pdblue[data-v-75e0098c]{color:#369}.pgreen[data-v-75e0098c]{color:#9c3}.replys__wrapper .link[data-v-75e0098c]{font-size:0.24rem;line-height:0.5rem;padding-right:0.2rem}.replys__wrapper h1.content__panel__title[data-v-75e0098c]{background:#fff}.replys__wrapper .reply__box[data-v-75e0098c]{background:#fff;position:relative;margin-top:0.2rem;padding:0.2rem;border:1px solid #ddd}.replys__wrapper .reply__box .reply__userinfo__wrapper[data-v-75e0098c]{text-align:center;float:left;width:100px}.replys__wrapper .reply__box .reply__userinfo__wrapper img[data-v-75e0098c]{width:60px;height:60px;border-radius:30px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.replys__wrapper .reply__box[data-v-75e0098c]:last-child{border-bottom:1px solid #ddd}.replys__wrapper .reply__box .reply__content[data-v-75e0098c]{position:relative;box-sizing:border-box;padding:0.1rem 0.2rem 0.2rem 0.1rem;margin-left:100px;min-height:100px;text-align:left;font-size:20px}.replys__wrapper .reply__box .reply__addon[data-v-75e0098c]{font-size:16px;position:absolute;width:100%;left:0px;bottom:0px}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box[data-v-75e0098c]{padding:0.1rem;margin-left:100px;border:1px solid #ddd}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper[data-v-75e0098c]{text-align:center;padding-top:20px;float:left;width:100px}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper img[data-v-75e0098c]{width:40px;height:40px;border-radius:20px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__content[data-v-75e0098c]{position:relative;box-sizing:border-box;padding:0.15rem;margin-left:100px;min-height:100px;text-align:left;font-size:20px}.replys__wrapper .post__box__wrapper[data-v-75e0098c]{min-height:100px;text-align:left;background:#fff;padding:1rem}\\n\",\"\"])},692:function(e,t,r){\"use strict\";r.r(t);r(10),r(7),r(11);var a=r(15),n=r(78),o=r(87),i=r(30);function c(e,t,r,a,n,o,i){try{var c=e[o](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(a,n)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function i(e){c(o,a,n,i,s,\"next\",e)}function s(e){c(o,a,n,i,s,\"throw\",e)}i(void 0)})}}var l={components:{TinymceEditor:n.a},name:\"\",data:function(){return{currentPage:1,dialogFormVisible:!1,perpage:20,issue:{},replys:[],total:0,replyContent:\"\",subReplyContent:\"\",replyForm:{content:\"\",reply_id:0,reply_user_id:0}}},mounted:function(){this.fetchIssue()},methods:{fetchIssue:function(){var e=s(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,t=this,e.prev=4,e.next=7,Object(a.g)(t.$route.params.id,t.currentPage,t.perpage);case 7:r=e.sent,console.log(r),n=r.data,t.issue=n.issue,t.replys=n.replys,t.total=n.total,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case\"end\":return e.stop()}},e,this,[[4,15]])}));return function(){return e.apply(this,arguments)}}(),openDialog:function(){console.log(\"open\")},closeDialog:function(){this.subReplyContent=\"\"},cancel:function(){this.dialogFormVisible=!1},goLogin:function(){o.a.$emit(\"goLogin\")},calcSubReply:function(e){return e.reply_user_nick?\"回复\".concat(e.reply_user_nick,\": \").concat(e.content):e.content},reply:function(){var e=s(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),(r=this).replyForm.content=1==t?r.replyContent:r.subReplyContent,\"\"!=r.replyForm.content){e.next=6;break}return this.$message({message:\"内容不能为空\",type:\"error\"}),e.abrupt(\"return\");case 6:return e.prev=6,1==t&&(console.log(\"way1\"),r.replyForm.reply_id=0,r.replyForm.reply_user_id=0),e.next=10,Object(i.g)(r.issue.id,r.replyForm);case 10:a=e.sent,r.$message({message:a.data.message,type:\"success\"}),r.replyForm.content=\"\",r.replyContent=\"\",r.dialogFormVisible=!1,r.fetchIssue(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.$message({message:e.t0.response.data.message,type:\"error\"});case 21:case\"end\":return e.stop()}},e,this,[[6,18]])}));return function(t){return e.apply(this,arguments)}}(),handleReplyToReply:function(e){console.log(e),this.dialogFormVisible=!0,this.replyForm.reply_id=e.id,this.replyForm.reply_user_id=e.user.id}}},p=(r(629),r(2)),u=Object(p.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"content\"},[r(\"title\",[e._v(e._s(e.issue.title+\" - AHPUOJ\"))]),r(\"div\",{staticClass:\"content__main\"},[r(\"div\",{staticClass:\"replys__wrapper\"},[r(\"div\",{staticClass:\"link fr\"},[r(\"span\",[e._v(\"板块 \")]),0==e.issue.problem.id?r(\"router-link\",{attrs:{to:{name:\"issueList\"}}},[e._v(e._s(\"总板\"))]):r(\"router-link\",{attrs:{to:{name:\"problemIssueList\",params:{id:e.issue.problem.id}}}},[e._v(e._s(\"问题P \"+e.issue.problem.title))])],1),r(\"h1\",{staticClass:\"content__panel__title\"},[e._v(e._s(e.issue.title))]),e._l(e.replys,function(t,a){return[r(\"div\",{staticClass:\"reply__box\"},[r(\"div\",{staticClass:\"reply__userinfo__wrapper\"},[r(\"ul\",[r(\"li\",{staticClass:\"reply__user__avatar\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[r(\"img\",{attrs:{src:e.imgUrl(t.user.avatar)}})])],1),r(\"li\",{staticClass:\"reply__user__name ell\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[e._v(e._s(t.user.nick))])],1)])]),r(\"div\",{staticClass:\"reply__content\"},[r(\"div\",{domProps:{innerHTML:e._s(t.content)}}),r(\"div\",{staticClass:\"reply__addon clearfix\"},[r(\"p\",{staticClass:\"fr\"},[r(\"span\",[e._v(\" \"+e._s(t.updated_at)+\" \")]),r(\"span\",[e._v(e._s(t.reply_count)+\"个回复\")])]),r(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:function(r){return e.handleReplyToReply(t)}}},[e._v(\"回复\")])],1)]),r(\"div\",{staticClass:\"subreplys__wrapper mt10\"},[e._l(t.sub_replys,function(a,n){return[r(\"div\",{staticClass:\"subreply__box\"},[r(\"div\",{staticClass:\"subreply__userinfo__wrapper\"},[r(\"ul\",[r(\"li\",{staticClass:\"reply__user__avatar\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:a.user.id}}}},[r(\"img\",{attrs:{src:e.imgUrl(a.user.avatar)}})])],1),r(\"li\",{staticClass:\"reply__user__name ell\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:a.user.id}}}},[e._v(e._s(a.user.nick)+\"                  \")])],1)])]),r(\"div\",{staticClass:\"subreply__content\"},[r(\"div\",{domProps:{innerHTML:e._s(e.calcSubReply(a))}}),r(\"div\",{staticClass:\"reply__addon clearfix\"},[r(\"p\",{staticClass:\"fr\"},[r(\"span\",[e._v(\" \"+e._s(t.updated_at)+\" \")]),r(\"span\",[e._v(e._s(t.reply_count)+\"个回复\")])])])])])]})],2)])]}),r(\"el-pagination\",{staticClass:\"tal mt10 mb10\",staticStyle:{background:\"#fff\"},attrs:{\"current-page\":e.currentPage,background:\"\",\"page-size\":e.perpage,layout:\"prev, pager, next,jumper\",total:e.total},on:{\"current-change\":e.fetchIssue,\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t}}}),r(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"发表新回复\")]),r(\"div\",{staticClass:\"post__box__wrapper\"},[e.$store.getters.username?r(\"div\",{staticClass:\"post__box\"},[r(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:\"replyContent\"}}),r(\"el-button\",{staticClass:\"mt10\",attrs:{type:\"primary\"},on:{click:function(t){return e.reply(1)}}},[e._v(\"发表\")])],1):r(\"a\",{on:{click:e.goLogin}},[e._v(\"请登陆后发表讨论\")])])],2)]),r(\"el-dialog\",{attrs:{title:\"回复内容\",visible:e.dialogFormVisible,width:\"800px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.dialogFormVisible=t},closed:e.closeDialog,opened:e.openDialog}},[r(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.subReplyContent,callback:function(t){e.subReplyContent=t},expression:\"subReplyContent\"}}),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:e.cancel}},[e._v(\"取消\")]),r(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:function(t){return e.reply(2)}}},[e._v(\"确定\")])],1)],1)],1)},[],!1,null,\"75e0098c\",null);t.default=u.exports},78:function(e,t,r){\"use strict\";r(85);var a=r(175),n=r.n(a),o=r(176),i=(r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(50)),c=r(66),s=r.n(c),l={name:\"tinymce-editor\",components:{Editor:o.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data:function(){return{init:{relative_urls:!0,document_base_url:i.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:function(e,t,r){var a;(a=new FormData).append(\"file\",e.blob(),e.filename());s.a.post(\"/api/admin/image\",a,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(function(e){t(e.data.url)}).catch(function(e){})}},myValue:this.value}},mounted:function(){},methods:{onClick:function(e){this.$emit(\"onClick\",e,n.a)},clear:function(){this.myValue=\"\"}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit(\"input\",e)}}},p=r(2),u=Object(p.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"tinymce-editor\",style:{height:e.height+\"px\"}},[r(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:\"myValue\"}})],1)},[],!1,null,\"3ee0a8eb\",null);t.a=u.exports},87:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return a});var a=new(r(6).default)}}]);","extractedComments":[]}