{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{167:function(e,t,a){var r=a(440);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(8)(r,s);r.locals&&(e.exports=r.locals)},439:function(e,t,a){\"use strict\";var r=a(167);a.n(r).a},440:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,\".red[data-v-192e4388]{color:red}.green[data-v-192e4388]{color:green}.blue[data-v-192e4388]{color:blue}.black[data-v-192e4388]{color:#000}.white[data-v-192e4388]{color:#fff}.yellow[data-v-192e4388]{color:#ff0}.gold[data-v-192e4388]{color:gold}.purple[data-v-192e4388]{color:purple}.cyan[data-v-192e4388]{color:cyan}.orange[data-v-192e4388]{color:orange}.orangered[data-v-192e4388]{color:#ff4500}.pink[data-v-192e4388]{color:pink}.violet[data-v-192e4388]{color:violet}.yellowgreen[data-v-192e4388]{color:#9acd32}.tomato[data-v-192e4388]{color:tomato}.tan[data-v-192e4388]{color:tan}.snow[data-v-192e4388]{color:snow}.gray[data-v-192e4388]{color:gray}.silver[data-v-192e4388]{color:silver}.skyblue[data-v-192e4388]{color:skyblue}.navy[data-v-192e4388]{color:navy}.brown[data-v-192e4388]{color:brown}.beige[data-v-192e4388]{color:beige}.magenta[data-v-192e4388]{color:#f0f}.c0[data-v-192e4388]{color:#000}.c1[data-v-192e4388]{color:#111}.c2[data-v-192e4388]{color:#222}.c3[data-v-192e4388]{color:#333}.c4[data-v-192e4388]{color:#444}.c5[data-v-192e4388]{color:#555}.c6[data-v-192e4388]{color:#666}.c7[data-v-192e4388]{color:#777}.c8[data-v-192e4388]{color:#888}.c9[data-v-192e4388]{color:#999}.c10[data-v-192e4388]{color:#aaa}.c11[data-v-192e4388]{color:#bbb}.c12[data-v-192e4388]{color:#ccc}.c13[data-v-192e4388]{color:#ddd}.c14[data-v-192e4388]{color:#eee}.c15[data-v-192e4388]{color:#fff}.porange[data-v-192e4388]{color:#fc9}.pgold[data-v-192e4388]{color:#ffc}.pazure[data-v-192e4388]{color:#cff}.pdgreen[data-v-192e4388]{color:#9cc}.ppurple[data-v-192e4388]{color:#ccf}.pblue[data-v-192e4388]{color:#09c}.plblue[data-v-192e4388]{color:#9cf}.pdblue[data-v-192e4388]{color:#369}.pgreen[data-v-192e4388]{color:#9c3}.account-setting__wrapper[data-v-192e4388]{background:#fff}.account-setting__wrapper .account-setting__section[data-v-192e4388]{margin:0 0 0.2rem 0.1rem;text-align:left}.account-setting__wrapper .account-setting__section h2[data-v-192e4388]{color:#333;text-align:left;font-size:20px;line-height:30px;padding:10px 0}.account-setting__wrapper .account-setting__img-wrapper[data-v-192e4388]{position:relative}.account-setting__wrapper .account-setting__img-wrapper .account-setting__avatar[data-v-192e4388]{height:200px;width:200px;border-radius:150px;border:3px solid #fff}.account-setting__wrapper .account-setting__img-wrapper .img-mask[data-v-192e4388]{text-align:center;line-height:200px;font-size:20px;position:absolute;left:0;top:0;height:200px;width:200px;border:3px solid #fff;color:#fff;background:rgba(51,51,51,0.5);opacity:0;transition:all 0.3s;border-radius:150px}.account-setting__wrapper .account-setting__img-wrapper .img-mask[data-v-192e4388]:hover{opacity:0.8}\\n\",\"\"])},594:function(e,t,a){\"use strict\";a.r(t);var r=a(366),s=a(16),o={components:{\"avatar-upload\":r.a},data(){return{show:!1,headers:{Authorization:\"\"},resetNickForm:{nick:\"\"},resetNickFormRules:{nick:[{required:!0,message:\"请输入昵称\",trigger:\"blur\"},{type:\"string\",max:20,message:\"超出长度限制\",trigger:\"blur\"}]},resetPasswordForm:{oldpassword:\"\",password:\"\",confirmpassword:\"\"},resetPasswordRules:{oldpassword:[{required:!0,message:\"请输入原密码\",trigger:\"blur\"}],password:[{validator:(e,t,a)=>{\"\"===t?a(new Error(\"请输入密码\")):(\"\"!==this.resetPasswordForm.confirmpassword&&this.$refs.resetPasswordForm.validateField(\"confirmpassword\"),a())},trigger:\"blur\"},{min:6,message:\"密码不能少于6个字符\",trigger:\"blur\"},{max:20,message:\"密码不能超过20个字符\",trigger:\"blur\"}],confirmpassword:[{validator:(e,t,a)=>{\"\"===t?a(new Error(\"请再次输入密码\")):t!==this.resetPasswordForm.password?a(new Error(\"两次输入密码不一致!\")):a()},trigger:\"blur\"},{min:6,message:\"密码不能少于6个字符\",trigger:\"blur\"},{max:20,message:\"密码不能超过20个字符\",trigger:\"blur\"}]}}},mounted(){0==this.$store.getters.username.length&&this.$router.replace({name:\"404Page\"}),this.headers.Authorization=this.$store.getters.token,this.resetNickForm.nick=this.$store.getters.userNick},methods:{toggleShow(){this.show=!this.show},cropUploadSuccess(e,t){console.log(e),this.$store.dispatch(\"UpdateUserAvatar\",e.url),this.$message({message:\"更新头像成功\",type:\"success\"})},cropUploadFail(e,t){this.$message({message:\"更新头像失败\",type:\"success\"})},submitResetNick(){const e=this;e.$refs.resetNickForm.validate(async t=>{if(!t)return e.$message({message:\"昵称不符合要求\",type:\"error\"}),!1;try{let t=await Object(s.h)(e.resetNickForm);e.$message({message:t.data.message,type:\"success\"}),e.$store.dispatch(\"UpdateUserInfo\",t.data.user)}catch(t){console.log(t),e.$message({message:t.response.data.message,type:\"error\"})}})},submitResetPassword(){const e=this;e.$refs.resetPasswordForm.validate(async t=>{if(!t)return e.$message({message:\"请检查输入\",type:\"error\"}),!1;try{let t=await Object(s.i)(e.resetPasswordForm);e.$message({message:t.data.message,type:\"success\"}),e.$store.dispatch(\"UpdateUserInfo\",t.data.user)}catch(t){console.log(t),e.$message({message:t.response.data.message,type:\"error\"})}})}}},c=(a(439),a(2)),i=Object(c.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"account-setting__wrapper\"},[a(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"账号设置 \")]),a(\"div\",{staticClass:\"account-setting__section\"},[a(\"h2\",[e._v(\"昵称设置\")]),a(\"p\",[e._v(\"用户名 \"+e._s(e.$store.getters.username))]),a(\"el-form\",{ref:\"resetNickForm\",attrs:{inline:!0,model:e.resetNickForm,rules:e.resetNickFormRules},nativeOn:{submit:function(e){e.preventDefault()}}},[a(\"el-form-item\",{attrs:{label:\"昵称\",prop:\"nick\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入昵称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitResetNick(t)}},model:{value:e.resetNickForm.nick,callback:function(t){e.$set(e.resetNickForm,\"nick\",t)},expression:\"resetNickForm.nick\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitResetNick}},[e._v(\"保存\")])],1)],1)],1),a(\"div\",{staticClass:\"account-setting__section\"},[a(\"h2\",[e._v(\"头像设置\")]),a(\"div\",{staticClass:\"account-setting__img-wrapper\"},[a(\"img\",{staticClass:\"account-setting__avatar\",attrs:{src:e.imgUrl(e.$store.getters.userAvatar)}}),a(\"a\",{on:{click:function(t){return e.toggleShow()}}},[e._m(0)])])]),a(\"div\",{staticClass:\"account-setting__section\"},[a(\"h2\",[e._v(\"修改密码\"),a(\"el-form\",{ref:\"resetPasswordForm\",staticStyle:{width:\"400px\"},attrs:{model:e.resetPasswordForm,rules:e.resetPasswordRules}},[a(\"el-form-item\",{attrs:{prop:\"oldpassword\"}},[a(\"el-input\",{attrs:{type:\"password\",placeholder:\"请输入原密码\"},model:{value:e.resetPasswordForm.oldpassword,callback:function(t){e.$set(e.resetPasswordForm,\"oldpassword\",t)},expression:\"resetPasswordForm.oldpassword\"}})],1),a(\"el-form-item\",{attrs:{prop:\"password\"}},[a(\"el-input\",{attrs:{type:\"password\",placeholder:\"请输入新密码\"},model:{value:e.resetPasswordForm.password,callback:function(t){e.$set(e.resetPasswordForm,\"password\",t)},expression:\"resetPasswordForm.password\"}})],1),a(\"el-form-item\",{attrs:{prop:\"confirmpassword\"}},[a(\"el-input\",{attrs:{type:\"password\",placeholder:\"请确认新密码\"},model:{value:e.resetPasswordForm.confirmpassword,callback:function(t){e.$set(e.resetPasswordForm,\"confirmpassword\",t)},expression:\"resetPasswordForm.confirmpassword\"}})],1),a(\"el-form-item\",[a(\"el-button\",{staticStyle:{width:\"100%\"},attrs:{type:\"primary\"},on:{click:e.submitResetPassword}},[e._v(\"重设密码\")])],1)],1)],1)])])]),a(\"div\",{staticClass:\"avatar-upload__wrapper\"},[a(\"avatar-upload\",{attrs:{field:\"img\",method:\"PUT\",width:120,height:120,url:\"/api/user/avatar\",headers:e.headers,\"img-format\":\"jpg\"},on:{\"crop-upload-success\":e.cropUploadSuccess,\"crop-upload-fail\":e.cropUploadFail},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}})],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"img-mask\"},[t(\"p\",[this._v(\"更换头像\")])])}],!1,null,\"192e4388\",null);t.default=i.exports}}]);","extractedComments":[]}