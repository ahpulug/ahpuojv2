{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{17:function(t,e,a){\"use strict\";a.d(e,\"b\",function(){return n}),a.d(e,\"e\",function(){return o}),a.d(e,\"g\",function(){return r}),a.d(e,\"j\",function(){return l}),a.d(e,\"c\",function(){return s}),a.d(e,\"n\",function(){return d}),a.d(e,\"i\",function(){return c}),a.d(e,\"h\",function(){return m}),a.d(e,\"f\",function(){return u}),a.d(e,\"a\",function(){return b}),a.d(e,\"d\",function(){return f}),a.d(e,\"m\",function(){return p}),a.d(e,\"l\",function(){return g}),a.d(e,\"k\",function(){return D});var i=a(0);function n(t){return Object(i.a)(\"POST\",\"admin/problem\",t)}function o(t,e){return console.log(t,e),Object(i.a)(\"PUT\",`admin/problem/${t}`,e)}function r(t){return Object(i.a)(\"GET\",`admin/problem/${t}`)}function l(t,e,a){return Object(i.a)(\"GET\",\"admin/problems\",{page:t,perpage:e,param:a})}function s(t){return Object(i.a)(\"DELETE\",`admin/problem/${t}`)}function d(t){return Object(i.a)(\"PUT\",`admin/problem/${t}/status`)}function c(t){return Object(i.a)(\"GET\",`admin/problem/${t}/datas`)}function m(t,e){return Object(i.a)(\"GET\",`admin/problem/${t}/data/${e}`)}function u(t,e,a){return Object(i.a)(\"PUT\",`admin/problem/${t}/data/${e}`,a)}function b(t,e){return Object(i.a)(\"POST\",`admin/problem/${t}/data`,e)}function f(t,e){return Object(i.a)(\"DELETE\",`admin/problem/${t}/data/${e}`)}function p(t){return Object(i.a)(\"PUT\",`admin/solution/${t}/judgestatus`)}function g(t){return Object(i.a)(\"PUT\",`admin/problem/${t}/judgestatus`)}function D(t,e){return Object(i.a)(\"PUT\",`admin/problem/${t}/movement/${e}`)}},563:function(t,e,a){\"use strict\";a.r(e);var i=a(17),n={data:()=>({problem:{},dialogFormTitle:\"\",dialogFormVisible:!1,dialogType:\"\",currentRow:{},addDataForm:{filename:\"\"},editDataForm:{content:\"\"},addDataRules:{filename:[{required:!0,message:\"请输入数据名称\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}]},editDataRules:{content:[{required:!0,message:\"请输入数据内容\",trigger:\"blur\"}]},tableData:[]}),async mounted(){let t=this.$route.params.id;try{let e=await Object(i.g)(t);this.problem=e.data.problem,this.fetchProblemDataList()}catch(t){this.$router.replace({name:\"admin404Page\"}),console.log(t)}},methods:{async fetchProblemDataList(t){const e=this;try{let t=await Object(i.i)(e.problem.id);console.log(t),e.tableData=t.data.files}catch(t){console.log(t)}},openDialog(){\"addData\"==this.dialogType&&this.$notify({title:\"提示\",message:\"添加方法：输入数据名称点击确定，系统将生成对应的.in和.out文件，之后再编辑对应的数据文件。\",duration:6e3}),console.log(\"123\",this.$refs),this.$refs.addDataForm.clearValidate(),this.$refs.editDataForm.clearValidate()},closeDialog(){this.$refs.addDataForm.resetFields(),this.$refs.editDataForm.resetFields(),this.addDataForm.filename=\"\",this.editDataForm.content=\"\"},submit(){const t=this;let e=\"\";e=\"addData\"==t.dialogType?\"addDataForm\":\"editDataForm\",t.$refs[e].validate(async e=>{if(!e)return!1;try{let e;e=\"addData\"==t.dialogType?await Object(i.a)(t.problem.id,t.addDataForm):await Object(i.f)(t.problem.id,t.currentRow.filename,t.editDataForm),t.$message({message:e.data.message,type:\"success\"});for(let a in e.data.info)setTimeout(()=>{t.$notify({title:\"提示\",message:e.data.info[a],duration:6e3})},500*a);t.fetchProblemDataList()}catch(e){console.log(e),t.$message({message:e.response.data.message,type:\"error\"})}t.dialogFormVisible=!1})},cancel(){this.dialogFormVisible=!1},handleAddData(){this.dialogFormTitle=\"添加数据\",this.dialogType=\"addData\",this.dialogFormVisible=!0},async handleEditData(t){this.dialogFormTitle=\"编辑数据文件\"+t.filename,this.dialogType=\"editData\",this.currentRow=t;let e=await Object(i.h)(this.problem.id,t.filename);this.editDataForm.content=e.data.content,this.dialogFormVisible=!0},async deleteProblemData(t){const e=this;try{await e.$confirm(`确认要删除数据文件${t.filename}吗?`,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});try{let a=await Object(i.d)(e.problem.id,t.filename);e.$message({type:\"success\",message:a.data.message}),e.fetchProblemDataList()}catch(t){e.$message({type:\"error\",message:t.response.data.message})}}catch(t){e.$message({type:\"info\",message:\"已取消删除\"})}}}},o=a(2),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"admin-content\"},[a(\"div\",{staticClass:\"content__breadcrumb\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[t._v(\"首页\")]),a(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"content__card__wrapper\"},[a(\"el-card\",[a(\"span\",[t._v(\"问题名称:\"+t._s(t.problem.title))])])],1),a(\"div\",{staticClass:\"content__button__wrapper\"},[a(\"el-button\",{attrs:{type:\"success\"},on:{click:t.handleAddData}},[t._v(\"添加数据\")])],1),a(\"el-table\",{staticStyle:{width:\"100%\",\"margin-bottom\":\"30px\"},attrs:{data:t.tableData}},[a(\"el-table-column\",{attrs:{label:\"文件名\",prop:\"filename\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"文件大小(字节)\",prop:\"size\",width:\"180\"}}),a(\"el-table-column\",{attrs:{label:\"修改时间\",prop:\"mod_time\",\"min-width\":\"180\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return t.handleEditData(e.row)}}},[t._v(\"编辑\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return t.deleteProblemData(e.row)}}},[t._v(\"删除\")])]}}])})],1)],1),a(\"el-dialog\",{attrs:{title:t.dialogFormTitle,visible:t.dialogFormVisible,width:\"600px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogFormVisible=e},closed:t.closeDialog,opened:t.openDialog}},[a(\"el-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"addData\"==t.dialogType,expression:\"dialogType == 'addData'\"}],ref:\"addDataForm\",attrs:{model:t.addDataForm,rules:t.addDataRules},nativeOn:{submit:function(t){t.preventDefault()}}},[a(\"el-form-item\",{attrs:{abel:\"数据名称\",prop:\"filename\"}},[a(\"el-input\",{attrs:{autocomplete:\"off\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.submit(e)}},model:{value:t.addDataForm.filename,callback:function(e){t.$set(t.addDataForm,\"filename\",e)},expression:\"addDataForm.filename\"}})],1)],1),a(\"el-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"editData\"==t.dialogType,expression:\"dialogType == 'editData'\"}],ref:\"editDataForm\",attrs:{model:t.editDataForm,rules:t.editDataRules},nativeOn:{submit:function(t){t.preventDefault()}}},[a(\"el-form-item\",{attrs:{label:\"数据内容\",prop:\"content\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:20,autocomplete:\"off\",resize:\"none\"},model:{value:t.editDataForm.content,callback:function(e){t.$set(t.editDataForm,\"content\",e)},expression:\"editDataForm.content\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:t.cancel}},[t._v(\"取消\")]),a(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:t.submit}},[t._v(\"确定\")])],1)],1)],1)},[],!1,null,\"6314cb87\",null);e.default=r.exports}}]);","extractedComments":[]}