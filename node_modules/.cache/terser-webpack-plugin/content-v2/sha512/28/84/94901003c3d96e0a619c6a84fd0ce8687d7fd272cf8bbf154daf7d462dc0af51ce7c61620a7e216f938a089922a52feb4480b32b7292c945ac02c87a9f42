{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{157:function(e,t,r){var a=r(417);\"string\"==typeof a&&(a=[[e.i,a,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(8)(a,o);a.locals&&(e.exports=a.locals)},416:function(e,t,r){\"use strict\";var a=r(157);r.n(a).a},417:function(e,t,r){(e.exports=r(7)(!1)).push([e.i,\".red[data-v-75e0098c]{color:red}.green[data-v-75e0098c]{color:green}.blue[data-v-75e0098c]{color:blue}.black[data-v-75e0098c]{color:#000}.white[data-v-75e0098c]{color:#fff}.yellow[data-v-75e0098c]{color:#ff0}.gold[data-v-75e0098c]{color:gold}.purple[data-v-75e0098c]{color:purple}.cyan[data-v-75e0098c]{color:cyan}.orange[data-v-75e0098c]{color:orange}.orangered[data-v-75e0098c]{color:#ff4500}.pink[data-v-75e0098c]{color:pink}.violet[data-v-75e0098c]{color:violet}.yellowgreen[data-v-75e0098c]{color:#9acd32}.tomato[data-v-75e0098c]{color:tomato}.tan[data-v-75e0098c]{color:tan}.snow[data-v-75e0098c]{color:snow}.gray[data-v-75e0098c]{color:gray}.silver[data-v-75e0098c]{color:silver}.skyblue[data-v-75e0098c]{color:skyblue}.navy[data-v-75e0098c]{color:navy}.brown[data-v-75e0098c]{color:brown}.beige[data-v-75e0098c]{color:beige}.magenta[data-v-75e0098c]{color:#f0f}.c0[data-v-75e0098c]{color:#000}.c1[data-v-75e0098c]{color:#111}.c2[data-v-75e0098c]{color:#222}.c3[data-v-75e0098c]{color:#333}.c4[data-v-75e0098c]{color:#444}.c5[data-v-75e0098c]{color:#555}.c6[data-v-75e0098c]{color:#666}.c7[data-v-75e0098c]{color:#777}.c8[data-v-75e0098c]{color:#888}.c9[data-v-75e0098c]{color:#999}.c10[data-v-75e0098c]{color:#aaa}.c11[data-v-75e0098c]{color:#bbb}.c12[data-v-75e0098c]{color:#ccc}.c13[data-v-75e0098c]{color:#ddd}.c14[data-v-75e0098c]{color:#eee}.c15[data-v-75e0098c]{color:#fff}.porange[data-v-75e0098c]{color:#fc9}.pgold[data-v-75e0098c]{color:#ffc}.pazure[data-v-75e0098c]{color:#cff}.pdgreen[data-v-75e0098c]{color:#9cc}.ppurple[data-v-75e0098c]{color:#ccf}.pblue[data-v-75e0098c]{color:#09c}.plblue[data-v-75e0098c]{color:#9cf}.pdblue[data-v-75e0098c]{color:#369}.pgreen[data-v-75e0098c]{color:#9c3}.replys__wrapper .link[data-v-75e0098c]{font-size:0.24rem;line-height:0.5rem;padding-right:0.2rem}.replys__wrapper h1.content__panel__title[data-v-75e0098c]{background:#fff}.replys__wrapper .reply__box[data-v-75e0098c]{background:#fff;position:relative;margin-top:0.2rem;padding:0.2rem;border:1px solid #ddd}.replys__wrapper .reply__box .reply__userinfo__wrapper[data-v-75e0098c]{text-align:center;float:left;width:100px}.replys__wrapper .reply__box .reply__userinfo__wrapper img[data-v-75e0098c]{width:60px;height:60px;border-radius:30px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.replys__wrapper .reply__box[data-v-75e0098c]:last-child{border-bottom:1px solid #ddd}.replys__wrapper .reply__box .reply__content[data-v-75e0098c]{position:relative;box-sizing:border-box;padding:0.1rem 0.2rem 0.2rem 0.1rem;margin-left:100px;min-height:100px;text-align:left;font-size:20px}.replys__wrapper .reply__box .reply__addon[data-v-75e0098c]{font-size:16px;position:absolute;width:100%;left:0px;bottom:0px}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box[data-v-75e0098c]{padding:0.1rem;margin-left:100px;border:1px solid #ddd}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper[data-v-75e0098c]{text-align:center;padding-top:20px;float:left;width:100px}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper img[data-v-75e0098c]{width:40px;height:40px;border-radius:20px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__content[data-v-75e0098c]{position:relative;box-sizing:border-box;padding:0.15rem;margin-left:100px;min-height:100px;text-align:left;font-size:20px}.replys__wrapper .post__box__wrapper[data-v-75e0098c]{min-height:100px;text-align:left;background:#fff;padding:1rem}\\n\",\"\"])},42:function(e,t,r){\"use strict\";var a=r(101),o=r.n(a),n=r(102),l=(r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(26)),s=r(37),i=r.n(s),c={name:\"tinymce-editor\",components:{Editor:n.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data(){return{init:{relative_urls:!0,document_base_url:l.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:(e,t,r)=>{let a;(a=new FormData).append(\"file\",e.blob(),e.filename());i.a.post(\"/api/admin/image\",a,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(e=>{t(e.data.url)}).catch(e=>{})}},myValue:this.value}},mounted(){},methods:{onClick(e){this.$emit(\"onClick\",e,o.a)},clear(){this.myValue=\"\"}},watch:{value(e){this.myValue=e},myValue(e){this.$emit(\"input\",e)}}},p=r(2),u=Object(p.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"tinymce-editor\",style:{height:e.height+\"px\"}},[r(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:\"myValue\"}})],1)},[],!1,null,\"3ee0a8eb\",null);t.a=u.exports},47:function(e,t,r){\"use strict\";r.d(t,\"a\",function(){return a});const a=new(r(5).default)},585:function(e,t,r){\"use strict\";r.r(t);var a=r(6),o=r(42),n=r(47),l=r(16),s={components:{TinymceEditor:o.a},name:\"\",data:()=>({currentPage:1,dialogFormVisible:!1,perpage:20,issue:{},replys:[],total:0,replyContent:\"\",subReplyContent:\"\",replyForm:{content:\"\",reply_id:0,reply_user_id:0}}),mounted(){this.fetchIssue()},methods:{async fetchIssue(){window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0;const e=this;try{let t=await Object(a.g)(e.$route.params.id,e.currentPage,e.perpage);console.log(t);let r=t.data;e.issue=r.issue,e.replys=r.replys,e.total=r.total}catch(e){console.log(e)}},openDialog(){console.log(\"open\")},closeDialog(){this.subReplyContent=\"\"},cancel(){this.dialogFormVisible=!1},goLogin(){n.a.$emit(\"goLogin\")},calcSubReply:e=>e.reply_user_nick?`回复${e.reply_user_nick}: ${e.content}`:e.content,async reply(e){console.log(e);const t=this;if(t.replyForm.content=1==e?t.replyContent:t.subReplyContent,\"\"!=t.replyForm.content)try{let r;1==e&&(console.log(\"way1\"),t.replyForm.reply_id=0,t.replyForm.reply_user_id=0),r=await Object(l.g)(t.issue.id,t.replyForm),t.$message({message:r.data.message,type:\"success\"}),t.replyForm.content=\"\",t.replyContent=\"\",t.dialogFormVisible=!1,t.fetchIssue()}catch(e){t.$message({message:e.response.data.message,type:\"error\"})}else this.$message({message:\"内容不能为空\",type:\"error\"})},handleReplyToReply(e){console.log(e),this.dialogFormVisible=!0,this.replyForm.reply_id=e.id,this.replyForm.reply_user_id=e.user.id}}},i=(r(416),r(2)),c=Object(i.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"content\"},[r(\"title\",[e._v(e._s(e.issue.title+\" - AHPUOJ\"))]),r(\"div\",{staticClass:\"content__main\"},[r(\"div\",{staticClass:\"replys__wrapper\"},[r(\"div\",{staticClass:\"link fr\"},[r(\"span\",[e._v(\"板块 \")]),0==e.issue.problem.id?r(\"router-link\",{attrs:{to:{name:\"issueList\"}}},[e._v(e._s(\"总板\"))]):r(\"router-link\",{attrs:{to:{name:\"problemIssueList\",params:{id:e.issue.problem.id}}}},[e._v(e._s(\"问题P \"+e.issue.problem.title))])],1),r(\"h1\",{staticClass:\"content__panel__title\"},[e._v(e._s(e.issue.title))]),e._l(e.replys,function(t,a){return[r(\"div\",{staticClass:\"reply__box\"},[r(\"div\",{staticClass:\"reply__userinfo__wrapper\"},[r(\"ul\",[r(\"li\",{staticClass:\"reply__user__avatar\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[r(\"img\",{attrs:{src:e.imgUrl(t.user.avatar)}})])],1),r(\"li\",{staticClass:\"reply__user__name ell\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[e._v(e._s(t.user.nick))])],1)])]),r(\"div\",{staticClass:\"reply__content\"},[r(\"div\",{domProps:{innerHTML:e._s(t.content)}}),r(\"div\",{staticClass:\"reply__addon clearfix\"},[r(\"p\",{staticClass:\"fr\"},[r(\"span\",[e._v(\" \"+e._s(t.updated_at)+\" \")]),r(\"span\",[e._v(e._s(t.reply_count)+\"个回复\")])]),r(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:function(r){return e.handleReplyToReply(t)}}},[e._v(\"回复\")])],1)]),r(\"div\",{staticClass:\"subreplys__wrapper mt10\"},[e._l(t.sub_replys,function(a,o){return[r(\"div\",{staticClass:\"subreply__box\"},[r(\"div\",{staticClass:\"subreply__userinfo__wrapper\"},[r(\"ul\",[r(\"li\",{staticClass:\"reply__user__avatar\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:a.user.id}}}},[r(\"img\",{attrs:{src:e.imgUrl(a.user.avatar)}})])],1),r(\"li\",{staticClass:\"reply__user__name ell\"},[r(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:a.user.id}}}},[e._v(e._s(a.user.nick)+\"                  \")])],1)])]),r(\"div\",{staticClass:\"subreply__content\"},[r(\"div\",{domProps:{innerHTML:e._s(e.calcSubReply(a))}}),r(\"div\",{staticClass:\"reply__addon clearfix\"},[r(\"p\",{staticClass:\"fr\"},[r(\"span\",[e._v(\" \"+e._s(t.updated_at)+\" \")]),r(\"span\",[e._v(e._s(t.reply_count)+\"个回复\")])])])])])]})],2)])]}),r(\"el-pagination\",{staticClass:\"tal mt10 mb10\",staticStyle:{background:\"#fff\"},attrs:{\"current-page\":e.currentPage,background:\"\",\"page-size\":e.perpage,layout:\"prev, pager, next,jumper\",total:e.total},on:{\"current-change\":e.fetchIssue,\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t}}}),r(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"发表新回复\")]),r(\"div\",{staticClass:\"post__box__wrapper\"},[e.$store.getters.username?r(\"div\",{staticClass:\"post__box\"},[r(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:\"replyContent\"}}),r(\"el-button\",{staticClass:\"mt10\",attrs:{type:\"primary\"},on:{click:function(t){return e.reply(1)}}},[e._v(\"发表\")])],1):r(\"a\",{on:{click:e.goLogin}},[e._v(\"请登陆后发表讨论\")])])],2)]),r(\"el-dialog\",{attrs:{title:\"回复内容\",visible:e.dialogFormVisible,width:\"800px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.dialogFormVisible=t},closed:e.closeDialog,opened:e.openDialog}},[r(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.subReplyContent,callback:function(t){e.subReplyContent=t},expression:\"subReplyContent\"}}),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:e.cancel}},[e._v(\"取消\")]),r(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:function(t){return e.reply(2)}}},[e._v(\"确定\")])],1)],1)],1)},[],!1,null,\"75e0098c\",null);t.default=c.exports},6:function(e,t,r){\"use strict\";r.d(t,\"i\",function(){return o}),r.d(t,\"m\",function(){return n}),r.d(t,\"j\",function(){return l}),r.d(t,\"h\",function(){return s}),r.d(t,\"g\",function(){return i}),r.d(t,\"k\",function(){return c}),r.d(t,\"l\",function(){return p}),r.d(t,\"n\",function(){return u}),r.d(t,\"o\",function(){return d}),r.d(t,\"c\",function(){return _}),r.d(t,\"b\",function(){return g}),r.d(t,\"e\",function(){return m}),r.d(t,\"f\",function(){return y}),r.d(t,\"d\",function(){return b}),r.d(t,\"a\",function(){return f});var a=r(0);function o(){return Object(a.a)(\"GET\",\"languages\")}function n(e,t){return Object(a.a)(\"GET\",\"ranklist\",{page:e,perpage:t})}function l(e,t){return Object(a.a)(\"GET\",\"news\",{page:e,perpage:t})}function s(e,t,r){return Object(a.a)(\"GET\",`problem/${e}/issues`,{page:t,perpage:r})}function i(e,t,r){return Object(a.a)(\"GET\",`/issue/${e}`,{page:t,perpage:r})}function c(e){return Object(a.a)(\"GET\",`problem/${e}`)}function p(e,t,r,o,n){return Object(a.a)(\"GET\",\"problems\",{page:e,perpage:t,param:r,level:o,tag_id:n})}function u(e){return Object(a.a)(\"GET\",`solution/${e}`)}function d(e,t,r,o,n,l,s){return Object(a.a)(\"GET\",\"solutions\",{page:e,perpage:t,param:r,username:o,language:n,result:l,contest_id:s})}function _(e,t,r){return Object(a.a)(\"GET\",\"contests\",{page:e,perpage:t,param:r})}function g(e){return Object(a.a)(\"GET\",`contest/${e}`)}function m(e){return Object(a.a)(\"GET\",`contest/${e}/ranklist`)}function y(e){return Object(a.a)(\"GET\",`contest/${e}/teamranklist`)}function b(e,t){return Object(a.a)(\"GET\",`contest/${e}/problem/${t}`)}function f(){return Object(a.a)(\"GET\",\"alltags\")}}}]);","extractedComments":[]}