{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{17:function(t,e,a){\"use strict\";a.d(e,\"b\",function(){return r}),a.d(e,\"e\",function(){return n}),a.d(e,\"g\",function(){return l}),a.d(e,\"j\",function(){return o}),a.d(e,\"c\",function(){return m}),a.d(e,\"n\",function(){return s}),a.d(e,\"i\",function(){return u}),a.d(e,\"h\",function(){return c}),a.d(e,\"f\",function(){return d}),a.d(e,\"a\",function(){return p}),a.d(e,\"d\",function(){return f}),a.d(e,\"m\",function(){return b}),a.d(e,\"l\",function(){return g}),a.d(e,\"k\",function(){return h});var i=a(0);function r(t){return Object(i.a)(\"POST\",\"admin/problem\",t)}function n(t,e){return console.log(t,e),Object(i.a)(\"PUT\",`admin/problem/${t}`,e)}function l(t){return Object(i.a)(\"GET\",`admin/problem/${t}`)}function o(t,e,a){return Object(i.a)(\"GET\",\"admin/problems\",{page:t,perpage:e,param:a})}function m(t){return Object(i.a)(\"DELETE\",`admin/problem/${t}`)}function s(t){return Object(i.a)(\"PUT\",`admin/problem/${t}/status`)}function u(t){return Object(i.a)(\"GET\",`admin/problem/${t}/datas`)}function c(t,e){return Object(i.a)(\"GET\",`admin/problem/${t}/data/${e}`)}function d(t,e,a){return Object(i.a)(\"PUT\",`admin/problem/${t}/data/${e}`,a)}function p(t,e){return Object(i.a)(\"POST\",`admin/problem/${t}/data`,e)}function f(t,e){return Object(i.a)(\"DELETE\",`admin/problem/${t}/data/${e}`)}function b(t){return Object(i.a)(\"PUT\",`admin/solution/${t}/judgestatus`)}function g(t){return Object(i.a)(\"PUT\",`admin/problem/${t}/judgestatus`)}function h(t,e){return Object(i.a)(\"PUT\",`admin/problem/${t}/movement/${e}`)}},368:function(t,e,a){\"use strict\";a.r(e);var i=a(42),r=a(17),n=a(83),l={components:{TinymceEditor:i.a},data:()=>({tags:[],form:{title:\"\",time_limit:1,memory_limit:128,description:\"\",input:\"\",output:\"\",sample_input:\"\",sample_output:\"\",hint:\"\",spj:0,level:1,tags:[]},rules:{title:[{required:!0,message:\"请输入问题名称\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}],time_limit:[{required:!0,message:\"请输入时间限制\",trigger:\"blur\"},{type:\"integer\",min:1,message:\"清输入大于零的整数\",trigger:\"blur\"}],memory_limit:[{required:!0,message:\"请输入时间限制\",trigger:\"blur\"},{type:\"integer\",min:1,message:\"清输入大于零的整数\",trigger:\"blur\"}]}}),async mounted(){this.init()},methods:{async init(){const t=this;let e=await Object(n.d)();if(t.tags=e.data.tags,\"adminEditProblem\"==t.$route.name)try{let e=t.$route.params.id,a=await Object(r.g)(e);Object.assign(t.form,a.data.problem),t.form.tags=[],a.data.problem.tags.forEach((e,a,i)=>{t.form.tags.push(e.id)})}catch(e){console.log(e),t.$router.replace({name:\"admin404Page\"})}else Object.assign(t.form,{title:\"\",time_limit:1,memory_limit:128,description:\"\",input:\"\",output:\"\",sample_input:\"\",sample_output:\"\",hint:\"\",spj:0,tags:[]})},async submit(){const t=this;t.$refs.form.validate(async e=>{if(!e)return t.$message({message:\"表单必填项不能为空\",type:\"error\"}),!1;try{let e;if(console.log(t.form),\"adminAddproblem\"==t.$route.name)e=await Object(r.b)(t.form);else{let a=t.$route.params.id;e=await Object(r.e)(a,t.form)}t.$message({message:e.data.message,type:\"success\"}),t.$router.push({name:\"adminProblemList\"})}catch(e){t.$message({message:e.response.data.message,type:\"error\"})}})}},watch:{$route(t,e){\"adminAddproblem\"!=t.name&&\"adminEditProblem\"!=t.name||this.init()}}},o=a(2),m=Object(o.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"admin-content\"},[a(\"div\",{staticClass:\"content__breadcrumb\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[t._v(\"首页\")]),a(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),a(\"div\",{staticClass:\"content__main\"},[a(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rules,\"label-width\":\"6em\"}},[a(\"el-form-item\",{attrs:{label:\"标题\",prop:\"title\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入标题\",autofocus:!0},model:{value:t.form.title,callback:function(e){t.$set(t.form,\"title\",e)},expression:\"form.title\"}})],1),a(\"el-form-item\",{attrs:{label:\"时间限制\",prop:\"time_limit\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入内容\"},model:{value:t.form.time_limit,callback:function(e){t.$set(t.form,\"time_limit\",t._n(e))},expression:\"form.time_limit\"}},[a(\"template\",{slot:\"append\"},[t._v(\"秒\")])],2)],1),a(\"el-form-item\",{attrs:{label:\"内存限制\",prop:\"memory_limit\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入内容\"},model:{value:t.form.memory_limit,callback:function(e){t.$set(t.form,\"memory_limit\",t._n(e))},expression:\"form.memory_limit\"}},[a(\"template\",{slot:\"append\"},[t._v(\"兆字节\")])],2)],1),a(\"el-form-item\",{attrs:{label:\"题目描述\"}},[a(\"tinymce-editor\",{attrs:{height:300},model:{value:t.form.description,callback:function(e){t.$set(t.form,\"description\",e)},expression:\"form.description\"}})],1),a(\"el-form-item\",{attrs:{label:\"输入\"}},[a(\"tinymce-editor\",{attrs:{height:300},model:{value:t.form.input,callback:function(e){t.$set(t.form,\"input\",e)},expression:\"form.input\"}})],1),a(\"el-form-item\",{attrs:{label:\"输出\"}},[a(\"tinymce-editor\",{attrs:{height:300},model:{value:t.form.output,callback:function(e){t.$set(t.form,\"output\",e)},expression:\"form.output\"}})],1),a(\"el-form-item\",{attrs:{label:\"样例输入\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:10,resize:\"none\"},model:{value:t.form.sample_input,callback:function(e){t.$set(t.form,\"sample_input\",e)},expression:\"form.sample_input\"}})],1),a(\"el-form-item\",{attrs:{label:\"样例输出\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:10,resize:\"none\"},model:{value:t.form.sample_output,callback:function(e){t.$set(t.form,\"sample_output\",e)},expression:\"form.sample_output\"}})],1),a(\"el-form-item\",{attrs:{label:\"提示\"}},[a(\"tinymce-editor\",{attrs:{height:300},model:{value:t.form.hint,callback:function(e){t.$set(t.form,\"hint\",e)},expression:\"form.hint\"}})],1),a(\"el-form-item\",{attrs:{label:\"难度\"}},[a(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{\"default-first-option\":\"\",placeholder:\"请选择题目难度\"},model:{value:t.form.level,callback:function(e){t.$set(t.form,\"level\",e)},expression:\"form.level\"}},[a(\"el-option\",{attrs:{label:\"简单\",value:0}}),a(\"el-option\",{attrs:{label:\"中等\",value:1}}),a(\"el-option\",{attrs:{label:\"困难\",value:2}})],1)],1),a(\"el-form-item\",{attrs:{label:\"标签\"}},[a(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{multiple:\"\",filterable:\"\",\"allow-create\":\"\",\"default-first-option\":\"\",placeholder:\"请选择题目标签\"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,\"tags\",e)},expression:\"form.tags\"}},t._l(t.tags,function(t){return a(\"el-option\",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a(\"el-form-item\",{staticClass:\"fl\"},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.submit}},[t._v(\"提交\")])],1)],1)],1)])},[],!1,null,\"12ff4beb\",null);e.default=m.exports},42:function(t,e,a){\"use strict\";var i=a(101),r=a.n(i),n=a(102),l=(a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(26)),o=a(37),m=a.n(o),s={name:\"tinymce-editor\",components:{Editor:n.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data(){return{init:{relative_urls:!0,document_base_url:l.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:(t,e,a)=>{let i;(i=new FormData).append(\"file\",t.blob(),t.filename());m.a.post(\"/api/admin/image\",i,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(t=>{e(t.data.url)}).catch(t=>{})}},myValue:this.value}},mounted(){},methods:{onClick(t){this.$emit(\"onClick\",t,r.a)},clear(){this.myValue=\"\"}},watch:{value(t){this.myValue=t},myValue(t){this.$emit(\"input\",t)}}},u=a(2),c=Object(u.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"tinymce-editor\",style:{height:t.height+\"px\"}},[a(\"editor\",{attrs:{init:t.init,disabled:t.disabled},on:{onClick:t.onClick},model:{value:t.myValue,callback:function(e){t.myValue=e},expression:\"myValue\"}})],1)},[],!1,null,\"3ee0a8eb\",null);e.a=c.exports},83:function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return r}),a.d(e,\"c\",function(){return n}),a.d(e,\"e\",function(){return l}),a.d(e,\"d\",function(){return o}),a.d(e,\"b\",function(){return m});var i=a(0);function r(t){return Object(i.a)(\"POST\",\"admin/tag\",t)}function n(t,e){return Object(i.a)(\"PUT\",`admin/tag/${t}`,e)}function l(t,e,a){return Object(i.a)(\"GET\",\"admin/tags\",{page:t,perpage:e,param:a})}function o(){return Object(i.a)(\"GET\",\"admin/alltags\")}function m(t){return Object(i.a)(\"DELETE\",`admin/tag/${t}`)}}}]);","extractedComments":[]}