{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{123:function(t,e,n){\"use strict\";var r,a,c=n(135),o=RegExp.prototype.exec,i=String.prototype.replace,s=o,u=(r=/a/,a=/b*/g,o.call(r,\"a\"),o.call(a,\"a\"),0!==r.lastIndex||0!==a.lastIndex),l=void 0!==/()??/.exec(\"\")[1];(u||l)&&(s=function(t){var e,n,r,a,s=this;return l&&(n=new RegExp(\"^\"+s.source+\"$(?!\\\\s)\",c.call(s))),u&&(e=s.lastIndex),r=o.call(s,t),u&&r&&(s.lastIndex=s.global?r.index+r[0].length:e),l&&r&&r.length>1&&i.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r}),t.exports=s},135:function(t,e,n){\"use strict\";var r=n(17);t.exports=function(){var t=r(this),e=\"\";return t.global&&(e+=\"g\"),t.ignoreCase&&(e+=\"i\"),t.multiline&&(e+=\"m\"),t.unicode&&(e+=\"u\"),t.sticky&&(e+=\"y\"),e}},186:function(t,e,n){var r=n(60),a=n(38);t.exports=function(t){return function(e,n){var c,o,i=String(a(e)),s=r(n),u=i.length;return s<0||s>=u?t?\"\":void 0:(c=i.charCodeAt(s))<55296||c>56319||s+1===u||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):c:t?i.slice(s,s+2):o-56320+(c-55296<<10)+65536}}},187:function(t,e,n){\"use strict\";var r=n(186)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},188:function(t,e,n){\"use strict\";var r=n(74),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if(\"function\"==typeof n){var c=n.call(t,e);if(\"object\"!=typeof c)throw new TypeError(\"RegExp exec method returned something other than an Object or null\");return c}if(\"RegExp\"!==r(t))throw new TypeError(\"RegExp#exec called on incompatible receiver\");return a.call(t,e)}},189:function(t,e,n){\"use strict\";n(240);var r=n(29),a=n(39),c=n(33),o=n(38),i=n(12),s=n(123),u=i(\"species\"),l=!c(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:\"7\"},t},\"7\"!==\"\".replace(t,\"$<a>\")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n=\"ab\".split(t);return 2===n.length&&\"a\"===n[0]&&\"b\"===n[1]}();t.exports=function(t,e,n){var f=i(t),p=!c(function(){var e={};return e[f]=function(){return 7},7!=\"\"[t](e)}),m=p?!c(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},\"split\"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](\"\"),!e}):void 0;if(!p||!m||\"replace\"===t&&!l||\"split\"===t&&!d){var g=/./[f],v=n(o,f,\"\"[t],function(t,e,n,r,a){return e.exec===s?p&&!a?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),h=v[0],b=v[1];r(String.prototype,t,h),a(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},19:function(t,e,n){\"use strict\";n.d(e,\"e\",function(){return a}),n.d(e,\"j\",function(){return c}),n.d(e,\"l\",function(){return o}),n.d(e,\"m\",function(){return i}),n.d(e,\"k\",function(){return s}),n.d(e,\"f\",function(){return u}),n.d(e,\"p\",function(){return l}),n.d(e,\"o\",function(){return d}),n.d(e,\"d\",function(){return f}),n.d(e,\"i\",function(){return p}),n.d(e,\"n\",function(){return m}),n.d(e,\"a\",function(){return g}),n.d(e,\"g\",function(){return v}),n.d(e,\"c\",function(){return h}),n.d(e,\"b\",function(){return b}),n.d(e,\"h\",function(){return x});var r=n(0);function a(t){return Object(r.a)(\"POST\",\"admin/contest\",t)}function c(t,e){return console.log(t,e),Object(r.a)(\"PUT\",\"admin/contest/\".concat(t),e)}function o(t){return Object(r.a)(\"GET\",\"admin/contest/\".concat(t))}function i(t,e,n){return Object(r.a)(\"GET\",\"admin/contests\",{page:t,perpage:e,param:n})}function s(){return Object(r.a)(\"GET\",\"admin/allcontests\")}function u(t){return Object(r.a)(\"DELETE\",\"admin/contest/\".concat(t))}function l(t){return Object(r.a)(\"PUT\",\"admin/contest/\".concat(t,\"/status\"))}function d(t,e,n,a){return Object(r.a)(\"GET\",\"admin/contest/\".concat(t,\"/users\"),{page:e,perpage:n,param:a})}function f(t,e){return Object(r.a)(\"POST\",\"admin/contest/\".concat(t,\"/users\"),e)}function p(t,e){return Object(r.a)(\"DELETE\",\"admin/contest/\".concat(t,\"/user/\").concat(e))}function m(t){return Object(r.a)(\"GET\",\"admin/contest/\".concat(t,\"/teams\"))}function g(t,e){return Object(r.a)(\"POST\",\"admin/contest/\".concat(t,\"/team/\").concat(e))}function v(t,e){return Object(r.a)(\"DELETE\",\"admin/contest/\".concat(t,\"/team/\").concat(e))}function h(t,e,n){return Object(r.a)(\"POST\",\"admin/contest/\".concat(t,\"/team/\").concat(e,\"/users\"),n)}function b(t,e){return Object(r.a)(\"POST\",\"admin/contest/\".concat(t,\"/team/\").concat(e,\"/allusers\"))}function x(t,e,n){return Object(r.a)(\"DELETE\",\"admin/contest/\".concat(t,\"/team/\").concat(e,\"/user/\").concat(n))}},23:function(t,e,n){\"use strict\";var r=n(17),a=n(124),c=n(70),o=n(60),i=n(187),s=n(188),u=Math.max,l=Math.min,d=Math.floor,f=/\\$([$&`']|\\d\\d?|<[^>]*>)/g,p=/\\$([$&`']|\\d\\d?)/g;n(189)(\"replace\",2,function(t,e,n,m){return[function(r,a){var c=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,c,a):n.call(String(c),r,a)},function(t,e){var a=m(n,t,this,e);if(a.done)return a.value;var d=r(t),f=String(this),p=\"function\"==typeof e;p||(e=String(e));var v=d.global;if(v){var h=d.unicode;d.lastIndex=0}for(var b=[];;){var x=s(d,f);if(null===x)break;if(b.push(x),!v)break;\"\"===String(x[0])&&(d.lastIndex=i(f,c(d.lastIndex),h))}for(var _,y=\"\",w=0,O=0;O<b.length;O++){x=b[O];for(var j=String(x[0]),E=u(l(o(x.index),f.length),0),S=[],k=1;k<x.length;k++)S.push(void 0===(_=x[k])?_:String(_));var T=x.groups;if(p){var P=[j].concat(S,E,f);void 0!==T&&P.push(T);var $=String(e.apply(void 0,P))}else $=g(j,f,E,S,T,e);E>=w&&(y+=f.slice(w,E)+$,w=E+j.length)}return y+f.slice(w)}];function g(t,e,r,c,o,i){var s=r+t.length,u=c.length,l=p;return void 0!==o&&(o=a(o),l=f),n.call(i,l,function(n,a){var i;switch(a.charAt(0)){case\"$\":return\"$\";case\"&\":return t;case\"`\":return e.slice(0,r);case\"'\":return e.slice(s);case\"<\":i=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return n;if(l>u){var f=d(l/10);return 0===f?n:f<=u?void 0===c[f-1]?a.charAt(1):c[f-1]+a.charAt(1):n}i=c[l-1]}return void 0===i?\"\":i})}})},240:function(t,e,n){\"use strict\";var r=n(123);n(45)({target:\"RegExp\",proto:!0,forced:r!==/./.exec},{exec:r})},676:function(t,e,n){\"use strict\";n.r(e);n(7),n(6),n(30),n(23),n(8);var r=n(72),a=n(19);function c(t,e,n,r,a,c,o){try{var i=t[c](o),s=i.value}catch(t){return void n(t)}i.done?e(s):Promise.resolve(s).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){c(o,r,a,i,s,\"next\",t)}function s(t){c(o,r,a,i,s,\"throw\",t)}i(void 0)})}}var i={data:function(){return{loading:!0,currentPage:1,currentRowId:0,perpage:10,queryParam:\"\",total:0,dialogFormVisible:!1,series:{},contests:[],form:{contest_id:null},rules:{contest_id:[{required:!0,message:\"请输入要添加的用户名列表\",trigger:\"change\"}]},tableData:[]}},mounted:function(){var t=o(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.id,t.prev=1,t.next=4,Object(r.e)(e);case 4:return n=t.sent,this.series=n.data.series,this.fetchSeriesContestList(),t.next=9,Object(a.k)();case 9:n=t.sent,this.contests=n.data.contests,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),this.$router.replace({name:\"admin404Page\"}),console.log(t.t0);case 17:case\"end\":return t.stop()}},t,this,[[1,13]])}));return function(){return t.apply(this,arguments)}}(),methods:{fetchSeriesContestList:function(){var t=o(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).loading=!0,t.prev=2,t.next=5,Object(r.f)(e.series.id,e.currentPage,e.perpage,e.queryParam);case 5:n=t.sent,console.log(n),a=n.data,setTimeout(function(){e.tableData=a.data,e.total=a.total,e.loading=!1},200),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0);case 14:case\"end\":return t.stop()}},t,this,[[2,11]])}));return function(){return t.apply(this,arguments)}}(),handleSizeChange:function(t){this.perpage=t,console.log(this.perpage),this.fetchSeriesContestList()},openDialog:function(){this.$notify({title:\"提示\",message:\"每一行对应一个竞赛&作业ID，若对应竞赛&作业存在则加入系列赛，否则将忽略。\",duration:6e3}),this.$refs.form.clearValidate()},closeDialog:function(){this.$refs.form.resetFields()},submit:function(){var t=this;t.$refs.form.validate(function(){var e=o(regeneratorRuntime.mark(function e(n){var a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=18;break}return e.prev=1,c=t.$route.params.id,e.next=5,Object(r.a)(c,t.form.contest_id);case 5:a=e.sent,console.log(a),t.$message({message:a.data.message,type:\"success\"}),t.fetchSeriesContestList(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.message,type:\"error\"});case 15:t.dialogFormVisible=!1,e.next=19;break;case 18:return e.abrupt(\"return\",!1);case 19:case\"end\":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}())},cancel:function(){this.dialogFormVisible=!1},handleAddUser:function(){this.dialogFormVisible=!0},handleDeleteSeriesContest:function(){var t=o(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.prev=1,t.next=4,n.$confirm(\"确认要删除系列赛中的竞赛&作业\".concat(e.name,\"吗?\"),\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});case 4:return t.prev=4,t.next=7,Object(r.c)(n.series.id,e.id);case 7:a=t.sent,n.$message({type:\"success\",message:a.data.message}),1==n.tableData.length&&n.currentPage>1&&n.currentPage--,n.fetchSeriesContestList(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),n.$message({type:\"error\",message:t.t0.response.data.message});case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),n.$message({type:\"info\",message:\"已取消删除\"});case 21:case\"end\":return t.stop()}},t,this,[[1,18],[4,13]])}));return function(e){return t.apply(this,arguments)}}()}},s=n(2),u=Object(s.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"admin-content\"},[n(\"div\",{staticClass:\"content__breadcrumb\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[t._v(\"首页\")]),n(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),n(\"div\",{staticClass:\"content__main\"},[n(\"div\",{staticClass:\"content__searchbar__wrapper\"},[n(\"el-card\",{staticClass:\"content__card__wrapper\"},[n(\"p\",[t._v(\"系列赛名称: \"+t._s(t.series.name))]),n(\"p\",[t._v(\"包含竞赛&作业总数: \"+t._s(t.tableData.length))])])],1),n(\"div\",{staticClass:\"content__button__wrapper\"},[n(\"el-button\",{attrs:{type:\"success\"},on:{click:t.handleAddUser}},[t._v(\"添加竞赛&作业\")])],1),n(\"div\",{staticClass:\"content__searchbar__wrapper\"},[n(\"el-input\",{staticStyle:{\"max-width\":\"20em\"},attrs:{placeholder:\"请输入竞赛&作业名称\",maxlength:\"20\",clearable:\"\"},model:{value:t.queryParam,callback:function(e){t.queryParam=e},expression:\"queryParam\"}}),n(\"el-button\",{attrs:{icon:\"el-icon-search\",type:\"primary\",plain:\"\"},on:{click:t.fetchSeriesContestList}})],1),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.tableData}},[n(\"el-table-column\",{attrs:{label:\"ID\",prop:\"id\",width:\"180\"}}),n(\"el-table-column\",{attrs:{label:\"名称\",prop:\"name\",width:\"180\"}}),n(\"el-table-column\",{attrs:{label:\"模式\",\"min-width\":\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",{class:[\"text-button\",0==e.row.private?\"text-button--danger\":\"text-button--success\"]},[t._v(t._s(0==e.row.private?\"私有赛\":\"公开赛\"))]),n(\"span\",{class:[\"text-button\",0==e.row.team_mode?\"text-button--success\":\"text-button--primary\"]},[t._v(t._s(0==e.row.team_mode?\"个人赛\":\"团体赛\"))])]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(n){return t.handleDeleteSeriesContest(e.row)}}},[t._v(\"删除\")])]}}])})],1),n(\"el-pagination\",{attrs:{\"current-page\":t.currentPage,\"page-sizes\":[10,20,30,40,50],\"page-size\":10,layout:\"total, sizes, prev, pager, next, jumper\",total:t.total},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.fetchSeriesContestList,\"update:currentPage\":function(e){t.currentPage=e},\"update:current-page\":function(e){t.currentPage=e}}}),n(\"el-dialog\",{attrs:{title:\"添加竞赛&作业\",visible:t.dialogFormVisible,width:\"400px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.dialogFormVisible=e},closed:t.closeDialog,opened:t.openDialog}},[n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[n(\"el-form-item\",{attrs:{label:\"选择竞赛&作业\",prop:\"contest_id\"}},[n(\"el-select\",{attrs:{filterable:\"\",placeholder:\"请选择\"},model:{value:t.form.contest_id,callback:function(e){t.$set(t.form,\"contest_id\",e)},expression:\"form.contest_id\"}},t._l(t.contests,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:t.cancel}},[t._v(\"取消\")]),n(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:t.submit}},[t._v(\"确定\")])],1)],1)],1)])},[],!1,null,\"233f8541\",null);e.default=u.exports},72:function(t,e,n){\"use strict\";n.d(e,\"b\",function(){return a}),n.d(e,\"d\",function(){return c}),n.d(e,\"e\",function(){return o}),n.d(e,\"g\",function(){return i}),n.d(e,\"f\",function(){return s}),n.d(e,\"h\",function(){return u}),n.d(e,\"a\",function(){return l}),n.d(e,\"c\",function(){return d});var r=n(0);function a(t){return Object(r.a)(\"POST\",\"admin/series\",t)}function c(t,e){return Object(r.a)(\"PUT\",\"admin/series/\".concat(t),e)}function o(t){return Object(r.a)(\"GET\",\"admin/series/\".concat(t))}function i(t,e,n){return Object(r.a)(\"GET\",\"admin/serieses\",{page:t,perpage:e,param:n})}function s(t,e,n,a){return Object(r.a)(\"GET\",\"admin/series/\".concat(t,\"/contests\"),{page:e,perpage:n,param:a})}function u(t){return Object(r.a)(\"PUT\",\"admin/series/\".concat(t,\"/status\"))}function l(t,e){return Object(r.a)(\"POST\",\"admin/series/\".concat(t,\"/contest/\").concat(e))}function d(t,e){return Object(r.a)(\"DELETE\",\"admin/series/\".concat(t,\"/contest/\").concat(e))}}}]);","extractedComments":[]}