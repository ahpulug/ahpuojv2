{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{131:function(t,e,n){\"use strict\";var i=n(32);n.n(i).a},132:function(t,e,n){(t.exports=n(65)(!1)).push([t.i,\"\\n.tinymce-editor[data-v-1b192a42] {\\n  background: c15;\\n}\\n\",\"\"])},14:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return a}),n.d(e,\"c\",function(){return o}),n.d(e,\"d\",function(){return r}),n.d(e,\"e\",function(){return s}),n.d(e,\"b\",function(){return l});var i=n(6);function a(t){return Object(i.a)(\"POST\",\"admin/new\",t)}function o(t,e){return console.log(t,e),Object(i.a)(\"PUT\",`admin/new/${t}`,e)}function r(t){return Object(i.a)(\"GET\",`admin/new/${t}`)}function s(t){return Object(i.a)(\"GET\",\"admin/news\",{page:t})}function l(t){return Object(i.a)(\"DELETE\",`admin/new/${t}`)}},32:function(t,e,n){var i=n(132);\"string\"==typeof i&&(i=[[t.i,i,\"\"]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(24)(i,a);i.locals&&(t.exports=i.locals)},66:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"content\"},[n(\"div\",{staticClass:\"contemt__breadcrumb\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",{attrs:{to:{name:\"index\"}}},[t._v(\"首页\")]),t._v(\" \"),n(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"content__main\"},[n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rules,\"label-width\":\"75px\"}},[n(\"el-form-item\",{attrs:{label:\"标题\",prop:\"title\"}},[n(\"el-input\",{model:{value:t.form.title,callback:function(e){t.$set(t.form,\"title\",e)},expression:\"form.title\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"内容\"}},[n(\"tinymce-editor\",{model:{value:t.form.content,callback:function(e){t.$set(t.form,\"content\",e)},expression:\"form.content\"}})],1),t._v(\" \"),n(\"el-form-item\",{staticClass:\"fl\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.submit}},[t._v(\"提交\")])],1)],1)],1)])};i._withStripped=!0;var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"tinymce-editor\"},[n(\"editor\",{attrs:{init:t.init,disabled:t.disabled},on:{onClick:t.onClick},model:{value:t.myValue,callback:function(e){t.myValue=e},expression:\"myValue\"}})],1)};a._withStripped=!0;var o=n(64),r=n.n(o),s=n(67),l=(n(113),n(114),n(115),n(117),n(119),n(121),n(123),n(125),n(127),n(129),n(23)),c=n.n(l),u={name:\"tinymce-editor\",components:{Editor:s.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table textcolor wordcount contextmenu\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat\"}},data(){return{init:{language_url:\"/web/static/tinymce/langs/zh_CN.js\",skin_url:\"/web/static/tinymce/skins/ui/oxide\",content_css:\"/web/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:600,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,images_upload_handler:(t,e,n)=>{let i;(i=new FormData).append(\"file\",t.blob(),t.filename());c.a.post(\"/api/admin/image\",i,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(t=>{e(t.data.url)}).catch(t=>{})}},myValue:this.value}},mounted(){r.a.init({})},methods:{onClick(t){this.$emit(\"onClick\",t,r.a)},clear(){this.myValue=\"\"}},watch:{value(t){this.myValue=t},myValue(t){this.$emit(\"input\",t)}}},m=(n(131),n(2)),d=Object(m.a)(u,a,[],!1,null,\"1b192a42\",null);d.options.__file=\"web/js/common/utils/tinymce_editor.vue\";var f=d.exports,b=n(14),p={components:{TinymceEditor:f},data:()=>({form:{title:\"\",content:\"\"},rules:{title:[{required:!0,message:\"请输入新闻标题\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}]}}),async mounted(){this.init()},methods:{async init(){const t=this;if(\"editnew\"==t.$route.name){let e=t.$route.params.id,n=await Object(b.d)(e);t.form.title=n.data.new.title,t.form.content=n.data.new.content}else t.form.title=\"\",t.form.content=\"\"},async submit(){const t=this;try{let e;if(\"addnew\"==t.$route.name)console.log(1),e=await Object(b.a)(t.form);else{let n=t.$route.params.id;e=await Object(b.c)(n,t.form)}console.log(e),t.$message({message:e.data.message,type:\"success\"}),t.$router.push({name:\"newlist\"})}catch(e){t.$message({message:e.response.data.message,type:\"error\"})}}},watch:{$route(t,e){\"addnew\"!=t.name&&\"editnew\"!=t.name||this.init()}}},g=Object(m.a)(p,i,[],!1,null,\"617abebb\",null);g.options.__file=\"web/js/pages/admin/new/index.vue\";e.default=g.exports}}]);","extractedComments":[]}