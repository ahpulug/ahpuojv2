{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{13:function(t,e,n){\"use strict\";n.d(e,\"e\",function(){return r}),n.d(e,\"j\",function(){return s}),n.d(e,\"l\",function(){return c}),n.d(e,\"m\",function(){return o}),n.d(e,\"k\",function(){return i}),n.d(e,\"f\",function(){return u}),n.d(e,\"p\",function(){return l}),n.d(e,\"o\",function(){return d}),n.d(e,\"d\",function(){return m}),n.d(e,\"i\",function(){return f}),n.d(e,\"n\",function(){return p}),n.d(e,\"a\",function(){return g}),n.d(e,\"g\",function(){return b}),n.d(e,\"c\",function(){return h}),n.d(e,\"b\",function(){return w}),n.d(e,\"h\",function(){return $});var a=n(0);function r(t){return Object(a.a)(\"POST\",\"admin/contest\",t)}function s(t,e){return console.log(t,e),Object(a.a)(\"PUT\",`admin/contest/${t}`,e)}function c(t){return Object(a.a)(\"GET\",`admin/contest/${t}`)}function o(t,e,n){return Object(a.a)(\"GET\",\"admin/contests\",{page:t,perpage:e,param:n})}function i(){return Object(a.a)(\"GET\",\"admin/allcontests\")}function u(t){return Object(a.a)(\"DELETE\",`admin/contest/${t}`)}function l(t){return Object(a.a)(\"PUT\",`admin/contest/${t}/status`)}function d(t,e,n,r){return Object(a.a)(\"GET\",`admin/contest/${t}/users`,{page:e,perpage:n,param:r})}function m(t,e){return Object(a.a)(\"POST\",`admin/contest/${t}/users`,e)}function f(t,e){return Object(a.a)(\"DELETE\",`admin/contest/${t}/user/${e}`)}function p(t){return Object(a.a)(\"GET\",`admin/contest/${t}/teams`)}function g(t,e){return Object(a.a)(\"POST\",`admin/contest/${t}/team/${e}`)}function b(t,e){return Object(a.a)(\"DELETE\",`admin/contest/${t}/team/${e}`)}function h(t,e,n){return Object(a.a)(\"POST\",`admin/contest/${t}/team/${e}/users`,n)}function w(t,e){return Object(a.a)(\"POST\",`admin/contest/${t}/team/${e}/allusers`)}function $(t,e,n){return Object(a.a)(\"DELETE\",`admin/contest/${t}/team/${e}/user/${n}`)}},571:function(t,e,n){\"use strict\";n.r(e);var a=n(13),r={data:()=>({loading:!0,currentPage:1,currentRowId:0,perpage:10,total:0,queryParam:\"\",tableData:[]}),mounted(){this.fetchContestList()},methods:{async fetchContestList(){const t=this;t.loading=!0;try{let e=(await Object(a.m)(t.currentPage,t.perpage,t.queryParam)).data;setTimeout(()=>{t.tableData=e.data,t.total=e.total,t.loading=!1},200)}catch(t){console.log(t)}},handleSizeChange(t){this.perpage=t,this.fetchContestList()},async handleToggleContestStatus(t){const e=this;let n=`确认要${0==t.defunct?\"保留\":\"启用\"}竞赛&作业${t.name}吗?`;try{await e.$confirm(n,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});try{let n=await Object(a.p)(t.id);e.$message({type:\"success\",message:n.data.message}),t.defunct=!t.defunct}catch(t){e.$message({type:\"error\",message:t.response.data.message})}}catch(t){e.$message({type:\"info\",message:\"已取消操作\"})}},async handleDeleteContest(t){const e=this;try{await e.$confirm(`确认要删除竞赛&作业${t.name}吗?`,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});try{let n=await Object(a.f)(t.id);e.$message({type:\"success\",message:n.data.message}),1==e.tableData.length&&e.currentPage>1&&e.currentPage--,e.fetchContestList()}catch(t){e.$message({type:\"error\",message:t.response.data.message})}}catch(t){e.$message({type:\"info\",message:\"已取消删除\"})}}}},s=n(2),c=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"admin-content\"},[n(\"div\",{staticClass:\"content__breadcrumb\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[t._v(\"首页\")]),n(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),n(\"div\",{staticClass:\"content__main\"},[n(\"div\",{staticClass:\"content__searchbar__wrapper\"},[n(\"el-input\",{staticStyle:{\"max-width\":\"20em\"},attrs:{placeholder:\"请输入标签名称\",maxlength:\"20\",clearable:\"\"},model:{value:t.queryParam,callback:function(e){t.queryParam=e},expression:\"queryParam\"}}),n(\"el-button\",{attrs:{icon:\"el-icon-search\",type:\"primary\",plain:\"\"},on:{click:t.fetchContestList}})],1),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.tableData}},[n(\"el-table-column\",{attrs:{label:\"ID\",prop:\"id\",width:\"180\"}}),n(\"el-table-column\",{attrs:{label:\"名称\",\"min-width\":\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"a\",{attrs:{href:\"/contest/\"+e.row.id,target:\"_blank\"}},[t._v(t._s(e.row.name))])]}}])}),n(\"el-table-column\",{attrs:{label:\"状态\",width:\"240\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",{staticClass:\"text-button\",class:[0==e.row.defunct?\"text-button--success\":\"text-button--danger\"]},[t._v(t._s(0==e.row.defunct?\"启用\":\"保留\"))]),n(\"span\",{staticClass:\"text-button\",class:[0==e.row.private?\"text-button--success\":\"text-button--danger\"]},[t._v(t._s(0==e.row.private?\"公开\":\"私有\"))]),n(\"span\",{staticClass:\"text-button\",class:[0==e.row.team_mode?\"text-button--success\":\"text-button--primary\"]},[t._v(t._s(0==e.row.team_mode?\"个人\":\"团队\"))])]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",width:\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(n){return t.$router.push({name:\"adminEditContest\",params:{id:e.row.id}})}}},[t._v(\"编辑\")]),n(\"el-button\",{attrs:{size:\"mini\",disabled:0==e.row.private},on:{click:function(n){t.$router.push({name:0==e.row.team_mode?\"adminContestManage\":\"adminContestTeamManage\",params:{id:e.row.id}})}}},[t._v(\"人员\")]),n(\"el-button\",{attrs:{size:\"mini\",type:0==e.row.defunct?\"danger\":\"success\"},on:{click:function(n){return t.handleToggleContestStatus(e.row)}}},[t._v(t._s(0==e.row.defunct?\"保留\":\"启用\"))]),n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(n){return t.handleDeleteContest(e.row)}}},[t._v(\"删除\")])]}}])})],1),n(\"el-pagination\",{attrs:{\"current-page\":t.currentPage,\"page-sizes\":[10,20,30,40,50],\"page-size\":10,layout:\"total, sizes, prev, pager, next, jumper\",total:t.total},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.fetchContestList,\"update:currentPage\":function(e){t.currentPage=e},\"update:current-page\":function(e){t.currentPage=e}}})],1)])},[],!1,null,\"483e677c\",null);e.default=c.exports}}]);","extractedComments":[]}