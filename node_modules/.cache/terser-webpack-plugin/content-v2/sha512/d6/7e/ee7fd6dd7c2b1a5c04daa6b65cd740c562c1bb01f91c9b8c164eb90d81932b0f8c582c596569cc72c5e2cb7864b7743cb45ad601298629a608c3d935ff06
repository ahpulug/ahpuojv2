{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{367:function(e,t,n){\"use strict\";n.r(t);var a=n(42),i=n(57),r={components:{TinymceEditor:a.a},data:()=>({form:{title:\"\",content:\"\"},rules:{title:[{required:!0,message:\"请输入标题\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}]}}),async mounted(){this.init()},methods:{async init(){const e=this;try{if(\"adminEditNew\"==e.$route.name){let t=e.$route.params.id,n=await Object(i.d)(t);e.form.title=n.data.new.title,e.form.content=n.data.new.content}else Object.assign(e.form,{title:\"\",content:\"\"})}catch(t){console.log(t),e.$router.replace({name:\"admin404Page\"})}},async submit(){const e=this;e.$refs.form.validate(async t=>{if(!t)return e.$message({message:\"表单必填项不能为空\",type:\"error\"}),!1;try{let t;if(\"adminAddNew\"==e.$route.name)t=await Object(i.a)(e.form);else{let n=e.$route.params.id;t=await Object(i.c)(n,e.form)}e.$message({message:t.data.message,type:\"success\"}),e.$router.push({name:\"adminNewlist\"})}catch(t){e.$message({message:t.response.data.message,type:\"error\"})}})}},watch:{$route(e,t){\"adminAddNew\"!=e.name&&\"adminEditNew\"!=e.name||this.init()}}},s=n(2),o=Object(s.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"admin-content\"},[n(\"div\",{staticClass:\"content__breadcrumb\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[e._v(\"首页\")]),n(\"el-breadcrumb-item\",[e._v(e._s(e.$route.meta.title))])],1)],1),n(\"div\",{staticClass:\"content__main\"},[n(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"75px\"}},[n(\"el-form-item\",{attrs:{label:\"标题\",prop:\"title\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入标题\",autofocus:!0},model:{value:e.form.title,callback:function(t){e.$set(e.form,\"title\",t)},expression:\"form.title\"}})],1),n(\"el-form-item\",{attrs:{label:\"内容\"}},[n(\"tinymce-editor\",{attrs:{height:600},model:{value:e.form.content,callback:function(t){e.$set(e.form,\"content\",t)},expression:\"form.content\"}})],1),n(\"el-form-item\",{staticClass:\"fl\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submit}},[e._v(\"提交\")])],1)],1)],1)])},[],!1,null,\"eb6e9b56\",null);t.default=o.exports},42:function(e,t,n){\"use strict\";var a=n(101),i=n.n(a),r=n(102),s=(n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(26)),o=n(37),l=n.n(o),c={name:\"tinymce-editor\",components:{Editor:r.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data(){return{init:{relative_urls:!0,document_base_url:s.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:(e,t,n)=>{let a;(a=new FormData).append(\"file\",e.blob(),e.filename());l.a.post(\"/api/admin/image\",a,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(e=>{t(e.data.url)}).catch(e=>{})}},myValue:this.value}},mounted(){},methods:{onClick(e){this.$emit(\"onClick\",e,i.a)},clear(){this.myValue=\"\"}},watch:{value(e){this.myValue=e},myValue(e){this.$emit(\"input\",e)}}},u=n(2),m=Object(u.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tinymce-editor\",style:{height:e.height+\"px\"}},[n(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:\"myValue\"}})],1)},[],!1,null,\"3ee0a8eb\",null);t.a=m.exports},57:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return i}),n.d(t,\"c\",function(){return r}),n.d(t,\"d\",function(){return s}),n.d(t,\"e\",function(){return o}),n.d(t,\"b\",function(){return l}),n.d(t,\"f\",function(){return c}),n.d(t,\"g\",function(){return u});var a=n(0);function i(e){return Object(a.a)(\"POST\",\"admin/new\",e)}function r(e,t){return console.log(e,t),Object(a.a)(\"PUT\",`admin/new/${e}`,t)}function s(e){return Object(a.a)(\"GET\",`admin/new/${e}`)}function o(e,t,n){return Object(a.a)(\"GET\",\"admin/news\",{page:e,perpage:t,param:n})}function l(e){return Object(a.a)(\"DELETE\",`admin/new/${e}`)}function c(e){return Object(a.a)(\"PUT\",`admin/new/${e}/status`)}function u(e){return Object(a.a)(\"PUT\",`admin/new/${e}/topstatus`)}}}]);","extractedComments":[]}