{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{157:function(e,n,t){var r=t(417);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(8)(r,a);r.locals&&(e.exports=r.locals)},416:function(e,n,t){\"use strict\";var r=t(157);t.n(r).a},417:function(e,n,t){(e.exports=t(7)(!1)).push([e.i,\".red[data-v-31eb9810] {\\n  color: red;\\n}\\n.green[data-v-31eb9810] {\\n  color: green;\\n}\\n.blue[data-v-31eb9810] {\\n  color: blue;\\n}\\n.black[data-v-31eb9810] {\\n  color: black;\\n}\\n.white[data-v-31eb9810] {\\n  color: white;\\n}\\n.yellow[data-v-31eb9810] {\\n  color: yellow;\\n}\\n.gold[data-v-31eb9810] {\\n  color: gold;\\n}\\n.purple[data-v-31eb9810] {\\n  color: purple;\\n}\\n.cyan[data-v-31eb9810] {\\n  color: cyan;\\n}\\n.orange[data-v-31eb9810] {\\n  color: orange;\\n}\\n.orangered[data-v-31eb9810] {\\n  color: orangered;\\n}\\n.pink[data-v-31eb9810] {\\n  color: pink;\\n}\\n.violet[data-v-31eb9810] {\\n  color: violet;\\n}\\n.yellowgreen[data-v-31eb9810] {\\n  color: yellowgreen;\\n}\\n.tomato[data-v-31eb9810] {\\n  color: tomato;\\n}\\n.tan[data-v-31eb9810] {\\n  color: tan;\\n}\\n.snow[data-v-31eb9810] {\\n  color: snow;\\n}\\n.gray[data-v-31eb9810] {\\n  color: gray;\\n}\\n.silver[data-v-31eb9810] {\\n  color: silver;\\n}\\n.skyblue[data-v-31eb9810] {\\n  color: skyblue;\\n}\\n.navy[data-v-31eb9810] {\\n  color: navy;\\n}\\n.brown[data-v-31eb9810] {\\n  color: brown;\\n}\\n.beige[data-v-31eb9810] {\\n  color: beige;\\n}\\n.magenta[data-v-31eb9810] {\\n  color: magenta;\\n}\\n.c0[data-v-31eb9810] {\\n  color: #000;\\n}\\n.c1[data-v-31eb9810] {\\n  color: #111;\\n}\\n.c2[data-v-31eb9810] {\\n  color: #222;\\n}\\n.c3[data-v-31eb9810] {\\n  color: #333;\\n}\\n.c4[data-v-31eb9810] {\\n  color: #444;\\n}\\n.c5[data-v-31eb9810] {\\n  color: #555;\\n}\\n.c6[data-v-31eb9810] {\\n  color: #666;\\n}\\n.c7[data-v-31eb9810] {\\n  color: #777;\\n}\\n.c8[data-v-31eb9810] {\\n  color: #888;\\n}\\n.c9[data-v-31eb9810] {\\n  color: #999;\\n}\\n.c10[data-v-31eb9810] {\\n  color: #aaa;\\n}\\n.c11[data-v-31eb9810] {\\n  color: #bbb;\\n}\\n.c12[data-v-31eb9810] {\\n  color: #ccc;\\n}\\n.c13[data-v-31eb9810] {\\n  color: #ddd;\\n}\\n.c14[data-v-31eb9810] {\\n  color: #eee;\\n}\\n.c15[data-v-31eb9810] {\\n  color: #fff;\\n}\\n.porange[data-v-31eb9810] {\\n  color: #FFCC99;\\n}\\n.pgold[data-v-31eb9810] {\\n  color: #FFFFCC;\\n}\\n.pazure[data-v-31eb9810] {\\n  color: #CCFFFF;\\n}\\n.pdgreen[data-v-31eb9810] {\\n  color: #99CCCC;\\n}\\n.ppurple[data-v-31eb9810] {\\n  color: #CCCCFF;\\n}\\n.pblue[data-v-31eb9810] {\\n  color: #0099CC;\\n}\\n.plblue[data-v-31eb9810] {\\n  color: #99ccff;\\n}\\n.pdblue[data-v-31eb9810] {\\n  color: #336699;\\n}\\n.pgreen[data-v-31eb9810] {\\n  color: #99CC33;\\n}\\n.replys__wrapper .link[data-v-31eb9810] {\\n  font-size: 0.24rem;\\n  line-height: 0.5rem;\\n  padding-right: 0.2rem;\\n}\\n.replys__wrapper h1.content__panel__title[data-v-31eb9810] {\\n  background: #fff;\\n}\\n.replys__wrapper .reply__box[data-v-31eb9810] {\\n  background: #fff;\\n  position: relative;\\n  margin-top: 0.2rem;\\n  padding: 0.2rem;\\n  border: 1px solid #ddd;\\n}\\n.replys__wrapper .reply__box .reply__userinfo__wrapper[data-v-31eb9810] {\\n    text-align: center;\\n    float: left;\\n    width: 100px;\\n}\\n.replys__wrapper .reply__box .reply__userinfo__wrapper img[data-v-31eb9810] {\\n      width: 60px;\\n      height: 60px;\\n      border-radius: 30px;\\n      border: 1px solid #ccc;\\n      box-shadow: 1px 1px 1px 1px #ccc;\\n}\\n.replys__wrapper .reply__box[data-v-31eb9810]:last-child {\\n    border-bottom: 1px solid #ddd;\\n}\\n.replys__wrapper .reply__box .reply__content[data-v-31eb9810] {\\n    position: relative;\\n    box-sizing: border-box;\\n    padding: 0.1rem 0.2rem 0.2rem 0.1rem;\\n    margin-left: 100px;\\n    min-height: 100px;\\n    text-align: left;\\n    font-size: 20px;\\n}\\n.replys__wrapper .reply__box .reply__addon[data-v-31eb9810] {\\n    font-size: 16px;\\n    position: absolute;\\n    width: 100%;\\n    left: 0px;\\n    bottom: 0px;\\n}\\n.replys__wrapper .reply__box .subreplys__wrapper .subreply__box[data-v-31eb9810] {\\n    padding: 0.1rem;\\n    margin-left: 100px;\\n    border: 1px solid #ddd;\\n}\\n.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper[data-v-31eb9810] {\\n      text-align: center;\\n      padding-top: 20px;\\n      float: left;\\n      width: 100px;\\n}\\n.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper img[data-v-31eb9810] {\\n        width: 40px;\\n        height: 40px;\\n        border-radius: 20px;\\n        border: 1px solid #ccc;\\n        box-shadow: 1px 1px 1px 1px #ccc;\\n}\\n.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__content[data-v-31eb9810] {\\n      position: relative;\\n      box-sizing: border-box;\\n      padding: 0.15rem;\\n      margin-left: 100px;\\n      min-height: 100px;\\n      text-align: left;\\n      font-size: 20px;\\n}\\n.replys__wrapper .post__box__wrapper[data-v-31eb9810] {\\n  min-height: 100px;\\n  text-align: left;\\n  background: #fff;\\n  padding: 1rem;\\n}\\n\",\"\"])},42:function(e,n,t){\"use strict\";var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t(\"div\",{staticClass:\"tinymce-editor\",style:{height:e.height+\"px\"}},[t(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(n){e.myValue=n},expression:\"myValue\"}})],1)};r._withStripped=!0;var a=t(101),o=t.n(a),l=t(102),i=(t(173),t(174),t(175),t(176),t(177),t(178),t(179),t(180),t(181),t(26)),s=t(37),p=t.n(s),c={name:\"tinymce-editor\",components:{Editor:l.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data(){return{init:{relative_urls:!0,document_base_url:i.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:(e,n,t)=>{let r;(r=new FormData).append(\"file\",e.blob(),e.filename());p.a.post(\"/api/admin/image\",r,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(e=>{n(e.data.url)}).catch(e=>{})}},myValue:this.value}},mounted(){},methods:{onClick(e){this.$emit(\"onClick\",e,o.a)},clear(){this.myValue=\"\"}},watch:{value(e){this.myValue=e},myValue(e){this.$emit(\"input\",e)}}},u=t(2),d=Object(u.a)(c,r,[],!1,null,\"393b9879\",null);d.options.__file=\"web-common/components/tinymce_editor.vue\";n.a=d.exports},47:function(e,n,t){\"use strict\";t.d(n,\"a\",function(){return r});const r=new(t(5).default)},585:function(e,n,t){\"use strict\";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t(\"div\",{staticClass:\"content\"},[t(\"title\",[e._v(e._s(e.issue.title+\" - AHPUOJ\"))]),t(\"div\",{staticClass:\"content__main\"},[t(\"div\",{staticClass:\"replys__wrapper\"},[t(\"div\",{staticClass:\"link fr\"},[t(\"span\",[e._v(\"板块 \")]),0==e.issue.problem.id?t(\"router-link\",{attrs:{to:{name:\"issueList\"}}},[e._v(e._s(\"总板\"))]):t(\"router-link\",{attrs:{to:{name:\"problemIssueList\",params:{id:e.issue.problem.id}}}},[e._v(e._s(\"问题P \"+e.issue.problem.title))])],1),t(\"h1\",{staticClass:\"content__panel__title\"},[e._v(e._s(e.issue.title))]),e._l(e.replys,function(n,r){return[t(\"div\",{staticClass:\"reply__box\"},[t(\"div\",{staticClass:\"reply__userinfo__wrapper\"},[t(\"ul\",[t(\"li\",{staticClass:\"reply__user__avatar\"},[t(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:n.user.id}}}},[t(\"img\",{attrs:{src:e.imgUrl(n.user.avatar)}})])],1),t(\"li\",{staticClass:\"reply__user__name ell\"},[t(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:n.user.id}}}},[e._v(e._s(n.user.nick))])],1)])]),t(\"div\",{staticClass:\"reply__content\"},[t(\"div\",{domProps:{innerHTML:e._s(n.content)}}),t(\"div\",{staticClass:\"reply__addon clearfix\"},[t(\"p\",{staticClass:\"fr\"},[t(\"span\",[e._v(\" \"+e._s(n.updated_at)+\" \")]),t(\"span\",[e._v(e._s(n.reply_count)+\"个回复\")])]),t(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:function(t){return e.handleReplyToReply(n)}}},[e._v(\"回复\")])],1)]),t(\"div\",{staticClass:\"subreplys__wrapper mt10\"},[e._l(n.sub_replys,function(r,a){return[t(\"div\",{staticClass:\"subreply__box\"},[t(\"div\",{staticClass:\"subreply__userinfo__wrapper\"},[t(\"ul\",[t(\"li\",{staticClass:\"reply__user__avatar\"},[t(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:r.user.id}}}},[t(\"img\",{attrs:{src:e.imgUrl(r.user.avatar)}})])],1),t(\"li\",{staticClass:\"reply__user__name ell\"},[t(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:r.user.id}}}},[e._v(e._s(r.user.nick)+\"                  \")])],1)])]),t(\"div\",{staticClass:\"subreply__content\"},[t(\"div\",{domProps:{innerHTML:e._s(e.calcSubReply(r))}}),t(\"div\",{staticClass:\"reply__addon clearfix\"},[t(\"p\",{staticClass:\"fr\"},[t(\"span\",[e._v(\" \"+e._s(n.updated_at)+\" \")]),t(\"span\",[e._v(e._s(n.reply_count)+\"个回复\")])])])])])]})],2)])]}),t(\"el-pagination\",{staticClass:\"tal mt10 mb10\",staticStyle:{background:\"#fff\"},attrs:{\"current-page\":e.currentPage,background:\"\",\"page-size\":e.perpage,layout:\"prev, pager, next,jumper\",total:e.total},on:{\"current-change\":e.fetchIssue,\"update:currentPage\":function(n){e.currentPage=n},\"update:current-page\":function(n){e.currentPage=n}}}),t(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"发表新回复\")]),t(\"div\",{staticClass:\"post__box__wrapper\"},[e.$store.getters.username?t(\"div\",{staticClass:\"post__box\"},[t(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.replyContent,callback:function(n){e.replyContent=n},expression:\"replyContent\"}}),t(\"el-button\",{staticClass:\"mt10\",attrs:{type:\"primary\"},on:{click:function(n){return e.reply(1)}}},[e._v(\"发表\")])],1):t(\"a\",{on:{click:e.goLogin}},[e._v(\"请登陆后发表讨论\")])])],2)]),t(\"el-dialog\",{attrs:{title:\"回复内容\",visible:e.dialogFormVisible,width:\"800px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(n){e.dialogFormVisible=n},closed:e.closeDialog,opened:e.openDialog}},[t(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.subReplyContent,callback:function(n){e.subReplyContent=n},expression:\"subReplyContent\"}}),t(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"el-button\",{on:{click:e.cancel}},[e._v(\"取消\")]),t(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:function(n){return e.reply(2)}}},[e._v(\"确定\")])],1)],1)],1)};r._withStripped=!0;var a=t(6),o=t(42),l=t(47),i=t(16),s={components:{TinymceEditor:o.a},name:\"\",data:()=>({currentPage:1,dialogFormVisible:!1,perpage:20,issue:{},replys:[],total:0,replyContent:\"\",subReplyContent:\"\",replyForm:{content:\"\",reply_id:0,reply_user_id:0}}),mounted(){this.fetchIssue()},methods:{async fetchIssue(){window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0;const e=this;try{let n=await Object(a.g)(e.$route.params.id,e.currentPage,e.perpage);console.log(n);let t=n.data;e.issue=t.issue,e.replys=t.replys,e.total=t.total}catch(e){console.log(e)}},openDialog(){console.log(\"open\")},closeDialog(){this.subReplyContent=\"\"},cancel(){this.dialogFormVisible=!1},goLogin(){l.a.$emit(\"goLogin\")},calcSubReply:e=>e.reply_user_nick?`回复${e.reply_user_nick}: ${e.content}`:e.content,async reply(e){console.log(e);const n=this;if(n.replyForm.content=1==e?n.replyContent:n.subReplyContent,\"\"!=n.replyForm.content)try{let t;1==e&&(console.log(\"way1\"),n.replyForm.reply_id=0,n.replyForm.reply_user_id=0),t=await Object(i.g)(n.issue.id,n.replyForm),n.$message({message:t.data.message,type:\"success\"}),n.replyForm.content=\"\",n.replyContent=\"\",n.dialogFormVisible=!1,n.fetchIssue()}catch(e){n.$message({message:e.response.data.message,type:\"error\"})}else this.$message({message:\"内容不能为空\",type:\"error\"})},handleReplyToReply(e){console.log(e),this.dialogFormVisible=!0,this.replyForm.reply_id=e.id,this.replyForm.reply_user_id=e.user.id}}},p=(t(416),t(2)),c=Object(p.a)(s,r,[],!1,null,\"31eb9810\",null);c.options.__file=\"web-user/js/pages/issue/index.vue\";n.default=c.exports},6:function(e,n,t){\"use strict\";t.d(n,\"i\",function(){return a}),t.d(n,\"m\",function(){return o}),t.d(n,\"j\",function(){return l}),t.d(n,\"h\",function(){return i}),t.d(n,\"g\",function(){return s}),t.d(n,\"k\",function(){return p}),t.d(n,\"l\",function(){return c}),t.d(n,\"n\",function(){return u}),t.d(n,\"o\",function(){return d}),t.d(n,\"c\",function(){return _}),t.d(n,\"b\",function(){return b}),t.d(n,\"e\",function(){return g}),t.d(n,\"f\",function(){return m}),t.d(n,\"d\",function(){return y}),t.d(n,\"a\",function(){return v});var r=t(0);function a(){return Object(r.a)(\"GET\",\"languages\")}function o(e,n){return Object(r.a)(\"GET\",\"ranklist\",{page:e,perpage:n})}function l(e,n){return Object(r.a)(\"GET\",\"news\",{page:e,perpage:n})}function i(e,n,t){return Object(r.a)(\"GET\",`problem/${e}/issues`,{page:n,perpage:t})}function s(e,n,t){return Object(r.a)(\"GET\",`/issue/${e}`,{page:n,perpage:t})}function p(e){return Object(r.a)(\"GET\",`problem/${e}`)}function c(e,n,t,a,o){return Object(r.a)(\"GET\",\"problems\",{page:e,perpage:n,param:t,level:a,tag_id:o})}function u(e){return Object(r.a)(\"GET\",`solution/${e}`)}function d(e,n,t,a,o,l,i){return Object(r.a)(\"GET\",\"solutions\",{page:e,perpage:n,param:t,username:a,language:o,result:l,contest_id:i})}function _(e,n,t){return Object(r.a)(\"GET\",\"contests\",{page:e,perpage:n,param:t})}function b(e){return Object(r.a)(\"GET\",`contest/${e}`)}function g(e){return Object(r.a)(\"GET\",`contest/${e}/ranklist`)}function m(e){return Object(r.a)(\"GET\",`contest/${e}/teamranklist`)}function y(e,n){return Object(r.a)(\"GET\",`contest/${e}/problem/${n}`)}function v(){return Object(r.a)(\"GET\",\"alltags\")}}}]);","extractedComments":[]}