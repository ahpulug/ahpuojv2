{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{133:function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"div\",{staticClass:\"contemt__breadcrumb\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",{attrs:{to:{name:\"taglist\"}}},[e._v(\"首页\")]),e._v(\" \"),a(\"el-breadcrumb-item\",[e._v(e._s(e.$route.meta.title))])],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"content__button__wrapper\"},[a(\"el-button\",{attrs:{type:\"success\"},on:{click:e.handleCreateTag}},[e._v(\"新建标签\")])],1),e._v(\" \"),a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData}},[a(\"el-table-column\",{attrs:{label:\"ID\",prop:\"id\",width:\"180\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"标签名称\",prop:\"name\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.handleEditTag(t.row)}}},[e._v(\"编辑\")]),e._v(\" \"),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.handleDeleteTag(t.row)}}},[e._v(\"删除\")])]}}])})],1),e._v(\" \"),a(\"div\",{staticClass:\"content__pagination__wrapper\"},[a(\"el-pagination\",{attrs:{\"current-page\":e.currentPage,\"page-size\":e.perpage,layout:\"prev, pager, next, jumper\",total:e.total},on:{\"current-change\":e.fetchTagList,\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t}}})],1)],1),e._v(\" \"),a(\"el-dialog\",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,width:\"400px\"},on:{\"update:visible\":function(t){e.dialogFormVisible=t},closed:e.closeDialog,opened:e.openDialog}},[a(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[a(\"el-form-item\",{attrs:{label:\"标签名称\",prop:\"name\"}},[a(\"el-input\",{ref:\"input\",attrs:{autocomplete:\"off\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submit(e.submitMode)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",t)},expression:\"form.name\"}})],1)],1),e._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:e.cancel}},[e._v(\"取 消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",\"native-type\":\"submit\"},on:{click:function(t){return e.submit(e.submitMode)}}},[e._v(\"确 定\")])],1)],1)],1)};i._withStripped=!0;var r=a(6);var s={data:()=>({currentPage:1,currentRowId:0,perpage:0,total:0,dialogFormTitle:\"\",dialogFormVisible:!1,submitMode:\"\",form:{name:\"\"},rules:{name:[{required:!0,message:\"请输入标签名称\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}]},tableData:[]}),mounted:function(){this.fetchTagList()},methods:{async fetchTagList(){let e=this;try{let a=(await(t=e.currentPage,Object(r.a)(\"GET\",\"admin/tags\",{page:t}))).data;e.tableData=a.data,e.perpage=a.perpage,e.total=a.total}catch(e){console.log(e)}var t},openDialog(){this.$refs.form.clearValidate(),this.$refs.input.focus()},closeDialog(){this.$refs.form.resetFields(),this.$refs.input.blur(),this.form.name=\"\"},submit(){let e=this;e.$refs.form.validate(async t=>{if(!t)return!1;try{let t;t=\"create\"==e.submitMode?await function(e){return Object(r.a)(\"POST\",\"admin/tag\",e)}(e.form):await function(e,t){return Object(r.a)(\"PUT\",`admin/tag/${e}`,t)}(e.currentRowId,e.form),e.$message({message:t.data.message,type:\"success\"}),e.fetchTagList()}catch(t){e.$message({message:t.response.data.message,type:\"error\"})}e.dialogFormVisible=!1})},cancel(){this.dialogFormVisible=!1},handleCreateTag(){this.dialogFormTitle=\"新建标签\",this.submitMode=\"create\",this.dialogFormVisible=!0},handleEditTag(e){this.dialogFormTitle=\"编辑标签\",this.submitMode=\"edit\",this.currentRowId=e.id,this.form.name=e.name,this.dialogFormVisible=!0},async handleDeleteTag(e){let t=this;try{await t.$confirm(`确认要删除标签${e.name}吗?`,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});try{let i=await(a=e.id,Object(r.a)(\"DELETE\",`admin/tag/${a}`));t.$message({type:\"success\",message:i.data.message}),t.fetchTagList()}catch(e){t.$message({type:\"error\",message:e.response.data.message})}}catch(e){t.$message({type:\"info\",message:\"已取消删除\"})}var a}}},n=a(2),o=Object(n.a)(s,i,[],!1,null,\"07078904\",null);o.options.__file=\"web/js/pages/admin/tag_list/index.vue\";t.default=o.exports}}]);","extractedComments":[]}