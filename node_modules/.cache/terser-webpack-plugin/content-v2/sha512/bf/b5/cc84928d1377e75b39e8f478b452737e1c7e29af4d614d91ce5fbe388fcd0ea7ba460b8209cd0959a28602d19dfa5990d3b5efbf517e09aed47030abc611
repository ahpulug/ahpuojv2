{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{15:function(e,t,a){\"use strict\";a.d(t,\"i\",function(){return n}),a.d(t,\"m\",function(){return o}),a.d(t,\"j\",function(){return s}),a.d(t,\"h\",function(){return i}),a.d(t,\"g\",function(){return c}),a.d(t,\"k\",function(){return u}),a.d(t,\"l\",function(){return l}),a.d(t,\"n\",function(){return d}),a.d(t,\"o\",function(){return p}),a.d(t,\"c\",function(){return m}),a.d(t,\"b\",function(){return f}),a.d(t,\"e\",function(){return _}),a.d(t,\"f\",function(){return g}),a.d(t,\"d\",function(){return v}),a.d(t,\"a\",function(){return b});var r=a(1);function n(){return Object(r.a)(\"GET\",\"languages\")}function o(e,t){return Object(r.a)(\"GET\",\"ranklist\",{page:e,perpage:t})}function s(e,t){return Object(r.a)(\"GET\",\"news\",{page:e,perpage:t})}function i(e,t,a){return Object(r.a)(\"GET\",\"problem/\".concat(e,\"/issues\"),{page:t,perpage:a})}function c(e,t,a){return Object(r.a)(\"GET\",\"/issue/\".concat(e),{page:t,perpage:a})}function u(e){return Object(r.a)(\"GET\",\"problem/\".concat(e))}function l(e,t,a,n,o){return Object(r.a)(\"GET\",\"problems\",{page:e,perpage:t,param:a,level:n,tag_id:o})}function d(e){return Object(r.a)(\"GET\",\"solution/\".concat(e))}function p(e,t,a,n,o,s,i){return Object(r.a)(\"GET\",\"solutions\",{page:e,perpage:t,param:a,username:n,language:o,result:s,contest_id:i})}function m(e,t,a){return Object(r.a)(\"GET\",\"contests\",{page:e,perpage:t,param:a})}function f(e){return Object(r.a)(\"GET\",\"contest/\".concat(e))}function _(e){return Object(r.a)(\"GET\",\"contest/\".concat(e,\"/ranklist\"))}function g(e){return Object(r.a)(\"GET\",\"contest/\".concat(e,\"/teamranklist\"))}function v(e,t){return Object(r.a)(\"GET\",\"contest/\".concat(e,\"/problem/\").concat(t))}function b(){return Object(r.a)(\"GET\",\"alltags\")}},286:function(e,t,a){var r=a(628);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(14)(r,n);r.locals&&(e.exports=r.locals)},627:function(e,t,a){\"use strict\";var r=a(286);a.n(r).a},628:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,\".red[data-v-45c017ea]{color:red}.green[data-v-45c017ea]{color:green}.blue[data-v-45c017ea]{color:blue}.black[data-v-45c017ea]{color:#000}.white[data-v-45c017ea]{color:#fff}.yellow[data-v-45c017ea]{color:#ff0}.gold[data-v-45c017ea]{color:gold}.purple[data-v-45c017ea]{color:purple}.cyan[data-v-45c017ea]{color:cyan}.orange[data-v-45c017ea]{color:orange}.orangered[data-v-45c017ea]{color:#ff4500}.pink[data-v-45c017ea]{color:pink}.violet[data-v-45c017ea]{color:violet}.yellowgreen[data-v-45c017ea]{color:#9acd32}.tomato[data-v-45c017ea]{color:tomato}.tan[data-v-45c017ea]{color:tan}.snow[data-v-45c017ea]{color:snow}.gray[data-v-45c017ea]{color:gray}.silver[data-v-45c017ea]{color:silver}.skyblue[data-v-45c017ea]{color:skyblue}.navy[data-v-45c017ea]{color:navy}.brown[data-v-45c017ea]{color:brown}.beige[data-v-45c017ea]{color:beige}.magenta[data-v-45c017ea]{color:#f0f}.c0[data-v-45c017ea]{color:#000}.c1[data-v-45c017ea]{color:#111}.c2[data-v-45c017ea]{color:#222}.c3[data-v-45c017ea]{color:#333}.c4[data-v-45c017ea]{color:#444}.c5[data-v-45c017ea]{color:#555}.c6[data-v-45c017ea]{color:#666}.c7[data-v-45c017ea]{color:#777}.c8[data-v-45c017ea]{color:#888}.c9[data-v-45c017ea]{color:#999}.c10[data-v-45c017ea]{color:#aaa}.c11[data-v-45c017ea]{color:#bbb}.c12[data-v-45c017ea]{color:#ccc}.c13[data-v-45c017ea]{color:#ddd}.c14[data-v-45c017ea]{color:#eee}.c15[data-v-45c017ea]{color:#fff}.porange[data-v-45c017ea]{color:#fc9}.pgold[data-v-45c017ea]{color:#ffc}.pazure[data-v-45c017ea]{color:#cff}.pdgreen[data-v-45c017ea]{color:#9cc}.ppurple[data-v-45c017ea]{color:#ccf}.pblue[data-v-45c017ea]{color:#09c}.plblue[data-v-45c017ea]{color:#9cf}.pdblue[data-v-45c017ea]{color:#369}.pgreen[data-v-45c017ea]{color:#9c3}.issues__wrapper .link[data-v-45c017ea]{font-size:0.24rem;line-height:0.5rem;padding-right:0.2rem}.issues__wrapper h1.content__panel__title[data-v-45c017ea]{background:#fff}.issues__wrapper .issue__box[data-v-45c017ea]{background:#fff;position:relative;margin-top:0.2rem;padding:0.2rem;border:1px solid #ddd}.issues__wrapper .issue__box .issue__userinfo__wrapper[data-v-45c017ea]{text-align:center;word-wrap:break-word;word-break:break-all;float:left;width:100px}.issues__wrapper .issue__box .issue__userinfo__wrapper img[data-v-45c017ea]{width:60px;height:60px;border-radius:30px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.issues__wrapper .issue__box[data-v-45c017ea]:last-child{border-bottom:1px solid #ddd}.issues__wrapper .issue__box .issue__content[data-v-45c017ea]{box-sizing:border-box;padding:0.2rem 0 0 0.2rem;margin-left:100px;min-height:80px;text-align:left;font-size:0.16rem}.issues__wrapper .issue__box .issue__content a[data-v-45c017ea]{font-size:24px}.issues__wrapper .issue__box .issue__addon[data-v-45c017ea]{position:absolute;bottom:10px;right:10px}.issues__wrapper .issue__box .issue__addon a[data-v-45c017ea]{font-size:0.16rem}.issues__wrapper .post__box__wrapper[data-v-45c017ea]{min-height:100px;text-align:left;background:#fff;padding:0.2rem}\\n\",\"\"])},691:function(e,t,a){\"use strict\";a.r(t);a(10),a(7),a(38),a(11);var r=a(15),n=a(78),o=a(87),s=a(30);function i(e,t,a,r,n,o,s){try{var i=e[o](s),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(r,n)}function c(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var o=e.apply(t,a);function s(e){i(o,r,n,s,c,\"next\",e)}function c(e){i(o,r,n,s,c,\"throw\",e)}s(void 0)})}}var u={components:{TinymceEditor:n.a},name:\"\",data:function(){return{currentPage:1,perpage:20,problemId:0,data:[],total:0,issueForm:{title:\"\",problem_id:0},active:!1,replyForm:{content:\"\",reply_id:0,reply_user_id:0}}},mounted:function(){this.fetchIssueList()},methods:{fetchIssueList:function(){var e=c(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,\"issueList\"==(t=this).$route.name?t.problemId=0:t.problemId=t.$route.params.id,e.prev=5,e.next=8,Object(r.h)(t.problemId,t.currentPage,t.perpage);case 8:a=e.sent,console.log(a),n=a.data,t.data=n.data,t.total=n.total,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case\"end\":return e.stop()}},e,this,[[5,15]])}));return function(){return e.apply(this,arguments)}}(),goLogin:function(){o.a.$emit(\"goLogin\")},postIssue:function(){var e=c(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(\"\"!=(t=this).issueForm.title){e.next=4;break}return this.$message({message:\"标题不能为空\",type:\"error\"}),e.abrupt(\"return\");case 4:if(!(t.issueForm.title.length>20)){e.next=7;break}return this.$message({message:\"标题长度限制在20个字符以内\",type:\"error\"}),e.abrupt(\"return\");case 7:if(\"\"!=t.replyForm.content){e.next=10;break}return this.$message({message:\"内容不能为空\",type:\"error\"}),e.abrupt(\"return\");case 10:return e.prev=10,\"problemIssueList\"==t.$route.name?t.issueForm.problem_id=parseInt(t.$route.params.id):t.issueForm.problem_id=0,e.next=14,Object(s.f)(t.issueForm);case 14:return a=e.sent,r=a.data.issue.id,e.next=18,Object(s.g)(r,t.replyForm);case 18:a=e.sent,t.$message({message:\"发布讨论主题成功\",type:\"success\"}),t.issueForm.title=\"\",t.replyForm.content=\"\",t.fetchIssueList(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(10),t.$message({message:e.t0.response.data.message,type:\"error\"});case 28:case\"end\":return e.stop()}},e,this,[[10,25]])}));return function(){return e.apply(this,arguments)}}()}},l=(a(627),a(2)),d=Object(l.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[\"problemIssueList\"==e.$route.name?a(\"title\",[e._v(e._s(\"问题P\"+e.$route.params.id+\"的讨论版 - AHPUOJ\"))]):e._e(),a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"issues__wrapper\"},[a(\"div\",{staticClass:\"link fr\"},[\"problemIssueList\"==e.$route.name?a(\"router-link\",{attrs:{to:{name:\"problem\",params:{id:e.$route.params.id}}}},[e._v(e._s(\"转到问题\"))]):e._e()],1),a(\"h1\",{staticClass:\"content__panel__title\"},[e._v(e._s(\"issueList\"==e.$route.name?\"讨论版 总版\":\"问题P\"+e.$route.params.id+\"的讨论版\"))]),e._l(e.data,function(t){return[a(\"div\",{staticClass:\"issue__box\"},[a(\"div\",{staticClass:\"issue__userinfo__wrapper\"},[a(\"ul\",[a(\"li\",{staticClass:\"issue__user__avatar\"},[a(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[a(\"img\",{attrs:{src:e.imgUrl(t.user.avatar)}})])],1),a(\"li\",{staticClass:\"issue__user__name ell\"},[a(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[e._v(e._s(t.user.nick))])],1)])]),a(\"div\",{staticClass:\"issue__content\"},[a(\"router-link\",{attrs:{to:{name:\"issue\",params:{id:t.id}},target:\"_blank\"}},[e._v(e._s(t.title))]),a(\"div\",{staticClass:\"issue__addon tar\"},[t.problem.id>0?a(\"router-link\",{attrs:{to:{name:\"problem\",params:{id:t.problem.id}}}},[e._v(e._s(\"In P\"+t.problem.id+\" \"+t.problem.title))]):a(\"p\",[e._v(\"总版\")]),a(\"p\",[e._v(e._s(t.reply_count)+\"个回复 最后回复时间 \"+e._s(t.updated_at))])],1)],1)])]}),a(\"el-pagination\",{staticClass:\"tal\",attrs:{\"current-page\":e.currentPage,background:\"\",\"page-size\":e.perpage,layout:\"prev, pager, next,jumper\",total:e.total},on:{\"current-change\":e.fetchIssueList,\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t}}}),a(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"发表新讨论\")]),a(\"div\",{staticClass:\"post__box__wrapper\"},[e.$store.getters.username?a(\"div\",{staticClass:\"post__box\"},[a(\"el-input\",{attrs:{placeholder:\"请输入讨论标题\",autofocus:!0},model:{value:e.issueForm.title,callback:function(t){e.$set(e.issueForm,\"title\",t)},expression:\"issueForm.title\"}}),a(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.replyForm.content,callback:function(t){e.$set(e.replyForm,\"content\",t)},expression:\"replyForm.content\"}}),a(\"el-button\",{staticClass:\"mt10\",attrs:{type:\"primary\"},on:{click:e.postIssue}},[e._v(\"发表\")])],1):a(\"a\",{on:{click:e.goLogin}},[e._v(\"请登陆后发表讨论\")])])],2)])])},[],!1,null,\"45c017ea\",null);t.default=d.exports},78:function(e,t,a){\"use strict\";a(85);var r=a(175),n=a.n(r),o=a(176),s=(a(310),a(311),a(312),a(313),a(314),a(315),a(316),a(317),a(318),a(50)),i=a(66),c=a.n(i),u={name:\"tinymce-editor\",components:{Editor:o.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data:function(){return{init:{relative_urls:!0,document_base_url:s.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:function(e,t,a){var r;(r=new FormData).append(\"file\",e.blob(),e.filename());c.a.post(\"/api/admin/image\",r,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(function(e){t(e.data.url)}).catch(function(e){})}},myValue:this.value}},mounted:function(){},methods:{onClick:function(e){this.$emit(\"onClick\",e,n.a)},clear:function(){this.myValue=\"\"}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit(\"input\",e)}}},l=a(2),d=Object(l.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"tinymce-editor\",style:{height:e.height+\"px\"}},[a(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:\"myValue\"}})],1)},[],!1,null,\"3ee0a8eb\",null);t.a=d.exports},87:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return r});var r=new(a(6).default)}}]);","extractedComments":[]}