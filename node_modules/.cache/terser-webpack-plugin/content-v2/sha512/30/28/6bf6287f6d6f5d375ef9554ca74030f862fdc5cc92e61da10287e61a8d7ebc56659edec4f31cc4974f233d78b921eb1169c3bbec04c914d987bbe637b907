{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{156:function(e,t,a){var r=a(415);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(8)(r,o);r.locals&&(e.exports=r.locals)},414:function(e,t,a){\"use strict\";var r=a(156);a.n(r).a},415:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,\".red[data-v-4bb211d8]{color:red}.green[data-v-4bb211d8]{color:green}.blue[data-v-4bb211d8]{color:blue}.black[data-v-4bb211d8]{color:#000}.white[data-v-4bb211d8]{color:#fff}.yellow[data-v-4bb211d8]{color:#ff0}.gold[data-v-4bb211d8]{color:gold}.purple[data-v-4bb211d8]{color:purple}.cyan[data-v-4bb211d8]{color:cyan}.orange[data-v-4bb211d8]{color:orange}.orangered[data-v-4bb211d8]{color:#ff4500}.pink[data-v-4bb211d8]{color:pink}.violet[data-v-4bb211d8]{color:violet}.yellowgreen[data-v-4bb211d8]{color:#9acd32}.tomato[data-v-4bb211d8]{color:tomato}.tan[data-v-4bb211d8]{color:tan}.snow[data-v-4bb211d8]{color:snow}.gray[data-v-4bb211d8]{color:gray}.silver[data-v-4bb211d8]{color:silver}.skyblue[data-v-4bb211d8]{color:skyblue}.navy[data-v-4bb211d8]{color:navy}.brown[data-v-4bb211d8]{color:brown}.beige[data-v-4bb211d8]{color:beige}.magenta[data-v-4bb211d8]{color:#f0f}.c0[data-v-4bb211d8]{color:#000}.c1[data-v-4bb211d8]{color:#111}.c2[data-v-4bb211d8]{color:#222}.c3[data-v-4bb211d8]{color:#333}.c4[data-v-4bb211d8]{color:#444}.c5[data-v-4bb211d8]{color:#555}.c6[data-v-4bb211d8]{color:#666}.c7[data-v-4bb211d8]{color:#777}.c8[data-v-4bb211d8]{color:#888}.c9[data-v-4bb211d8]{color:#999}.c10[data-v-4bb211d8]{color:#aaa}.c11[data-v-4bb211d8]{color:#bbb}.c12[data-v-4bb211d8]{color:#ccc}.c13[data-v-4bb211d8]{color:#ddd}.c14[data-v-4bb211d8]{color:#eee}.c15[data-v-4bb211d8]{color:#fff}.porange[data-v-4bb211d8]{color:#fc9}.pgold[data-v-4bb211d8]{color:#ffc}.pazure[data-v-4bb211d8]{color:#cff}.pdgreen[data-v-4bb211d8]{color:#9cc}.ppurple[data-v-4bb211d8]{color:#ccf}.pblue[data-v-4bb211d8]{color:#09c}.plblue[data-v-4bb211d8]{color:#9cf}.pdblue[data-v-4bb211d8]{color:#369}.pgreen[data-v-4bb211d8]{color:#9c3}.issues__wrapper .link[data-v-4bb211d8]{font-size:0.24rem;line-height:0.5rem;padding-right:0.2rem}.issues__wrapper h1.content__panel__title[data-v-4bb211d8]{background:#fff}.issues__wrapper .issue__box[data-v-4bb211d8]{background:#fff;position:relative;margin-top:0.2rem;padding:0.2rem;border:1px solid #ddd}.issues__wrapper .issue__box .issue__userinfo__wrapper[data-v-4bb211d8]{text-align:center;word-wrap:break-word;word-break:break-all;float:left;width:100px}.issues__wrapper .issue__box .issue__userinfo__wrapper img[data-v-4bb211d8]{width:60px;height:60px;border-radius:30px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.issues__wrapper .issue__box[data-v-4bb211d8]:last-child{border-bottom:1px solid #ddd}.issues__wrapper .issue__box .issue__content[data-v-4bb211d8]{box-sizing:border-box;padding:0.2rem 0 0 0.2rem;margin-left:100px;min-height:80px;text-align:left;font-size:0.16rem}.issues__wrapper .issue__box .issue__content a[data-v-4bb211d8]{font-size:24px}.issues__wrapper .issue__box .issue__addon[data-v-4bb211d8]{position:absolute;bottom:10px;right:10px}.issues__wrapper .issue__box .issue__addon a[data-v-4bb211d8]{font-size:0.16rem}.issues__wrapper .post__box__wrapper[data-v-4bb211d8]{min-height:100px;text-align:left;background:#fff;padding:0.2rem}\\n\",\"\"])},42:function(e,t,a){\"use strict\";var r=a(101),o=a.n(r),s=a(102),n=(a(173),a(174),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(26)),i=a(37),l=a.n(i),d={name:\"tinymce-editor\",components:{Editor:s.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data(){return{init:{relative_urls:!0,document_base_url:n.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:\"silver\"},images_upload_handler:(e,t,a)=>{let r;(r=new FormData).append(\"file\",e.blob(),e.filename());l.a.post(\"/api/admin/image\",r,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(e=>{t(e.data.url)}).catch(e=>{})}},myValue:this.value}},mounted(){},methods:{onClick(e){this.$emit(\"onClick\",e,o.a)},clear(){this.myValue=\"\"}},watch:{value(e){this.myValue=e},myValue(e){this.$emit(\"input\",e)}}},c=a(2),u=Object(c.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"tinymce-editor\",style:{height:e.height+\"px\"}},[a(\"editor\",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:\"myValue\"}})],1)},[],!1,null,\"3ee0a8eb\",null);t.a=u.exports},47:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return r});const r=new(a(5).default)},584:function(e,t,a){\"use strict\";a.r(t);var r=a(6),o=a(42),s=a(47),n=a(16),i={components:{TinymceEditor:o.a},name:\"\",data:()=>({currentPage:1,perpage:20,problemId:0,data:[],total:0,issueForm:{title:\"\",problem_id:0},active:!1,replyForm:{content:\"\",reply_id:0,reply_user_id:0}}),mounted(){this.fetchIssueList()},methods:{async fetchIssueList(){window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0;const e=this;\"issueList\"==e.$route.name?e.problemId=0:e.problemId=e.$route.params.id;try{let t=await Object(r.h)(e.problemId,e.currentPage,e.perpage);console.log(t);let a=t.data;e.data=a.data,e.total=a.total}catch(e){console.log(e)}},goLogin(){s.a.$emit(\"goLogin\")},async postIssue(){const e=this;if(\"\"!=e.issueForm.title)if(e.issueForm.title.length>20)this.$message({message:\"标题长度限制在20个字符以内\",type:\"error\"});else if(\"\"!=e.replyForm.content)try{let t;\"problemIssueList\"==e.$route.name?e.issueForm.problem_id=parseInt(e.$route.params.id):e.issueForm.problem_id=0;let a=(t=await Object(n.f)(e.issueForm)).data.issue.id;t=await Object(n.g)(a,e.replyForm),e.$message({message:\"发布讨论主题成功\",type:\"success\"}),e.issueForm.title=\"\",e.replyForm.content=\"\",e.fetchIssueList()}catch(t){e.$message({message:t.response.data.message,type:\"error\"})}else this.$message({message:\"内容不能为空\",type:\"error\"});else this.$message({message:\"标题不能为空\",type:\"error\"})}}},l=(a(414),a(2)),d=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"issues__wrapper\"},[a(\"div\",{staticClass:\"link fr\"},[\"problemIssueList\"==e.$route.name?a(\"router-link\",{attrs:{to:{name:\"problem\",params:{id:e.$route.params.id}}}},[e._v(e._s(\"转到问题\"))]):e._e()],1),a(\"h1\",{staticClass:\"content__panel__title\"},[e._v(e._s(\"issueList\"==e.$route.name?\"讨论版 总版\":\"问题P\"+e.$route.params.id+\"的讨论版\"))]),e._l(e.data,function(t){return[a(\"div\",{staticClass:\"issue__box\"},[a(\"div\",{staticClass:\"issue__userinfo__wrapper\"},[a(\"ul\",[a(\"li\",{staticClass:\"issue__user__avatar\"},[a(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[a(\"img\",{attrs:{src:e.imgUrl(t.user.avatar)}})])],1),a(\"li\",{staticClass:\"issue__user__name ell\"},[a(\"router-link\",{attrs:{to:{name:\"userinfo\",params:{id:t.user.id}}}},[e._v(e._s(t.user.nick))])],1)])]),a(\"div\",{staticClass:\"issue__content\"},[a(\"router-link\",{attrs:{to:{name:\"issue\",params:{id:t.id}},target:\"_blank\"}},[e._v(e._s(t.title))]),a(\"div\",{staticClass:\"issue__addon tar\"},[t.problem.id>0?a(\"router-link\",{attrs:{to:{name:\"problem\",params:{id:t.problem.id}}}},[e._v(e._s(\"In P\"+t.problem.id+\" \"+t.problem.title))]):a(\"p\",[e._v(\"总版\")]),a(\"p\",[e._v(e._s(t.reply_count)+\"个回复 最后回复时间 \"+e._s(t.updated_at))])],1)],1)])]}),a(\"el-pagination\",{staticClass:\"tal\",attrs:{\"current-page\":e.currentPage,background:\"\",\"page-size\":e.perpage,layout:\"prev, pager, next,jumper\",total:e.total},on:{\"current-change\":e.fetchIssueList,\"update:currentPage\":function(t){e.currentPage=t},\"update:current-page\":function(t){e.currentPage=t}}}),a(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"发表新讨论\")]),a(\"div\",{staticClass:\"post__box__wrapper\"},[e.$store.getters.username?a(\"div\",{staticClass:\"post__box\"},[a(\"el-input\",{attrs:{placeholder:\"请输入讨论标题\",autofocus:!0},model:{value:e.issueForm.title,callback:function(t){e.$set(e.issueForm,\"title\",t)},expression:\"issueForm.title\"}}),a(\"tinymce-editor\",{staticClass:\"mt10\",attrs:{height:300},model:{value:e.replyForm.content,callback:function(t){e.$set(e.replyForm,\"content\",t)},expression:\"replyForm.content\"}}),a(\"el-button\",{staticClass:\"mt10\",attrs:{type:\"primary\"},on:{click:e.postIssue}},[e._v(\"发表\")])],1):a(\"a\",{on:{click:e.goLogin}},[e._v(\"请登陆后发表讨论\")])])],2)])])},[],!1,null,\"4bb211d8\",null);t.default=d.exports},6:function(e,t,a){\"use strict\";a.d(t,\"i\",function(){return o}),a.d(t,\"m\",function(){return s}),a.d(t,\"j\",function(){return n}),a.d(t,\"h\",function(){return i}),a.d(t,\"g\",function(){return l}),a.d(t,\"k\",function(){return d}),a.d(t,\"l\",function(){return c}),a.d(t,\"n\",function(){return u}),a.d(t,\"o\",function(){return b}),a.d(t,\"c\",function(){return p}),a.d(t,\"b\",function(){return m}),a.d(t,\"e\",function(){return _}),a.d(t,\"f\",function(){return g}),a.d(t,\"d\",function(){return f}),a.d(t,\"a\",function(){return v});var r=a(0);function o(){return Object(r.a)(\"GET\",\"languages\")}function s(e,t){return Object(r.a)(\"GET\",\"ranklist\",{page:e,perpage:t})}function n(e,t){return Object(r.a)(\"GET\",\"news\",{page:e,perpage:t})}function i(e,t,a){return Object(r.a)(\"GET\",`problem/${e}/issues`,{page:t,perpage:a})}function l(e,t,a){return Object(r.a)(\"GET\",`/issue/${e}`,{page:t,perpage:a})}function d(e){return Object(r.a)(\"GET\",`problem/${e}`)}function c(e,t,a,o,s){return Object(r.a)(\"GET\",\"problems\",{page:e,perpage:t,param:a,level:o,tag_id:s})}function u(e){return Object(r.a)(\"GET\",`solution/${e}`)}function b(e,t,a,o,s,n,i){return Object(r.a)(\"GET\",\"solutions\",{page:e,perpage:t,param:a,username:o,language:s,result:n,contest_id:i})}function p(e,t,a){return Object(r.a)(\"GET\",\"contests\",{page:e,perpage:t,param:a})}function m(e){return Object(r.a)(\"GET\",`contest/${e}`)}function _(e){return Object(r.a)(\"GET\",`contest/${e}/ranklist`)}function g(e){return Object(r.a)(\"GET\",`contest/${e}/teamranklist`)}function f(e,t){return Object(r.a)(\"GET\",`contest/${e}/problem/${t}`)}function v(){return Object(r.a)(\"GET\",\"alltags\")}}}]);","extractedComments":[]}