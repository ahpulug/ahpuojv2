{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{17:function(t,e,n){\"use strict\";n.d(e,\"b\",function(){return r}),n.d(e,\"e\",function(){return i}),n.d(e,\"g\",function(){return o}),n.d(e,\"j\",function(){return c}),n.d(e,\"c\",function(){return s}),n.d(e,\"n\",function(){return u}),n.d(e,\"i\",function(){return l}),n.d(e,\"h\",function(){return d}),n.d(e,\"f\",function(){return m}),n.d(e,\"a\",function(){return b}),n.d(e,\"d\",function(){return p}),n.d(e,\"m\",function(){return f}),n.d(e,\"l\",function(){return g}),n.d(e,\"k\",function(){return h});var a=n(0);function r(t){return Object(a.a)(\"POST\",\"admin/problem\",t)}function i(t,e){return console.log(t,e),Object(a.a)(\"PUT\",`admin/problem/${t}`,e)}function o(t){return Object(a.a)(\"GET\",`admin/problem/${t}`)}function c(t,e,n){return Object(a.a)(\"GET\",\"admin/problems\",{page:t,perpage:e,param:n})}function s(t){return Object(a.a)(\"DELETE\",`admin/problem/${t}`)}function u(t){return Object(a.a)(\"PUT\",`admin/problem/${t}/status`)}function l(t){return Object(a.a)(\"GET\",`admin/problem/${t}/datas`)}function d(t,e){return Object(a.a)(\"GET\",`admin/problem/${t}/data/${e}`)}function m(t,e,n){return Object(a.a)(\"PUT\",`admin/problem/${t}/data/${e}`,n)}function b(t,e){return Object(a.a)(\"POST\",`admin/problem/${t}/data`,e)}function p(t,e){return Object(a.a)(\"DELETE\",`admin/problem/${t}/data/${e}`)}function f(t){return Object(a.a)(\"PUT\",`admin/solution/${t}/judgestatus`)}function g(t){return Object(a.a)(\"PUT\",`admin/problem/${t}/judgestatus`)}function h(t,e){return Object(a.a)(\"PUT\",`admin/problem/${t}/movement/${e}`)}},567:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"admin-content\"},[n(\"div\",{staticClass:\"content__breadcrumb\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[t._v(\"首页\")]),n(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),n(\"div\",{staticClass:\"content__main\"},[n(\"div\",{staticClass:\"content__searchbar__wrapper\"},[n(\"el-input\",{staticStyle:{\"max-width\":\"20em\"},attrs:{placeholder:\"请输入问题名称\",maxlength:\"20\",clearable:\"\"},model:{value:t.queryParam,callback:function(e){t.queryParam=e},expression:\"queryParam\"}}),n(\"el-button\",{attrs:{icon:\"el-icon-search\",type:\"primary\",plain:\"\"},on:{click:t.fetchProblemList}})],1),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.tableData}},[n(\"el-table-column\",{attrs:{label:\"ID\",prop:\"id\",width:\"180\"}}),n(\"el-table-column\",{attrs:{label:\"标题\",prop:\"title\",\"min-width\":\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"a\",{attrs:{href:\"/problem/\"+e.row.id,target:\"_blank\"}},[t._v(t._s(e.row.title))])]}}])}),n(\"el-table-column\",{attrs:{label:\"标签\",\"min-width\":\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return t._l(e.row.tags,function(e){return n(\"el-button\",{key:e.id,staticClass:\"text-button text-button--success\",attrs:{size:\"mini\"}},[t._v(t._s(e.name))])})}}])}),n(\"el-table-column\",{attrs:{label:\"状态\",width:\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",{staticClass:\"text-button\",class:[0==e.row.defunct?\"text-button--success\":\"text-button--danger\"]},[t._v(t._s(0==e.row.defunct?\"启用\":\"保留\"))])]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",width:\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(n){return t.$router.push({name:\"adminProblemData\",params:{id:e.row.id}})}}},[t._v(\"数据\")]),n(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(n){return t.$router.push({name:\"adminEditProblem\",params:{id:e.row.id}})}}},[t._v(\"编辑\")]),n(\"el-button\",{attrs:{size:\"mini\",type:0==e.row.defunct?\"danger\":\"success\"},on:{click:function(n){return t.handleToggleProblemStatus(e.row)}}},[t._v(t._s(0==e.row.defunct?\"保留\":\"启用\"))]),n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(n){return t.handleDeleteProblem(e.row)}}},[t._v(\"删除\")])]}}])})],1),n(\"el-pagination\",{attrs:{\"current-page\":t.currentPage,\"page-sizes\":[10,20,30,40,50],\"page-size\":10,layout:\"total, sizes, prev, pager, next, jumper\",total:t.total},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.fetchProblemList,\"update:currentPage\":function(e){t.currentPage=e},\"update:current-page\":function(e){t.currentPage=e}}})],1)])};a._withStripped=!0;var r=n(17),i={data:()=>({loading:!0,currentPage:1,currentRowId:0,perpage:10,total:0,queryParam:\"\",tableData:[]}),mounted(){this.fetchProblemList()},methods:{async fetchProblemList(){const t=this;t.loading=!0;try{let e=(await Object(r.j)(t.currentPage,t.perpage,t.queryParam)).data;setTimeout(()=>{t.tableData=e.data,t.total=e.total,t.loading=!1},200)}catch(t){console.log(t)}},handleSizeChange(t){this.perpage=t,this.fetchProblemList()},async handleToggleProblemStatus(t){const e=this;let n=`确认要${0==t.defunct?\"保留\":\"启用\"}问题${t.title}吗?`;try{await e.$confirm(n,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});try{let n=await Object(r.n)(t.id);e.$message({type:\"success\",message:n.data.message}),t.defunct=!t.defunct}catch(t){e.$message({type:\"error\",message:t.response.data.message})}}catch(t){e.$message({type:\"info\",message:\"已取消操作\"})}},async handleDeleteProblem(t){const e=this;try{await e.$confirm(`确认要删除问题${t.title}吗?`,\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"});try{let n=await Object(r.c)(t.id);e.$message({type:\"success\",message:n.data.message}),1==e.tableData.length&&e.currentPage>1&&e.currentPage--,e.fetchProblemList()}catch(t){e.$message({type:\"error\",message:t.response.data.message})}}catch(t){e.$message({type:\"info\",message:\"已取消删除\"})}}}},o=n(2),c=Object(o.a)(i,a,[],!1,null,\"e686b04a\",null);c.options.__file=\"web-admin/js/pages/problem_list/index.vue\";e.default=c.exports}}]);","extractedComments":[]}