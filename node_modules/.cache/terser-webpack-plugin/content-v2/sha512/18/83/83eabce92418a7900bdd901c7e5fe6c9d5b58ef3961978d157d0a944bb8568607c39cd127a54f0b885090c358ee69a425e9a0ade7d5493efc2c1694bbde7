{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{167:function(e,t,a){var r=a(440);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(8)(r,s);r.locals&&(e.exports=r.locals)},439:function(e,t,a){\"use strict\";var r=a(167);a.n(r).a},440:function(e,t,a){(e.exports=a(7)(!1)).push([e.i,\".red[data-v-147f63c6] {\\n  color: red;\\n}\\n.green[data-v-147f63c6] {\\n  color: green;\\n}\\n.blue[data-v-147f63c6] {\\n  color: blue;\\n}\\n.black[data-v-147f63c6] {\\n  color: black;\\n}\\n.white[data-v-147f63c6] {\\n  color: white;\\n}\\n.yellow[data-v-147f63c6] {\\n  color: yellow;\\n}\\n.gold[data-v-147f63c6] {\\n  color: gold;\\n}\\n.purple[data-v-147f63c6] {\\n  color: purple;\\n}\\n.cyan[data-v-147f63c6] {\\n  color: cyan;\\n}\\n.orange[data-v-147f63c6] {\\n  color: orange;\\n}\\n.orangered[data-v-147f63c6] {\\n  color: orangered;\\n}\\n.pink[data-v-147f63c6] {\\n  color: pink;\\n}\\n.violet[data-v-147f63c6] {\\n  color: violet;\\n}\\n.yellowgreen[data-v-147f63c6] {\\n  color: yellowgreen;\\n}\\n.tomato[data-v-147f63c6] {\\n  color: tomato;\\n}\\n.tan[data-v-147f63c6] {\\n  color: tan;\\n}\\n.snow[data-v-147f63c6] {\\n  color: snow;\\n}\\n.gray[data-v-147f63c6] {\\n  color: gray;\\n}\\n.silver[data-v-147f63c6] {\\n  color: silver;\\n}\\n.skyblue[data-v-147f63c6] {\\n  color: skyblue;\\n}\\n.navy[data-v-147f63c6] {\\n  color: navy;\\n}\\n.brown[data-v-147f63c6] {\\n  color: brown;\\n}\\n.beige[data-v-147f63c6] {\\n  color: beige;\\n}\\n.magenta[data-v-147f63c6] {\\n  color: magenta;\\n}\\n.c0[data-v-147f63c6] {\\n  color: #000;\\n}\\n.c1[data-v-147f63c6] {\\n  color: #111;\\n}\\n.c2[data-v-147f63c6] {\\n  color: #222;\\n}\\n.c3[data-v-147f63c6] {\\n  color: #333;\\n}\\n.c4[data-v-147f63c6] {\\n  color: #444;\\n}\\n.c5[data-v-147f63c6] {\\n  color: #555;\\n}\\n.c6[data-v-147f63c6] {\\n  color: #666;\\n}\\n.c7[data-v-147f63c6] {\\n  color: #777;\\n}\\n.c8[data-v-147f63c6] {\\n  color: #888;\\n}\\n.c9[data-v-147f63c6] {\\n  color: #999;\\n}\\n.c10[data-v-147f63c6] {\\n  color: #aaa;\\n}\\n.c11[data-v-147f63c6] {\\n  color: #bbb;\\n}\\n.c12[data-v-147f63c6] {\\n  color: #ccc;\\n}\\n.c13[data-v-147f63c6] {\\n  color: #ddd;\\n}\\n.c14[data-v-147f63c6] {\\n  color: #eee;\\n}\\n.c15[data-v-147f63c6] {\\n  color: #fff;\\n}\\n.porange[data-v-147f63c6] {\\n  color: #FFCC99;\\n}\\n.pgold[data-v-147f63c6] {\\n  color: #FFFFCC;\\n}\\n.pazure[data-v-147f63c6] {\\n  color: #CCFFFF;\\n}\\n.pdgreen[data-v-147f63c6] {\\n  color: #99CCCC;\\n}\\n.ppurple[data-v-147f63c6] {\\n  color: #CCCCFF;\\n}\\n.pblue[data-v-147f63c6] {\\n  color: #0099CC;\\n}\\n.plblue[data-v-147f63c6] {\\n  color: #99ccff;\\n}\\n.pdblue[data-v-147f63c6] {\\n  color: #336699;\\n}\\n.pgreen[data-v-147f63c6] {\\n  color: #99CC33;\\n}\\n.account-setting__wrapper[data-v-147f63c6] {\\n  background: #fff;\\n}\\n.account-setting__wrapper .account-setting__section[data-v-147f63c6] {\\n    margin: 0 0 2rem 1rem;\\n    text-align: left;\\n}\\n.account-setting__wrapper .account-setting__section h2[data-v-147f63c6] {\\n      color: #333;\\n      text-align: left;\\n      font-size: 1.2em;\\n      line-height: 30px;\\n      padding: 10px 0;\\n}\\n.account-setting__wrapper .account-setting__img-wrapper[data-v-147f63c6] {\\n    position: relative;\\n}\\n.account-setting__wrapper .account-setting__img-wrapper .account-setting__avatar[data-v-147f63c6] {\\n      height: 200px;\\n      width: 200px;\\n      border-radius: 150px;\\n      border: 3px solid #fff;\\n}\\n.account-setting__wrapper .account-setting__img-wrapper .img-mask[data-v-147f63c6] {\\n      text-align: center;\\n      line-height: 200px;\\n      font-size: 1.2rem;\\n      position: absolute;\\n      left: 0;\\n      top: 0;\\n      height: 200px;\\n      width: 200px;\\n      border: 3px solid #fff;\\n      color: #fff;\\n      background: rgba(51, 51, 51, 0.5);\\n      opacity: 0;\\n      transition: all 0.3s;\\n      border-radius: 150px;\\n}\\n.account-setting__wrapper .account-setting__img-wrapper .img-mask[data-v-147f63c6]:hover {\\n        opacity: 0.8;\\n}\\n\",\"\"])},594:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"div\",{staticClass:\"content__main\"},[a(\"div\",{staticClass:\"account-setting__wrapper\"},[a(\"h1\",{staticClass:\"content__panel__title\"},[e._v(\"账号设置 \")]),a(\"div\",{staticClass:\"account-setting__section\"},[a(\"h2\",[e._v(\"昵称设置\")]),a(\"p\",[e._v(\"用户名 \"+e._s(e.$store.getters.username))]),a(\"el-form\",{ref:\"resetNickForm\",attrs:{inline:!0,model:e.resetNickForm,rules:e.resetNickFormRules},nativeOn:{submit:function(e){e.preventDefault()}}},[a(\"el-form-item\",{attrs:{label:\"昵称\",prop:\"nick\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入昵称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.submitResetNick(t)}},model:{value:e.resetNickForm.nick,callback:function(t){e.$set(e.resetNickForm,\"nick\",t)},expression:\"resetNickForm.nick\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitResetNick}},[e._v(\"保存\")])],1)],1)],1),a(\"div\",{staticClass:\"account-setting__section\"},[a(\"h2\",[e._v(\"头像设置\")]),a(\"div\",{staticClass:\"account-setting__img-wrapper\"},[a(\"img\",{staticClass:\"account-setting__avatar\",attrs:{src:e.imgUrl(e.$store.getters.userAvatar)}}),a(\"a\",{on:{click:function(t){return e.toggleShow()}}},[e._m(0)])])]),a(\"div\",{staticClass:\"account-setting__section\"},[a(\"h2\",[e._v(\"修改密码\"),a(\"el-form\",{ref:\"resetPasswordForm\",staticStyle:{width:\"400px\"},attrs:{model:e.resetPasswordForm,rules:e.resetPasswordRules}},[a(\"el-form-item\",{attrs:{prop:\"oldpassword\"}},[a(\"el-input\",{attrs:{type:\"password\",placeholder:\"请输入原密码\"},model:{value:e.resetPasswordForm.oldpassword,callback:function(t){e.$set(e.resetPasswordForm,\"oldpassword\",t)},expression:\"resetPasswordForm.oldpassword\"}})],1),a(\"el-form-item\",{attrs:{prop:\"password\"}},[a(\"el-input\",{attrs:{type:\"password\",placeholder:\"请输入新密码\"},model:{value:e.resetPasswordForm.password,callback:function(t){e.$set(e.resetPasswordForm,\"password\",t)},expression:\"resetPasswordForm.password\"}})],1),a(\"el-form-item\",{attrs:{prop:\"confirmpassword\"}},[a(\"el-input\",{attrs:{type:\"password\",placeholder:\"请确认新密码\"},model:{value:e.resetPasswordForm.confirmpassword,callback:function(t){e.$set(e.resetPasswordForm,\"confirmpassword\",t)},expression:\"resetPasswordForm.confirmpassword\"}})],1),a(\"el-form-item\",[a(\"el-button\",{staticStyle:{width:\"100%\"},attrs:{type:\"primary\"},on:{click:e.submitResetPassword}},[e._v(\"重设密码\")])],1)],1)],1)])])]),a(\"div\",{staticClass:\"avatar-upload__wrapper\"},[a(\"avatar-upload\",{attrs:{field:\"img\",method:\"PUT\",width:120,height:120,url:\"/api/user/avatar\",headers:e.headers,\"img-format\":\"jpg\"},on:{\"crop-upload-success\":e.cropUploadSuccess,\"crop-upload-fail\":e.cropUploadFail},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}})],1)])};r._withStripped=!0;var s=a(366),n=a(16),o={components:{\"avatar-upload\":s.a},data(){return{show:!1,headers:{Authorization:\"\"},resetNickForm:{nick:\"\"},resetNickFormRules:{nick:[{required:!0,message:\"请输入昵称\",trigger:\"blur\"},{type:\"string\",max:20,message:\"超出长度限制\",trigger:\"blur\"}]},resetPasswordForm:{oldpassword:\"\",password:\"\",confirmpassword:\"\"},resetPasswordRules:{oldpassword:[{required:!0,message:\"请输入原密码\",trigger:\"blur\"}],password:[{validator:(e,t,a)=>{\"\"===t?a(new Error(\"请输入密码\")):(\"\"!==this.resetPasswordForm.confirmpassword&&this.$refs.resetPasswordForm.validateField(\"confirmpassword\"),a())},trigger:\"blur\"},{min:6,message:\"密码不能少于6个字符\",trigger:\"blur\"},{max:20,message:\"密码不能超过20个字符\",trigger:\"blur\"}],confirmpassword:[{validator:(e,t,a)=>{\"\"===t?a(new Error(\"请再次输入密码\")):t!==this.resetPasswordForm.password?a(new Error(\"两次输入密码不一致!\")):a()},trigger:\"blur\"},{min:6,message:\"密码不能少于6个字符\",trigger:\"blur\"},{max:20,message:\"密码不能超过20个字符\",trigger:\"blur\"}]}}},mounted(){0==this.$store.getters.username.length&&this.$router.replace({name:\"404Page\"}),this.headers.Authorization=this.$store.getters.token,this.resetNickForm.nick=this.$store.getters.userNick},methods:{toggleShow(){this.show=!this.show},cropUploadSuccess(e,t){console.log(e),this.$store.dispatch(\"UpdateUserAvatar\",e.url),this.$message({message:\"更新头像成功\",type:\"success\"})},cropUploadFail(e,t){this.$message({message:\"更新头像失败\",type:\"success\"})},submitResetNick(){const e=this;e.$refs.resetNickForm.validate(async t=>{if(!t)return e.$message({message:\"昵称不符合要求\",type:\"error\"}),!1;try{let t=await Object(n.h)(e.resetNickForm);e.$message({message:t.data.message,type:\"success\"}),e.$store.dispatch(\"UpdateUserInfo\",t.data.user)}catch(t){console.log(t),e.$message({message:t.response.data.message,type:\"error\"})}})},submitResetPassword(){const e=this;e.$refs.resetPasswordForm.validate(async t=>{if(!t)return e.$message({message:\"请检查输入\",type:\"error\"}),!1;try{let t=await Object(n.i)(e.resetPasswordForm);e.$message({message:t.data.message,type:\"success\"}),e.$store.dispatch(\"UpdateUserInfo\",t.data.user)}catch(t){console.log(t),e.$message({message:t.response.data.message,type:\"error\"})}})}}},c=(a(439),a(2)),i=Object(c.a)(o,r,[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"img-mask\"},[t(\"p\",[this._v(\"更换头像\")])])}],!1,null,\"147f63c6\",null);i.options.__file=\"web-user/js/pages/account_setting/index.vue\";t.default=i.exports}}]);","extractedComments":[]}