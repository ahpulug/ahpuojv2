{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{367:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"admin-content\"},[n(\"div\",{staticClass:\"content__breadcrumb\"},[n(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[n(\"el-breadcrumb-item\",{attrs:{to:{name:\"adminIndex\"}}},[t._v(\"首页\")]),n(\"el-breadcrumb-item\",[t._v(t._s(t.$route.meta.title))])],1)],1),n(\"div\",{staticClass:\"content__main\"},[n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rules,\"label-width\":\"75px\"}},[n(\"el-form-item\",{attrs:{label:\"标题\",prop:\"title\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入标题\",autofocus:!0},model:{value:t.form.title,callback:function(e){t.$set(t.form,\"title\",e)},expression:\"form.title\"}})],1),n(\"el-form-item\",{attrs:{label:\"内容\"}},[n(\"tinymce-editor\",{attrs:{height:600},model:{value:t.form.content,callback:function(e){t.$set(t.form,\"content\",e)},expression:\"form.content\"}})],1),n(\"el-form-item\",{staticClass:\"fl\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.submit}},[t._v(\"提交\")])],1)],1)],1)])};a._withStripped=!0;var i=n(42),r=n(57),s={components:{TinymceEditor:i.a},data:()=>({form:{title:\"\",content:\"\"},rules:{title:[{required:!0,message:\"请输入标题\",trigger:\"blur\"},{max:20,message:\"超出长度限制\",trigger:\"blur\"}]}}),async mounted(){this.init()},methods:{async init(){const t=this;try{if(\"adminEditNew\"==t.$route.name){let e=t.$route.params.id,n=await Object(r.d)(e);t.form.title=n.data.new.title,t.form.content=n.data.new.content}else Object.assign(t.form,{title:\"\",content:\"\"})}catch(e){console.log(e),t.$router.replace({name:\"admin404Page\"})}},async submit(){const t=this;t.$refs.form.validate(async e=>{if(!e)return t.$message({message:\"表单必填项不能为空\",type:\"error\"}),!1;try{let e;if(\"adminAddNew\"==t.$route.name)e=await Object(r.a)(t.form);else{let n=t.$route.params.id;e=await Object(r.c)(n,t.form)}t.$message({message:e.data.message,type:\"success\"}),t.$router.push({name:\"adminNewlist\"})}catch(e){t.$message({message:e.response.data.message,type:\"error\"})}})}},watch:{$route(t,e){\"adminAddNew\"!=t.name&&\"adminEditNew\"!=t.name||this.init()}}},o=n(2),l=Object(o.a)(s,a,[],!1,null,\"59359a79\",null);l.options.__file=\"web-admin/js/pages/new/index.vue\";e.default=l.exports},42:function(t,e,n){\"use strict\";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"tinymce-editor\",style:{height:t.height+\"px\"}},[n(\"editor\",{attrs:{init:t.init,disabled:t.disabled},on:{onClick:t.onClick},model:{value:t.myValue,callback:function(e){t.myValue=e},expression:\"myValue\"}})],1)};a._withStripped=!0;var i=n(101),r=n.n(i),s=n(102),o=(n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(26)),l=n(37),c=n.n(l),u={name:\"tinymce-editor\",components:{Editor:s.a},props:{value:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:\"lists image table wordcount code\"},toolbar:{type:[String,Array],default:\"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat\"},height:{type:Number,default:600}},data(){return{init:{relative_urls:!0,document_base_url:o.c,language_url:\"/static/tinymce/langs/zh_CN.js\",skin_url:\"/static/tinymce/skins/ui/oxide\",content_css:\"/static/tinymce/skins/ui/oxide/content.min.css\",language:\"zh_CN\",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,images_upload_handler:(t,e,n)=>{let a;(a=new FormData).append(\"file\",t.blob(),t.filename());c.a.post(\"/api/admin/image\",a,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU\"}}).then(t=>{e(t.data.url)}).catch(t=>{})}},myValue:this.value}},mounted(){},methods:{onClick(t){this.$emit(\"onClick\",t,r.a)},clear(){this.myValue=\"\"}},watch:{value(t){this.myValue=t},myValue(t){this.$emit(\"input\",t)}}},m=n(2),d=Object(m.a)(u,a,[],!1,null,\"393b9879\",null);d.options.__file=\"web-common/components/tinymce_editor.vue\";e.a=d.exports},57:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"c\",function(){return r}),n.d(e,\"d\",function(){return s}),n.d(e,\"e\",function(){return o}),n.d(e,\"b\",function(){return l}),n.d(e,\"f\",function(){return c}),n.d(e,\"g\",function(){return u});var a=n(0);function i(t){return Object(a.a)(\"POST\",\"admin/new\",t)}function r(t,e){return console.log(t,e),Object(a.a)(\"PUT\",`admin/new/${t}`,e)}function s(t){return Object(a.a)(\"GET\",`admin/new/${t}`)}function o(t,e,n){return Object(a.a)(\"GET\",\"admin/news\",{page:t,perpage:e,param:n})}function l(t){return Object(a.a)(\"DELETE\",`admin/new/${t}`)}function c(t){return Object(a.a)(\"PUT\",`admin/new/${t}/status`)}function u(t){return Object(a.a)(\"PUT\",`admin/new/${t}/topstatus`)}}}]);","extractedComments":[]}