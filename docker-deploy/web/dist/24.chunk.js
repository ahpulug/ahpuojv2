(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{163:function(t,e,n){"use strict";var r,a,o=n(171),i=RegExp.prototype.exec,c=String.prototype.replace,s=i,u=(r=/a/,a=/b*/g,i.call(r,"a"),i.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(s=function(t){var e,n,r,a,s=this;return l&&(n=new RegExp("^"+s.source+"$(?!\\s)",o.call(s))),u&&(e=s.lastIndex),r=i.call(s,t),u&&r&&(s.lastIndex=s.global?r.index+r[0].length:e),l&&r&&r.length>1&&c.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r}),t.exports=s},171:function(t,e,n){"use strict";var r=n(26);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},264:function(t,e,n){"use strict";var r=n(265)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},265:function(t,e,n){var r=n(70),a=n(46);t.exports=function(t){return function(e,n){var o,i,c=String(a(e)),s=r(n),u=c.length;return s<0||s>=u?t?"":void 0:(o=c.charCodeAt(s))<55296||o>56319||s+1===u||(i=c.charCodeAt(s+1))<56320||i>57343?t?c.charAt(s):o:t?c.slice(s,s+2):i-56320+(o-55296<<10)+65536}}},266:function(t,e,n){"use strict";var r=n(90),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},267:function(t,e,n){"use strict";n(306);var r=n(37),a=n(47),o=n(44),i=n(46),c=n(19),s=n(163),u=c("species"),l=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=c(t),p=!o(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),m=p?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e}):void 0;if(!p||!m||"replace"===t&&!l||"split"===t&&!f){var g=/./[d],v=n(i,d,""[t],function(t,e,n,r,a){return e.exec===s?p&&!a?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),h=v[0],b=v[1];r(String.prototype,t,h),a(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},29:function(t,e,n){"use strict";n.d(e,"e",function(){return a}),n.d(e,"j",function(){return o}),n.d(e,"l",function(){return i}),n.d(e,"m",function(){return c}),n.d(e,"k",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"p",function(){return l}),n.d(e,"o",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"i",function(){return p}),n.d(e,"n",function(){return m}),n.d(e,"a",function(){return g}),n.d(e,"g",function(){return v}),n.d(e,"c",function(){return h}),n.d(e,"b",function(){return b}),n.d(e,"h",function(){return x});var r=n(1);function a(t){return Object(r.a)("POST","admin/contest",t)}function o(t,e){return Object(r.a)("PUT","admin/contest/".concat(t),e)}function i(t){return Object(r.a)("GET","admin/contest/".concat(t))}function c(t,e,n){return Object(r.a)("GET","admin/contests",{page:t,perpage:e,param:n})}function s(){return Object(r.a)("GET","admin/allcontests")}function u(t){return Object(r.a)("DELETE","admin/contest/".concat(t))}function l(t){return Object(r.a)("PUT","admin/contest/".concat(t,"/status"))}function f(t,e,n,a){return Object(r.a)("GET","admin/contest/".concat(t,"/users"),{page:e,perpage:n,param:a})}function d(t,e){return Object(r.a)("POST","admin/contest/".concat(t,"/users"),e)}function p(t,e){return Object(r.a)("DELETE","admin/contest/".concat(t,"/user/").concat(e))}function m(t){return Object(r.a)("GET","admin/contest/".concat(t,"/teams"))}function g(t,e){return Object(r.a)("POST","admin/contest/".concat(t,"/team/").concat(e))}function v(t,e){return Object(r.a)("DELETE","admin/contest/".concat(t,"/team/").concat(e))}function h(t,e,n){return Object(r.a)("POST","admin/contest/".concat(t,"/team/").concat(e,"/users"),n)}function b(t,e){return Object(r.a)("POST","admin/contest/".concat(t,"/team/").concat(e,"/allusers"))}function x(t,e,n){return Object(r.a)("DELETE","admin/contest/".concat(t,"/team/").concat(e,"/user/").concat(n))}},306:function(t,e,n){"use strict";var r=n(163);n(54)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},33:function(t,e,n){"use strict";var r=n(26),a=n(164),o=n(86),i=n(70),c=n(264),s=n(266),u=Math.max,l=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(267)("replace",2,function(t,e,n,m){return[function(r,a){var o=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,o,a):n.call(String(o),r,a)},function(t,e){var a=m(n,t,this,e);if(a.done)return a.value;var f=r(t),d=String(this),p="function"==typeof e;p||(e=String(e));var v=f.global;if(v){var h=f.unicode;f.lastIndex=0}for(var b=[];;){var x=s(f,d);if(null===x)break;if(b.push(x),!v)break;""===String(x[0])&&(f.lastIndex=c(d,o(f.lastIndex),h))}for(var y,w="",_=0,O=0;O<b.length;O++){x=b[O];for(var k=String(x[0]),E=u(l(i(x.index),d.length),0),$=[],j=1;j<x.length;j++)$.push(void 0===(y=x[j])?y:String(y));var P=x.groups;if(p){var C=[k].concat($,E,d);void 0!==P&&C.push(P);var T=String(e.apply(void 0,C))}else T=g(k,d,E,$,P,e);E>=_&&(w+=d.slice(_,E)+T,_=E+k.length)}return w+d.slice(_)}];function g(t,e,r,o,i,c){var s=r+t.length,u=o.length,l=p;return void 0!==i&&(i=a(i),l=d),n.call(c,l,function(n,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":c=i[a.slice(1,-1)];break;default:var l=+a;if(0===l)return n;if(l>u){var d=f(l/10);return 0===d?n:d<=u?void 0===o[d-1]?a.charAt(1):o[d-1]+a.charAt(1):n}c=o[l-1]}return void 0===c?"":c})}})},677:function(t,e,n){"use strict";n.r(e);n(10),n(7),n(33),n(11);var r=n(29);function a(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function c(t){a(i,r,o,c,s,"next",t)}function s(t){a(i,r,o,c,s,"throw",t)}c(void 0)})}}var i={data:function(){return{loading:!0,currentPage:1,currentRowId:0,perpage:10,queryParam:"",total:0,dialogFormVisible:!1,dialogOperatorInfoVisible:!1,infoList:[],contest:null,form:{userList:""},rules:{userList:[{required:!0,message:"请输入要添加的用户名列表",trigger:"blur"}]},tableData:[]}},mounted:function(){var t=o(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.id,t.prev=1,t.next=4,Object(r.l)(e);case 4:n=t.sent,this.contest=n.data.contest,this.fetchContestUserList(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),this.$router.replace({name:"admin404Page"});case 13:case"end":return t.stop()}},t,this,[[1,9]])}));return function(){return t.apply(this,arguments)}}(),methods:{fetchContestUserList:function(){var t=o(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).loading=!0,t.prev=2,t.next=5,Object(r.o)(e.contest.id,e.currentPage,e.perpage,e.queryParam);case 5:n=t.sent,a=n.data,setTimeout(function(){e.tableData=a.data,e.total=a.total,e.loading=!1},200),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2);case 14:case"end":return t.stop()}},t,this,[[2,11]])}));return function(){return t.apply(this,arguments)}}(),handleSizeChange:function(t){this.perpage=t,this.fetchContestUserList()},openDialog:function(){this.$notify({title:"提示",message:"每一行对应一个用户名，若对应账号存在则加入团队，否则将忽略。",duration:6e3}),this.$refs.form.clearValidate(),this.$refs.input.focus()},closeDialog:function(){this.$refs.form.resetFields(),this.$refs.input.blur()},submit:function(){var t=this;t.$refs.form.validate(function(){var e=o(regeneratorRuntime.mark(function e(n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=18;break}return e.prev=1,o=t.$route.params.id,e.next=5,Object(r.d)(o,t.form);case 5:a=e.sent,t.infoList=a.data.info,t.dialogOperatorInfoVisible=!0,t.$message({message:a.data.message,type:"success"}),t.fetchContestUserList(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.$message({message:e.t0.response.data.message,type:"error"});case 15:t.dialogFormVisible=!1,e.next=19;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}())},cancel:function(){this.dialogFormVisible=!1},handleAddUser:function(){this.dialogFormVisible=!0},handleDeleteContestUser:function(){var t=o(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.prev=1,t.next=4,n.$confirm("确认要删除团队成员".concat(e.username,"吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 4:return t.prev=4,t.next=7,Object(r.i)(n.contest.id,e.id);case 7:a=t.sent,n.$message({type:"success",message:a.data.message}),1==n.tableData.length&&n.currentPage>1&&n.currentPage--,n.fetchContestUserList(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),n.$message({type:"error",message:t.t0.response.data.message});case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),n.$message({type:"info",message:"已取消删除"});case 21:case"end":return t.stop()}},t,this,[[1,18],[4,13]])}));return function(e){return t.apply(this,arguments)}}()}},c=n(2),s=Object(c.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"admin-content"},[n("div",{staticClass:"content__breadcrumb"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v(t._s(t.$route.meta.title))])],1)],1),n("div",{staticClass:"content__main"},[n("el-card",{staticClass:"content__card__wrapper"},[n("p",[t._v("竞赛&作业名称: "+t._s(t.contest.name))]),n("p",[t._v("人员总数: "+t._s(t.total))])]),n("div",{staticClass:"content__button__wrapper"},[n("el-button",{attrs:{type:"success"},on:{click:t.handleAddUser}},[t._v("添加人员")])],1),n("div",{staticClass:"content__searchbar__wrapper"},[n("el-input",{staticStyle:{"max-width":"20em"},attrs:{placeholder:"请输入用户名或昵称",maxlength:"20",clearable:""},model:{value:t.queryParam,callback:function(e){t.queryParam=e},expression:"queryParam"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary",plain:""},on:{click:t.fetchContestUserList}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"ID",prop:"id",width:"180"}}),n("el-table-column",{attrs:{label:"用户名",prop:"username",width:"180"}}),n("el-table-column",{attrs:{label:"昵称",prop:"nick"}}),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDeleteContestUser(e.row)}}},[t._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.fetchContestUserList,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),n("el-dialog",{attrs:{title:"添加竞赛&作业成员",visible:t.dialogFormVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.closeDialog,opened:t.openDialog}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"用户名列表",prop:"userList"}},[n("el-input",{ref:"input",attrs:{type:"textarea",rows:"20",autocomplete:"off",resize:"none"},model:{value:t.form.userList,callback:function(e){t.$set(t.form,"userList",e)},expression:"form.userList"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取消")]),n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:t.submit}},[t._v("确定")])],1)],1),n("el-dialog",{attrs:{title:"操作信息",visible:t.dialogOperatorInfoVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogOperatorInfoVisible=e}}},[t._l(t.infoList,function(e,r){return[n("p",{key:r},[t._v(t._s(e))])]}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogOperatorInfoVisible=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogOperatorInfoVisible=!1}}},[t._v("确定")])],1)],2)],1)])},[],!1,null,"1db69f1a",null);e.default=s.exports}}]);