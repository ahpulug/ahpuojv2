(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{15:function(e,t,a){"use strict";a.d(t,"i",function(){return n}),a.d(t,"m",function(){return o}),a.d(t,"j",function(){return i}),a.d(t,"h",function(){return s}),a.d(t,"g",function(){return l}),a.d(t,"k",function(){return c}),a.d(t,"l",function(){return p}),a.d(t,"n",function(){return u}),a.d(t,"o",function(){return d}),a.d(t,"c",function(){return _}),a.d(t,"b",function(){return f}),a.d(t,"e",function(){return m}),a.d(t,"f",function(){return v}),a.d(t,"d",function(){return g}),a.d(t,"a",function(){return y});var r=a(1);function n(){return Object(r.a)("GET","languages")}function o(e,t){return Object(r.a)("GET","ranklist",{page:e,perpage:t})}function i(e,t){return Object(r.a)("GET","news",{page:e,perpage:t})}function s(e,t,a){return Object(r.a)("GET","problem/".concat(e,"/issues"),{page:t,perpage:a})}function l(e,t,a){return Object(r.a)("GET","/issue/".concat(e),{page:t,perpage:a})}function c(e){return Object(r.a)("GET","problem/".concat(e))}function p(e,t,a,n,o){return Object(r.a)("GET","problems",{page:e,perpage:t,param:a,level:n,tag_id:o})}function u(e){return Object(r.a)("GET","solution/".concat(e))}function d(e,t,a,n,o,i,s){return Object(r.a)("GET","solutions",{page:e,perpage:t,param:a,username:n,language:o,result:i,contest_id:s})}function _(e,t,a){return Object(r.a)("GET","contests",{page:e,perpage:t,param:a})}function f(e){return Object(r.a)("GET","contest/".concat(e))}function m(e){return Object(r.a)("GET","contest/".concat(e,"/ranklist"))}function v(e){return Object(r.a)("GET","contest/".concat(e,"/teamranklist"))}function g(e,t){return Object(r.a)("GET","contest/".concat(e,"/problem/").concat(t))}function y(){return Object(r.a)("GET","alltags")}},287:function(e,t,a){var r=a(630);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(14)(r,n);r.locals&&(e.exports=r.locals)},629:function(e,t,a){"use strict";var r=a(287);a.n(r).a},630:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,".red[data-v-3a67e431]{color:red}.green[data-v-3a67e431]{color:green}.blue[data-v-3a67e431]{color:blue}.black[data-v-3a67e431]{color:#000}.white[data-v-3a67e431]{color:#fff}.yellow[data-v-3a67e431]{color:#ff0}.gold[data-v-3a67e431]{color:gold}.purple[data-v-3a67e431]{color:purple}.cyan[data-v-3a67e431]{color:cyan}.orange[data-v-3a67e431]{color:orange}.orangered[data-v-3a67e431]{color:#ff4500}.pink[data-v-3a67e431]{color:pink}.violet[data-v-3a67e431]{color:violet}.yellowgreen[data-v-3a67e431]{color:#9acd32}.tomato[data-v-3a67e431]{color:tomato}.tan[data-v-3a67e431]{color:tan}.snow[data-v-3a67e431]{color:snow}.gray[data-v-3a67e431]{color:gray}.silver[data-v-3a67e431]{color:silver}.skyblue[data-v-3a67e431]{color:skyblue}.navy[data-v-3a67e431]{color:navy}.brown[data-v-3a67e431]{color:brown}.beige[data-v-3a67e431]{color:beige}.magenta[data-v-3a67e431]{color:#f0f}.c0[data-v-3a67e431]{color:#000}.c1[data-v-3a67e431]{color:#111}.c2[data-v-3a67e431]{color:#222}.c3[data-v-3a67e431]{color:#333}.c4[data-v-3a67e431]{color:#444}.c5[data-v-3a67e431]{color:#555}.c6[data-v-3a67e431]{color:#666}.c7[data-v-3a67e431]{color:#777}.c8[data-v-3a67e431]{color:#888}.c9[data-v-3a67e431]{color:#999}.c10[data-v-3a67e431]{color:#aaa}.c11[data-v-3a67e431]{color:#bbb}.c12[data-v-3a67e431]{color:#ccc}.c13[data-v-3a67e431]{color:#ddd}.c14[data-v-3a67e431]{color:#eee}.c15[data-v-3a67e431]{color:#fff}.porange[data-v-3a67e431]{color:#fc9}.pgold[data-v-3a67e431]{color:#ffc}.pazure[data-v-3a67e431]{color:#cff}.pdgreen[data-v-3a67e431]{color:#9cc}.ppurple[data-v-3a67e431]{color:#ccf}.pblue[data-v-3a67e431]{color:#09c}.plblue[data-v-3a67e431]{color:#9cf}.pdblue[data-v-3a67e431]{color:#369}.pgreen[data-v-3a67e431]{color:#9c3}.replys__wrapper .link[data-v-3a67e431]{font-size:0.24rem;line-height:0.5rem;padding-right:0.2rem}.replys__wrapper h1.content__panel__title[data-v-3a67e431]{background:#fff}.replys__wrapper .reply__box[data-v-3a67e431]{background:#fff;position:relative;margin-top:0.2rem;padding:0.2rem;border:1px solid #ddd}.replys__wrapper .reply__box .reply__userinfo__wrapper[data-v-3a67e431]{text-align:center;float:left;width:100px}.replys__wrapper .reply__box .reply__userinfo__wrapper img[data-v-3a67e431]{width:60px;height:60px;border-radius:30px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.replys__wrapper .reply__box[data-v-3a67e431]:last-child{border-bottom:1px solid #ddd}.replys__wrapper .reply__box .reply__content[data-v-3a67e431]{position:relative;box-sizing:border-box;padding:0.1rem 0.2rem 0.2rem 0.1rem;margin-left:100px;min-height:100px;text-align:left;font-size:20px}.replys__wrapper .reply__box .reply__addon[data-v-3a67e431]{font-size:16px;position:absolute;width:100%;left:0px;bottom:0px}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box[data-v-3a67e431]{padding:0.1rem;margin-left:100px;border:1px solid #ddd}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper[data-v-3a67e431]{text-align:center;padding-top:20px;float:left;width:100px}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__userinfo__wrapper img[data-v-3a67e431]{width:40px;height:40px;border-radius:20px;border:1px solid #ccc;box-shadow:1px 1px 1px 1px #ccc}.replys__wrapper .reply__box .subreplys__wrapper .subreply__box .subreply__content[data-v-3a67e431]{position:relative;box-sizing:border-box;padding:0.15rem;margin-left:100px;min-height:100px;text-align:left;font-size:20px}.replys__wrapper .post__box__wrapper[data-v-3a67e431]{min-height:100px;text-align:left;background:#fff;padding:1rem}\n",""])},692:function(e,t,a){"use strict";a.r(t);a(10),a(7),a(11);var r=a(15),n=a(78),o=a(87),i=a(30);function s(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var o=e.apply(t,a);function i(e){s(o,r,n,i,l,"next",e)}function l(e){s(o,r,n,i,l,"throw",e)}i(void 0)})}}var c={components:{TinymceEditor:n.a},name:"",data:function(){return{currentPage:1,dialogFormVisible:!1,perpage:20,issue:null,replys:[],total:0,replyContent:"",subReplyContent:"",replyForm:{content:"",reply_id:0,reply_user_id:0}}},mounted:function(){this.fetchIssue()},methods:{fetchIssue:function(){var e=l(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,t=this,e.prev=4,e.next=7,Object(r.g)(t.$route.params.id,t.currentPage,t.perpage);case 7:a=e.sent,n=a.data,t.issue=n.issue,t.replys=n.replys,t.total=n.total,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4);case 18:case"end":return e.stop()}},e,this,[[4,15]])}));return function(){return e.apply(this,arguments)}}(),openDialog:function(){},closeDialog:function(){this.subReplyContent=""},cancel:function(){this.dialogFormVisible=!1},goLogin:function(){o.a.$emit("goLogin")},calcSubReply:function(e){return e.reply_user_nick?"回复".concat(e.reply_user_nick,": ").concat(e.content):e.content},reply:function(){var e=l(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=this).replyForm.content=1==t?a.replyContent:a.subReplyContent,""!=a.replyForm.content){e.next=6;break}return this.$message({message:"内容不能为空",type:"error"}),e.abrupt("return");case 6:return e.prev=6,1==t&&(a.replyForm.reply_id=0,a.replyForm.reply_user_id=0),e.next=10,Object(i.g)(a.issue.id,a.replyForm);case 10:r=e.sent,a.$message({message:r.data.message,type:"success"}),a.replyForm.content="",a.replyContent="",a.dialogFormVisible=!1,a.fetchIssue(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),a.$message({message:e.t0.response.data.message,type:"error"});case 21:case"end":return e.stop()}},e,this,[[6,18]])}));return function(t){return e.apply(this,arguments)}}(),handleReplyToReply:function(e){this.dialogFormVisible=!0,this.replyForm.reply_id=e.id,this.replyForm.reply_user_id=e.user.id}}},p=(a(629),a(2)),u=Object(p.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("title",[e._v(e._s(e.issue.title+" - AHPUOJ"))]),a("div",{staticClass:"content__main"},[a("div",{staticClass:"replys__wrapper"},[a("div",{staticClass:"link fr"},[a("span",[e._v("板块 ")]),0==e.issue.problem.id?a("router-link",{attrs:{to:{name:"issueList"}}},[e._v(e._s("总板"))]):a("router-link",{attrs:{to:{name:"problemIssueList",params:{id:e.issue.problem.id}}}},[e._v(e._s("问题P "+e.issue.problem.title))])],1),a("h1",{staticClass:"content__panel__title"},[e._v(e._s(e.issue.title))]),e._l(e.replys,function(t,r){return[a("div",{staticClass:"reply__box"},[a("div",{staticClass:"reply__userinfo__wrapper"},[a("ul",[a("li",{staticClass:"reply__user__avatar"},[a("router-link",{attrs:{to:{name:"userinfo",params:{id:t.user.id}}}},[a("img",{attrs:{src:e.imgUrl(t.user.avatar)}})])],1),a("li",{staticClass:"reply__user__name ell"},[a("router-link",{attrs:{to:{name:"userinfo",params:{id:t.user.id}}}},[e._v(e._s(t.user.nick))])],1)])]),a("div",{staticClass:"reply__content"},[a("div",{domProps:{innerHTML:e._s(t.content)}}),a("div",{staticClass:"reply__addon clearfix"},[a("p",{staticClass:"fr"},[a("span",[e._v(" "+e._s(t.updated_at)+" ")]),a("span",[e._v(e._s(t.reply_count)+"个回复")])]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleReplyToReply(t)}}},[e._v("回复")])],1)]),a("div",{staticClass:"subreplys__wrapper mt10"},[e._l(t.sub_replys,function(r,n){return[a("div",{staticClass:"subreply__box"},[a("div",{staticClass:"subreply__userinfo__wrapper"},[a("ul",[a("li",{staticClass:"reply__user__avatar"},[a("router-link",{attrs:{to:{name:"userinfo",params:{id:r.user.id}}}},[a("img",{attrs:{src:e.imgUrl(r.user.avatar)}})])],1),a("li",{staticClass:"reply__user__name ell"},[a("router-link",{attrs:{to:{name:"userinfo",params:{id:r.user.id}}}},[e._v(e._s(r.user.nick)+"                  ")])],1)])]),a("div",{staticClass:"subreply__content"},[a("div",{domProps:{innerHTML:e._s(e.calcSubReply(r))}}),a("div",{staticClass:"reply__addon clearfix"},[a("p",{staticClass:"fr"},[a("span",[e._v(" "+e._s(t.updated_at)+" ")]),a("span",[e._v(e._s(t.reply_count)+"个回复")])])])])])]})],2)])]}),a("el-pagination",{staticClass:"tal mt10 mb10",staticStyle:{background:"#fff"},attrs:{"current-page":e.currentPage,background:"","page-size":e.perpage,layout:"prev, pager, next,jumper",total:e.total},on:{"current-change":e.fetchIssue,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),a("h1",{staticClass:"content__panel__title"},[e._v("发表新回复")]),a("div",{staticClass:"post__box__wrapper"},[e.$store.getters.username?a("div",{staticClass:"post__box"},[a("tinymce-editor",{staticClass:"mt10",attrs:{height:300},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}),a("el-button",{staticClass:"mt10",attrs:{type:"primary"},on:{click:function(t){return e.reply(1)}}},[e._v("发表")])],1):a("a",{on:{click:e.goLogin}},[e._v("请登陆后发表讨论")])])],2)]),a("el-dialog",{attrs:{title:"回复内容",visible:e.dialogFormVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.closeDialog,opened:e.openDialog}},[a("tinymce-editor",{staticClass:"mt10",attrs:{height:300},model:{value:e.subReplyContent,callback:function(t){e.subReplyContent=t},expression:"subReplyContent"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return e.reply(2)}}},[e._v("确定")])],1)],1)],1)},[],!1,null,"3a67e431",null);t.default=u.exports},78:function(e,t,a){"use strict";a(85);var r=a(175),n=a.n(r),o=a(176),i=(a(310),a(311),a(312),a(313),a(314),a(315),a(316),a(317),a(318),a(50)),s=a(66),l=a.n(s),c={name:"tinymce-editor",components:{Editor:o.a},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists image table wordcount code"},toolbar:{type:[String,Array],default:"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat"},height:{type:Number,default:600}},data:function(){return{init:{relative_urls:!0,document_base_url:i.c,language_url:"/static/tinymce/langs/zh_CN.js",skin_url:"/static/tinymce/skins/ui/oxide",content_css:"/static/tinymce/skins/ui/oxide/content.min.css",language:"zh_CN",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:"silver"},images_upload_handler:function(e,t,a){var r;(r=new FormData).append("file",e.blob(),e.filename());l.a.post("/api/admin/image",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU"}}).then(function(e){t(e.data.url)}).catch(function(e){})}},myValue:this.value}},mounted:function(){},methods:{onClick:function(e){this.$emit("onClick",e,n.a)},clear:function(){this.myValue=""}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}}},p=a(2),u=Object(p.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tinymce-editor",style:{height:e.height+"px"}},[a("editor",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},[],!1,null,"3ee0a8eb",null);t.a=u.exports},87:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=new(a(6).default)}}]);