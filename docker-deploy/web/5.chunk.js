(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{15:function(t,e,n){"use strict";n.d(e,"i",function(){return a}),n.d(e,"m",function(){return i}),n.d(e,"j",function(){return o}),n.d(e,"h",function(){return c}),n.d(e,"g",function(){return s}),n.d(e,"k",function(){return u}),n.d(e,"l",function(){return l}),n.d(e,"n",function(){return m}),n.d(e,"o",function(){return f}),n.d(e,"c",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return v}),n.d(e,"d",function(){return h}),n.d(e,"a",function(){return b});var r=n(1);function a(){return Object(r.a)("GET","languages")}function i(t,e){return Object(r.a)("GET","ranklist",{page:t,perpage:e})}function o(t,e){return Object(r.a)("GET","news",{page:t,perpage:e})}function c(t,e,n){return Object(r.a)("GET","problem/".concat(t,"/issues"),{page:e,perpage:n})}function s(t,e,n){return Object(r.a)("GET","/issue/".concat(t),{page:e,perpage:n})}function u(t){return Object(r.a)("GET","problem/".concat(t))}function l(t,e,n,a,i){return Object(r.a)("GET","problems",{page:t,perpage:e,param:n,level:a,tag_id:i})}function m(t){return Object(r.a)("GET","solution/".concat(t))}function f(t,e,n,a,i,o,c){return Object(r.a)("GET","solutions",{page:t,perpage:e,param:n,username:a,language:i,result:o,contest_id:c})}function d(t,e,n){return Object(r.a)("GET","contests",{page:t,perpage:e,param:n})}function p(t){return Object(r.a)("GET","contest/".concat(t))}function g(t){return Object(r.a)("GET","contest/".concat(t,"/ranklist"))}function v(t){return Object(r.a)("GET","contest/".concat(t,"/teamranklist"))}function h(t,e){return Object(r.a)("GET","contest/".concat(t,"/problem/").concat(e))}function b(){return Object(r.a)("GET","alltags")}},163:function(t,e,n){"use strict";var r,a,i=n(171),o=RegExp.prototype.exec,c=String.prototype.replace,s=o,u=(r=/a/,a=/b*/g,o.call(r,"a"),o.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(s=function(t){var e,n,r,a,s=this;return l&&(n=new RegExp("^"+s.source+"$(?!\\s)",i.call(s))),u&&(e=s.lastIndex),r=o.call(s,t),u&&r&&(s.lastIndex=s.global?r.index+r[0].length:e),l&&r&&r.length>1&&c.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r}),t.exports=s},171:function(t,e,n){"use strict";var r=n(26);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},264:function(t,e,n){var r=n(70),a=n(46);t.exports=function(t){return function(e,n){var i,o,c=String(a(e)),s=r(n),u=c.length;return s<0||s>=u?t?"":void 0:(i=c.charCodeAt(s))<55296||i>56319||s+1===u||(o=c.charCodeAt(s+1))<56320||o>57343?t?c.charAt(s):i:t?c.slice(s,s+2):o-56320+(i-55296<<10)+65536}}},265:function(t,e,n){"use strict";var r=n(264)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},266:function(t,e,n){"use strict";var r=n(90),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},267:function(t,e,n){"use strict";n(306);var r=n(37),a=n(47),i=n(44),o=n(46),c=n(19),s=n(163),u=c("species"),l=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),m=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=c(t),d=!i(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),p=d?!i(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!e}):void 0;if(!d||!p||"replace"===t&&!l||"split"===t&&!m){var g=/./[f],v=n(o,f,""[t],function(t,e,n,r,a){return e.exec===s?d&&!a?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),h=v[0],b=v[1];r(String.prototype,t,h),a(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},29:function(t,e,n){"use strict";n.d(e,"e",function(){return a}),n.d(e,"j",function(){return i}),n.d(e,"l",function(){return o}),n.d(e,"m",function(){return c}),n.d(e,"k",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"p",function(){return l}),n.d(e,"o",function(){return m}),n.d(e,"d",function(){return f}),n.d(e,"i",function(){return d}),n.d(e,"n",function(){return p}),n.d(e,"a",function(){return g}),n.d(e,"g",function(){return v}),n.d(e,"c",function(){return h}),n.d(e,"b",function(){return b}),n.d(e,"h",function(){return y});var r=n(1);function a(t){return Object(r.a)("POST","admin/contest",t)}function i(t,e){return Object(r.a)("PUT","admin/contest/".concat(t),e)}function o(t){return Object(r.a)("GET","admin/contest/".concat(t))}function c(t,e,n){return Object(r.a)("GET","admin/contests",{page:t,perpage:e,param:n})}function s(){return Object(r.a)("GET","admin/allcontests")}function u(t){return Object(r.a)("DELETE","admin/contest/".concat(t))}function l(t){return Object(r.a)("PUT","admin/contest/".concat(t,"/status"))}function m(t,e,n,a){return Object(r.a)("GET","admin/contest/".concat(t,"/users"),{page:e,perpage:n,param:a})}function f(t,e){return Object(r.a)("POST","admin/contest/".concat(t,"/users"),e)}function d(t,e){return Object(r.a)("DELETE","admin/contest/".concat(t,"/user/").concat(e))}function p(t){return Object(r.a)("GET","admin/contest/".concat(t,"/teams"))}function g(t,e){return Object(r.a)("POST","admin/contest/".concat(t,"/team/").concat(e))}function v(t,e){return Object(r.a)("DELETE","admin/contest/".concat(t,"/team/").concat(e))}function h(t,e,n){return Object(r.a)("POST","admin/contest/".concat(t,"/team/").concat(e,"/users"),n)}function b(t,e){return Object(r.a)("POST","admin/contest/".concat(t,"/team/").concat(e,"/allusers"))}function y(t,e,n){return Object(r.a)("DELETE","admin/contest/".concat(t,"/team/").concat(e,"/user/").concat(n))}},306:function(t,e,n){"use strict";var r=n(163);n(54)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},309:function(t,e,n){var r=n(54);r(r.S+r.F,"Object",{assign:n(578)})},31:function(t,e,n){"use strict";var r=n(26),a=n(164),i=n(86),o=n(70),c=n(265),s=n(266),u=Math.max,l=Math.min,m=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(267)("replace",2,function(t,e,n,p){return[function(r,a){var i=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,i,a):n.call(String(i),r,a)},function(t,e){var a=p(n,t,this,e);if(a.done)return a.value;var m=r(t),f=String(this),d="function"==typeof e;d||(e=String(e));var v=m.global;if(v){var h=m.unicode;m.lastIndex=0}for(var b=[];;){var y=s(m,f);if(null===y)break;if(b.push(y),!v)break;""===String(y[0])&&(m.lastIndex=c(f,i(m.lastIndex),h))}for(var x,k="",_=0,j=0;j<b.length;j++){y=b[j];for(var E=String(y[0]),O=u(l(o(y.index),f.length),0),w=[],T=1;T<y.length;T++)w.push(void 0===(x=y[T])?x:String(x));var $=y.groups;if(d){var L=[E].concat(w,O,f);void 0!==$&&L.push($);var C=String(e.apply(void 0,L))}else C=g(E,f,O,w,$,e);O>=_&&(k+=f.slice(_,O)+C,_=O+E.length)}return k+f.slice(_)}];function g(t,e,r,i,o,c){var s=r+t.length,u=i.length,l=d;return void 0!==o&&(o=a(o),l=f),n.call(c,l,function(n,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(s);case"<":c=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return n;if(l>u){var f=m(l/10);return 0===f?n:f<=u?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):n}c=i[l-1]}return void 0===c?"":c})}})},575:function(t,e,n){"use strict";n.r(e);n(10),n(7),n(309),n(31),n(38),n(11);var r=n(78),a=n(29),i=n(15);function o(t,e,n,r,a,i,o){try{var c=t[i](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function c(t){o(i,r,a,c,s,"next",t)}function s(t){o(i,r,a,c,s,"throw",t)}c(void 0)})}}var s={components:{TinymceEditor:r.a},data:function(){var t=this;return{langList:[],selectedLangList:[],form:{name:"",start_time:"",end_time:"",problems:"",description:"",langmask:0,private:0,team_mode:0},rules:{name:[{required:!0,message:"请输入问题名称",trigger:"blur"},{max:20,message:"超出长度限制",trigger:"blur"}],start_time:[{validator:function(e,n,r){if(""===n)r(new Error("请输入开始时间"));else if(""!=t.form.end_time){var a=new Date(t.form.start_time),i=new Date(t.form.end_time);a.getTime()<i.getTime()?(t.$refs.form.validateField("end_time"),r()):r()}else r()},trigger:"blur"}],end_time:[{validator:function(e,n,r){if(""===n)r(new Error("请输入结束时间"));else if(""!=t.form.start_time){var a=new Date(t.form.start_time),i=new Date(t.form.end_time);a.getTime()<i.getTime()?r():r(new Error("结束必须大于开始时间"))}else r()},trigger:"blur"}]}}},mounted:function(){var t=c(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.i)();case 2:e=t.sent,this.langList=e.data.languages,this.init();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{init:function(){var t=c(regeneratorRuntime.mark(function t(){var e,n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("adminEditContest"!=(e=this).$route.name){t.next=18;break}return t.prev=2,n=e.$route.params.id,t.next=6,Object(a.l)(n);case 6:for(i in r=t.sent,e.form=r.data.contest,this.$notify({title:"提示",message:"更改公开度与团队模式后私有比赛的参赛人员需要重新进行设置！",duration:6e3}),e.langList)e.langList[i].available&&e.form.langmask&1<<i&&e.selectedLangList.push(e.langList[i].name);t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),e.$router.replace({name:"admin404Page"});case 16:t.next=19;break;case 18:Object.assign(e.form,{name:"",start_time:"",end_time:"",problems:"",description:"",langmask:0,private:0,team_mode:0});case 19:for(o in this.langList)this.langList[o].available&&(this.form.langmask=this.form.langmask|1<<o);case 20:case"end":return t.stop()}},t,this,[[2,12]])}));return function(){return t.apply(this,arguments)}}(),submit:function(){var t=c(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this).$refs.form.validate(function(){var t=c(regeneratorRuntime.mark(function t(n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=21;break}if(t.prev=1,"adminAddContest"!=e.$route.name){t.next=8;break}return t.next=5,Object(a.e)(e.form);case 5:r=t.sent,t.next=12;break;case 8:return i=e.$route.params.id,t.next=11,Object(a.j)(i,e.form);case 11:r=t.sent;case 12:e.$message({message:r.data.message,type:"success"}),e.$router.push({name:"adminContestList"}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),e.$message({message:t.t0.response.data.message,type:"error"});case 19:t.next=23;break;case 21:return e.$message({message:"表单必填项不能为空",type:"error"}),t.abrupt("return",!1);case 23:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),calcMask:function(t){for(var e=0,n=0;n<this.selectedLangList.length;n++)for(var r=0;r<this.langList.length;r++)this.selectedLangList[n]==this.langList[r].name&&(e|=1<<r);this.form.langmask=e},notifyModeChange:function(){1==this.form.team_mode&&this.$notify({title:"提示",message:"团队模式只能为私有",duration:6e3})}},computed:{private:function(){return this.form.private},teamMode:function(){return this.form.team_mode}},watch:{$route:function(t,e){"adminAddContest"!=t.name&&"adminEditContest"!=t.name||this.init()},private:function(t,e){0==t&&(this.form.team_mode=0)},teamMode:function(t,e){1==t&&(this.form.private=1)}}},u=n(2),l=Object(u.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"admin-content"},[n("div",{staticClass:"content__breadcrumb"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"adminIndex"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v(t._s(t.$route.meta.title))])],1)],1),n("div",{staticClass:"content__main"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"6em"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入名称",autofocus:!0},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"开始时间",prop:"start_time"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始时间"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1),n("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1),n("el-form-item",{attrs:{label:"题目编号"}},[n("el-input",{attrs:{placeholder:"使用 , 半角逗号 分隔题目ID列表，格式如:1000,1001,1002",autofocus:!0},model:{value:t.form.problems,callback:function(e){t.$set(t.form,"problems",e)},expression:"form.problems"}})],1),n("el-form-item",{attrs:{label:"简介"}},[n("tinymce-editor",{attrs:{height:300},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),n("el-form-item",{attrs:{label:"公开度"}},[n("el-switch",{attrs:{"active-text":"私有","inactive-text":"公开","inactive-color":"#99cc33","active-value":1,"inactive-value":0},model:{value:t.form.private,callback:function(e){t.$set(t.form,"private",e)},expression:"form.private"}})],1),n("el-form-item",{attrs:{label:"团队模式"}},[n("el-switch",{attrs:{"active-text":"团队","inactive-text":"个人","inactive-color":"#99cc33","active-value":1,"inactive-value":0},on:{change:t.notifyModeChange},model:{value:t.form.team_mode,callback:function(e){t.$set(t.form,"team_mode",e)},expression:"form.team_mode"}})],1),n("el-form-item",{attrs:{label:"语言"}},[n("el-checkbox-group",{on:{change:t.calcMask},model:{value:t.selectedLangList,callback:function(e){t.selectedLangList=e},expression:"selectedLangList"}},t._l(t.langList,function(e,r){return n("el-checkbox",{key:e.name,attrs:{label:e.name,disabled:!e.available,checked:(t.form.langmask&1<<r)>0}})}),1)],1),n("el-form-item",{staticClass:"fl"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)])},[],!1,null,"bcd98c5a",null);e.default=l.exports},578:function(t,e,n){"use strict";var r=n(167),a=n(579),i=n(268),o=n(164),c=n(273),s=Object.assign;t.exports=!s||n(44)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=o(t),s=arguments.length,u=1,l=a.f,m=i.f;s>u;)for(var f,d=c(arguments[u++]),p=l?r(d).concat(l(d)):r(d),g=p.length,v=0;g>v;)m.call(d,f=p[v++])&&(n[f]=d[f]);return n}:s},579:function(t,e){e.f=Object.getOwnPropertySymbols},78:function(t,e,n){"use strict";n(85);var r=n(175),a=n.n(r),i=n(176),o=(n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(50)),c=n(66),s=n.n(c),u={name:"tinymce-editor",components:{Editor:i.a},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists image table wordcount code"},toolbar:{type:[String,Array],default:"undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code image  table | removeformat"},height:{type:Number,default:600}},data:function(){return{init:{relative_urls:!0,document_base_url:o.c,language_url:"/static/tinymce/langs/zh_CN.js",skin_url:"/static/tinymce/skins/ui/oxide",content_css:"/static/tinymce/skins/ui/oxide/content.min.css",language:"zh_CN",height:this.height,resize:!1,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,automatic_uploads:!1,mobile:{theme:"silver"},images_upload_handler:function(t,e,n){var r;(r=new FormData).append("file",t.blob(),t.filename());s.a.post("/api/admin/image",r,{headers:{"Content-Type":"multipart/form-data",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjAzNjg1NDQsInVzZXIiOiJhZG1pbiJ9.7K5BCDoodn10AH4Gwe_yDUDBSLWXnG-ogVFoGycQ7WU"}}).then(function(t){e(t.data.url)}).catch(function(t){})}},myValue:this.value}},mounted:function(){},methods:{onClick:function(t){this.$emit("onClick",t,a.a)},clear:function(){this.myValue=""}},watch:{value:function(t){this.myValue=t},myValue:function(t){this.$emit("input",t)}}},l=n(2),m=Object(l.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-editor",style:{height:t.height+"px"}},[n("editor",{attrs:{init:t.init,disabled:t.disabled},on:{onClick:t.onClick},model:{value:t.myValue,callback:function(e){t.myValue=e},expression:"myValue"}})],1)},[],!1,null,"3ee0a8eb",null);e.a=m.exports}}]);